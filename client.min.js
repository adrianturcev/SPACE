(()=>{var ct=Object.defineProperty;var rn=Object.getOwnPropertyDescriptor;var nn=Object.getOwnPropertyNames;var ln=Object.prototype.hasOwnProperty;var an=(i=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(i,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):i)(function(i){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+i+'" is not supported')});var sn=(i,e)=>()=>(i&&(e=i(i=0)),e);var Oe=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),on=(i,e)=>{for(var r in e)ct(i,r,{get:e[r],enumerable:!0})},fn=(i,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of nn(e))!ln.call(i,t)&&t!==r&&ct(i,t,{get:()=>e[t],enumerable:!(n=rn(e,t))||n.enumerable});return i};var un=i=>fn(ct({},"__esModule",{value:!0}),i);var Vt=Oe((zn,Gt)=>{Gt.exports={qs(i){return document.querySelector(i)},qsa(i){return Array.from(document.querySelector(i))},nil(i){return i===null||typeof i>"u"},hack(i,e,r){return i.slice(e,r+1)},pick(i,e){return i.filter(e)},prune(i,e){return i.filter(function(r){return!e(r)})},check(i,e){return i.every(e)},pipe(i,...e){return e.reduce((r,n)=>n(r),i)},escape(i){return i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},html(i){let e=i[0],r=Math.max(i.length,arguments.length-1);for(let n=1;n<r;n++)e+=arguments[n],e+=i[n];return e},diffVDomAndUpdate(i,e,r){let n=this;n.changedNodes=[];let t=i.childNodes,l=e.childNodes,a=r.childNodes;if(a.length>l.length){let o=a.length-l.length;for(let E=0,c=o;E<c;E++)r.lastChild.remove()}for(let o=0,E=l.length;o<E;o++)if(t[o]){if(t[o].outerHTML!==l[o].outerHTML){let c=["AREA","BASE","BR","COL","EMBED","HR","IMG","INPUT","LINK","META","PARAM","SOURCE","TRACK","WBR"],h=0;if(c.indexOf(l[o].tagName)===-1&&(h=3+l[o].tagName.length),t[o].tagName!==l[o].tagName||t[o].innerHTML===l[o].innerHTML||t[o].outerHTML.slice(-1*t[o].innerHTML.length-h)!==l[o].outerHTML.slice(-1*l[o].innerHTML.length-h)){let u=l[o].cloneNode(!0);n.changedNodes.push(u),a[o].replaceWith(u)}else this.diffVDomAndUpdate(t[o],l[o],a[o])}}else{let c=l[o].cloneNode(!0);n.changedNodes.push(c),r.appendChild(c)}},addDataState(i,e){let r=[];i.dataset.state&&i.dataset.state.indexOf(" ")>-1?r=i.dataset.state.split(" "):r=[i.dataset.state],r.indexOf(e)===-1&&(r.push(e),i.dataset.state=r.join(" "))},removeDataState(i,e){let r=[];i.dataset.state&&i.dataset.state.indexOf(" ")>-1?r=i.dataset.state.split(" "):r=[i.dataset.state],i.dataset.state=r.filter(n=>n!==e).join(" ")},replaceDataState(i,e,r){this.removeDataState(i,e),this.addDataState(i,r)},toggleDataState(i,e){i.dataset.state.split(" ").indexOf(e)==-1?this.addDataState(i,e):this.removeDataState(i,e)},resetDataState(i){i.dataset.state=""},ajaxGet(i,e,r,n){var t=new XMLHttpRequest;t.open("GET",i),t.addEventListener("load",function(){if(t.status>=200&&t.status<400)if(r){var l={};try{l=JSON.parse(t.responseText)}catch{console.error("Get request returned invalid JSON.")}n===void 0?e(l):e.apply(n,[l])}else n===void 0?e(t.responseText):e.apply(n,[t.responseText]);else console.error(t.status+" "+t.statusText+" "+i)}),t.addEventListener("error",function(){console.error("Network error trying to access: "+i)}),t.send(null)},ajaxPost(i,e,r,n,t,l,a){var o=new XMLHttpRequest;o.open("POST",i),o.addEventListener("load",function(){o.status>=200&&o.status<400?l===void 0?r(o):r.apply(l,[o]):(a===void 0?n(o):n.apply(a,[o]),console.error(o.status+" "+o.statusText+" "+i))}),o.addEventListener("error",function(){console.error("Network error trying to access: "+i)}),t&&(o.setRequestHeader("Content-Type","application/json"),e=JSON.stringify(e)),o.send(e)}}});var xr={};on(xr,{__addDisposableResource:()=>mr,__assign:()=>et,__asyncDelegator:()=>or,__asyncGenerator:()=>sr,__asyncValues:()=>fr,__await:()=>Pe,__awaiter:()=>tr,__classPrivateFieldGet:()=>hr,__classPrivateFieldIn:()=>gr,__classPrivateFieldSet:()=>pr,__createBinding:()=>rt,__decorate:()=>Yt,__disposeResources:()=>yr,__esDecorate:()=>Xt,__exportStar:()=>nr,__extends:()=>qt,__generator:()=>rr,__importDefault:()=>dr,__importStar:()=>cr,__makeTemplateObject:()=>ur,__metadata:()=>er,__param:()=>Kt,__propKey:()=>Qt,__read:()=>pt,__rest:()=>Wt,__rewriteRelativeImportExtension:()=>Er,__runInitializers:()=>Zt,__setFunctionName:()=>jt,__spread:()=>ir,__spreadArray:()=>ar,__spreadArrays:()=>lr,__values:()=>tt,default:()=>hn});function qt(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");dt(i,e);function r(){this.constructor=i}i.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function Wt(i,e){var r={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(r[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,n=Object.getOwnPropertySymbols(i);t<n.length;t++)e.indexOf(n[t])<0&&Object.prototype.propertyIsEnumerable.call(i,n[t])&&(r[n[t]]=i[n[t]]);return r}function Yt(i,e,r,n){var t=arguments.length,l=t<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(i,e,r,n);else for(var o=i.length-1;o>=0;o--)(a=i[o])&&(l=(t<3?a(l):t>3?a(e,r,l):a(e,r))||l);return t>3&&l&&Object.defineProperty(e,r,l),l}function Kt(i,e){return function(r,n){e(r,n,i)}}function Xt(i,e,r,n,t,l){function a(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var o=n.kind,E=o==="getter"?"get":o==="setter"?"set":"value",c=!e&&i?n.static?i:i.prototype:null,h=e||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),u,y=!1,d=r.length-1;d>=0;d--){var A={};for(var b in n)A[b]=b==="access"?{}:n[b];for(var b in n.access)A.access[b]=n.access[b];A.addInitializer=function(x){if(y)throw new TypeError("Cannot add initializers after decoration has completed");l.push(a(x||null))};var N=(0,r[d])(o==="accessor"?{get:h.get,set:h.set}:h[E],A);if(o==="accessor"){if(N===void 0)continue;if(N===null||typeof N!="object")throw new TypeError("Object expected");(u=a(N.get))&&(h.get=u),(u=a(N.set))&&(h.set=u),(u=a(N.init))&&t.unshift(u)}else(u=a(N))&&(o==="field"?t.unshift(u):h[E]=u)}c&&Object.defineProperty(c,n.name,h),y=!0}function Zt(i,e,r){for(var n=arguments.length>2,t=0;t<e.length;t++)r=n?e[t].call(i,r):e[t].call(i);return n?r:void 0}function Qt(i){return typeof i=="symbol"?i:"".concat(i)}function jt(i,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(i,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function er(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function tr(i,e,r,n){function t(l){return l instanceof r?l:new r(function(a){a(l)})}return new(r||(r=Promise))(function(l,a){function o(h){try{c(n.next(h))}catch(u){a(u)}}function E(h){try{c(n.throw(h))}catch(u){a(u)}}function c(h){h.done?l(h.value):t(h.value).then(o,E)}c((n=n.apply(i,e||[])).next())})}function rr(i,e){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},n,t,l,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(h){return E([c,h])}}function E(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(r=0)),r;)try{if(n=1,t&&(l=c[0]&2?t.return:c[0]?t.throw||((l=t.return)&&l.call(t),0):t.next)&&!(l=l.call(t,c[1])).done)return l;switch(t=0,l&&(c=[c[0]&2,l.value]),c[0]){case 0:case 1:l=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,t=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!l||c[1]>l[0]&&c[1]<l[3])){r.label=c[1];break}if(c[0]===6&&r.label<l[1]){r.label=l[1],l=c;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(c);break}l[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(i,r)}catch(h){c=[6,h],t=0}finally{n=l=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function nr(i,e){for(var r in i)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&rt(e,i,r)}function tt(i){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&i[e],n=0;if(r)return r.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function pt(i,e){var r=typeof Symbol=="function"&&i[Symbol.iterator];if(!r)return i;var n=r.call(i),t,l=[],a;try{for(;(e===void 0||e-- >0)&&!(t=n.next()).done;)l.push(t.value)}catch(o){a={error:o}}finally{try{t&&!t.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return l}function ir(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(pt(arguments[e]));return i}function lr(){for(var i=0,e=0,r=arguments.length;e<r;e++)i+=arguments[e].length;for(var n=Array(i),t=0,e=0;e<r;e++)for(var l=arguments[e],a=0,o=l.length;a<o;a++,t++)n[t]=l[a];return n}function ar(i,e,r){if(r||arguments.length===2)for(var n=0,t=e.length,l;n<t;n++)(l||!(n in e))&&(l||(l=Array.prototype.slice.call(e,0,n)),l[n]=e[n]);return i.concat(l||Array.prototype.slice.call(e))}function Pe(i){return this instanceof Pe?(this.v=i,this):new Pe(i)}function sr(i,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(i,e||[]),t,l=[];return t=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",a),t[Symbol.asyncIterator]=function(){return this},t;function a(d){return function(A){return Promise.resolve(A).then(d,u)}}function o(d,A){n[d]&&(t[d]=function(b){return new Promise(function(N,x){l.push([d,b,N,x])>1||E(d,b)})},A&&(t[d]=A(t[d])))}function E(d,A){try{c(n[d](A))}catch(b){y(l[0][3],b)}}function c(d){d.value instanceof Pe?Promise.resolve(d.value.v).then(h,u):y(l[0][2],d)}function h(d){E("next",d)}function u(d){E("throw",d)}function y(d,A){d(A),l.shift(),l.length&&E(l[0][0],l[0][1])}}function or(i){var e,r;return e={},n("next"),n("throw",function(t){throw t}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(t,l){e[t]=i[t]?function(a){return(r=!r)?{value:Pe(i[t](a)),done:!1}:l?l(a):a}:l}}function fr(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],r;return e?e.call(i):(i=typeof tt=="function"?tt(i):i[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(l){r[l]=i[l]&&function(a){return new Promise(function(o,E){a=i[l](a),t(o,E,a.done,a.value)})}}function t(l,a,o,E){Promise.resolve(E).then(function(c){l({value:c,done:o})},a)}}function ur(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}function cr(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var r=ht(i),n=0;n<r.length;n++)r[n]!=="default"&&rt(e,i,r[n]);return cn(e,i),e}function dr(i){return i&&i.__esModule?i:{default:i}}function hr(i,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!n:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(i):n?n.value:e.get(i)}function pr(i,e,r,n,t){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!t)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!t:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?t.call(i,r):t?t.value=r:e.set(i,r),r}function gr(i,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof i=="function"?e===i:i.has(e)}function mr(i,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,t;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(t=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");t&&(n=function(){try{t.call(this)}catch(l){return Promise.reject(l)}}),i.stack.push({value:e,dispose:n,async:r})}else r&&i.stack.push({async:!0});return e}function yr(i){function e(l){i.error=i.hasError?new dn(l,i.error,"An error was suppressed during disposal."):l,i.hasError=!0}var r,n=0;function t(){for(;r=i.stack.pop();)try{if(!r.async&&n===1)return n=0,i.stack.push(r),Promise.resolve().then(t);if(r.dispose){var l=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(l).then(t,function(a){return e(a),t()})}else n|=1}catch(a){e(a)}if(n===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return t()}function Er(i,e){return typeof i=="string"&&/^\.\.?\//.test(i)?i.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,t,l,a){return n?e?".jsx":".js":t&&(!l||!a)?r:t+l+"."+a.toLowerCase()+"js"}):i}var dt,et,rt,cn,ht,dn,hn,br=sn(()=>{dt=function(i,e){return dt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])},dt(i,e)};et=function(){return et=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++){r=arguments[n];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e},et.apply(this,arguments)};rt=Object.create?(function(i,e,r,n){n===void 0&&(n=r);var t=Object.getOwnPropertyDescriptor(e,r);(!t||("get"in t?!e.__esModule:t.writable||t.configurable))&&(t={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(i,n,t)}):(function(i,e,r,n){n===void 0&&(n=r),i[n]=e[r]});cn=Object.create?(function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}):function(i,e){i.default=e},ht=function(i){return ht=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},ht(i)};dn=typeof SuppressedError=="function"?SuppressedError:function(i,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=i,n.suppressed=e,n};hn={__extends:qt,__assign:et,__rest:Wt,__decorate:Yt,__param:Kt,__esDecorate:Xt,__runInitializers:Zt,__propKey:Qt,__setFunctionName:jt,__metadata:er,__awaiter:tr,__generator:rr,__createBinding:rt,__exportStar:nr,__values:tt,__read:pt,__spread:ir,__spreadArrays:lr,__spreadArray:ar,__await:Pe,__asyncGenerator:sr,__asyncDelegator:or,__asyncValues:fr,__makeTemplateObject:ur,__importStar:cr,__importDefault:dr,__classPrivateFieldGet:hr,__classPrivateFieldSet:pr,__classPrivateFieldIn:gr,__addDisposableResource:mr,__disposeResources:yr,__rewriteRelativeImportExtension:Er}});var Ar=Oe(gt=>{(function(i){"use strict";var e=typeof process=="object"&&process.env?process.env:self;i.parser=function(f){return new u(f)},i.CParser=u,i.CStream=d,i.createStream=y,i.MAX_BUFFER_LENGTH=64*1024,i.DEBUG=e.CDEBUG==="debug",i.INFO=e.CDEBUG==="debug"||e.CDEBUG==="info",i.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var r={textNode:void 0,numberNode:""},n=i.EVENTS.filter(function(f){return f!=="error"&&f!=="end"}),t=0,l;i.STATE={BEGIN:t++,VALUE:t++,OPEN_OBJECT:t++,CLOSE_OBJECT:t++,OPEN_ARRAY:t++,CLOSE_ARRAY:t++,TEXT_ESCAPE:t++,STRING:t++,BACKSLASH:t++,END:t++,OPEN_KEY:t++,CLOSE_KEY:t++,TRUE:t++,TRUE2:t++,TRUE3:t++,FALSE:t++,FALSE2:t++,FALSE3:t++,FALSE4:t++,NULL:t++,NULL2:t++,NULL3:t++,NUMBER_DECIMAL_POINT:t++,NUMBER_DIGIT:t++};for(var a in i.STATE)i.STATE[i.STATE[a]]=a;t=i.STATE;let o={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(f){function s(){this.__proto__=f}return s.prototype=f,new s}),Object.getPrototypeOf||(Object.getPrototypeOf=function(f){return f.__proto__}),Object.keys||(Object.keys=function(f){var s=[];for(var C in f)f.hasOwnProperty(C)&&s.push(C);return s});function E(f){var s=Math.max(i.MAX_BUFFER_LENGTH,10),C=0;for(var w in r){var O=f[w]===void 0?0:f[w].length;if(O>s)switch(w){case"text":closeText(f);break;default:m(f,"Max buffer length exceeded: "+w)}C=Math.max(C,O)}f.bufferCheckPosition=i.MAX_BUFFER_LENGTH-C+f.position}function c(f){for(var s in r)f[s]=r[s]}var h=/[\\"\n]/g;function u(f){if(!(this instanceof u))return new u(f);var s=this;c(s),s.bufferCheckPosition=i.MAX_BUFFER_LENGTH,s.q=s.c=s.p="",s.opt=f||{},s.closed=s.closedRoot=s.sawRoot=!1,s.tag=s.error=null,s.state=t.BEGIN,s.stack=new Array,s.position=s.column=0,s.line=1,s.slashed=!1,s.unicodeI=0,s.unicodeS=null,s.depth=0,A(s,"onready")}u.prototype={end:function(){S(this)},write:g,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{l=an("stream").Stream}catch{l=function(){}}function y(f){return new d(f)}function d(f){if(!(this instanceof d))return new d(f);this._parser=new u(f),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var s=this;l.apply(s),this._parser.onend=function(){s.emit("end")},this._parser.onerror=function(C){s.emit("error",C),s._parser.error=null},n.forEach(function(C){Object.defineProperty(s,"on"+C,{get:function(){return s._parser["on"+C]},set:function(w){if(!w)return s.removeAllListeners(C),s._parser["on"+C]=w,w;s.on(C,w)},enumerable:!0,configurable:!1})})}d.prototype=Object.create(l.prototype,{constructor:{value:d}}),d.prototype.write=function(f){f=new Buffer(f);for(var s=0;s<f.length;s++){var C=f[s];if(this.bytes_remaining>0){for(var w=0;w<this.bytes_remaining;w++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+w]=f[w];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,s=s+w-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&C>=128)if(C>=194&&C<=223&&(this.bytes_in_sequence=2),C>=224&&C<=239&&(this.bytes_in_sequence=3),C>=240&&C<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+s>f.length){for(var O=0;O<=f.length-1-s;O++)this.temp_buffs[this.bytes_in_sequence][O]=f[s+O];return this.bytes_remaining=s+this.bytes_in_sequence-f.length,!0}else{this.string=f.slice(s,s+this.bytes_in_sequence).toString(),s=s+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var D=s;D<f.length&&!(f[D]>=128);D++);this.string=f.slice(s,D).toString(),this._parser.write(this.string),this.emit("data",this.string),s=D-1}},d.prototype.end=function(f){return f&&f.length&&this._parser.write(f.toString()),this._parser.end(),!0},d.prototype.on=function(f,s){var C=this;return!C._parser["on"+f]&&n.indexOf(f)!==-1&&(C._parser["on"+f]=function(){var w=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);w.splice(0,0,f),C.emit.apply(C,w)}),l.prototype.on.call(C,f,s)},d.prototype.destroy=function(){c(this._parser),this.emit("close")};function A(f,s,C){i.INFO&&console.log("-- emit",s,C),f[s]&&f[s](C)}function b(f,s,C){N(f),A(f,s,C)}function N(f,s){f.textNode=p(f.opt,f.textNode),f.textNode!==void 0&&A(f,s||"onvalue",f.textNode),f.textNode=void 0}function x(f){f.numberNode&&A(f,"onvalue",parseFloat(f.numberNode)),f.numberNode=""}function p(f,s){return s===void 0||(f.trim&&(s=s.trim()),f.normalize&&(s=s.replace(/\s+/g," "))),s}function m(f,s){return N(f),s+=`
Line: `+f.line+`
Column: `+f.column+`
Char: `+f.c,s=new Error(s),f.error=s,A(f,"onerror",s),f}function S(f){return(f.state!==t.VALUE||f.depth!==0)&&m(f,"Unexpected end"),N(f),f.c="",f.closed=!0,A(f,"onend"),u.call(f,f.opt),f}function T(f){return f===o.carriageReturn||f===o.lineFeed||f===o.space||f===o.tab}function g(f){var s=this;if(this.error)throw this.error;if(s.closed)return m(s,"Cannot write after close. Assign an onready handler.");if(f===null)return S(s);var C=0,w=f.charCodeAt(0),O=s.p,D=!1;for(i.DEBUG&&console.log("write -> ["+f+"]");w&&(O=w,s.c=w=f.charCodeAt(C++),O!==w?s.p=O:O=s.p,!!w);)switch(i.DEBUG&&console.log(C,w,i.STATE[s.state]),D?D=!1:(s.position++,w===o.lineFeed?(s.line++,s.column=0):s.column++),s.state){case t.BEGIN:w===o.openBrace?s.state=t.OPEN_OBJECT:w===o.openBracket?s.state=t.OPEN_ARRAY:T(w)||m(s,"Non-whitespace before {[.");continue;case t.OPEN_KEY:case t.OPEN_OBJECT:if(T(w))continue;if(s.state===t.OPEN_KEY)s.stack.push(t.CLOSE_KEY);else if(w===o.closeBrace){A(s,"onopenobject"),this.depth++,A(s,"oncloseobject"),this.depth--,s.state=s.stack.pop()||t.VALUE;continue}else s.stack.push(t.CLOSE_OBJECT);w===o.doubleQuote?s.state=t.STRING:m(s,'Malformed object key should start with "');continue;case t.CLOSE_KEY:case t.CLOSE_OBJECT:if(T(w))continue;var U=s.state===t.CLOSE_KEY?"key":"object";w===o.colon?(s.state===t.CLOSE_OBJECT?(s.stack.push(t.CLOSE_OBJECT),N(s,"onopenobject"),this.depth++):N(s,"onkey"),s.state=t.VALUE):w===o.closeBrace?(b(s,"oncloseobject"),this.depth--,s.state=s.stack.pop()||t.VALUE):w===o.comma?(s.state===t.CLOSE_OBJECT&&s.stack.push(t.CLOSE_OBJECT),N(s),s.state=t.OPEN_KEY):m(s,"Bad object");continue;case t.OPEN_ARRAY:case t.VALUE:if(T(w))continue;if(s.state===t.OPEN_ARRAY)if(A(s,"onopenarray"),this.depth++,s.state=t.VALUE,w===o.closeBracket){A(s,"onclosearray"),this.depth--,s.state=s.stack.pop()||t.VALUE;continue}else s.stack.push(t.CLOSE_ARRAY);w===o.doubleQuote?s.state=t.STRING:w===o.openBrace?s.state=t.OPEN_OBJECT:w===o.openBracket?s.state=t.OPEN_ARRAY:w===o.t?s.state=t.TRUE:w===o.f?s.state=t.FALSE:w===o.n?s.state=t.NULL:w===o.minus?s.numberNode+="-":o._0<=w&&w<=o._9?(s.numberNode+=String.fromCharCode(w),s.state=t.NUMBER_DIGIT):m(s,"Bad value");continue;case t.CLOSE_ARRAY:if(w===o.comma)s.stack.push(t.CLOSE_ARRAY),N(s,"onvalue"),s.state=t.VALUE;else if(w===o.closeBracket)b(s,"onclosearray"),this.depth--,s.state=s.stack.pop()||t.VALUE;else{if(T(w))continue;m(s,"Bad array")}continue;case t.STRING:s.textNode===void 0&&(s.textNode="");var P=C-1,v=s.slashed,H=s.unicodeI;e:for(;;){for(i.DEBUG&&console.log(C,w,i.STATE[s.state],v);H>0;)if(s.unicodeS+=String.fromCharCode(w),w=f.charCodeAt(C++),s.position++,H===4?(s.textNode+=String.fromCharCode(parseInt(s.unicodeS,16)),H=0,P=C-1):H++,!w)break e;if(w===o.doubleQuote&&!v){s.state=s.stack.pop()||t.VALUE,s.textNode+=f.substring(P,C-1),s.position+=C-1-P;break}if(w===o.backslash&&!v&&(v=!0,s.textNode+=f.substring(P,C-1),s.position+=C-1-P,w=f.charCodeAt(C++),s.position++,!w))break;if(v){if(v=!1,w===o.n?s.textNode+=`
`:w===o.r?s.textNode+="\r":w===o.t?s.textNode+="	":w===o.f?s.textNode+="\f":w===o.b?s.textNode+="\b":w===o.u?(H=1,s.unicodeS=""):s.textNode+=String.fromCharCode(w),w=f.charCodeAt(C++),s.position++,P=C-1,w)continue;break}h.lastIndex=C;var k=h.exec(f);if(k===null){C=f.length+1,s.textNode+=f.substring(P,C-1),s.position+=C-1-P;break}if(C=k.index+1,w=f.charCodeAt(k.index),!w){s.textNode+=f.substring(P,C-1),s.position+=C-1-P;break}}s.slashed=v,s.unicodeI=H;continue;case t.TRUE:w===o.r?s.state=t.TRUE2:m(s,"Invalid true started with t"+w);continue;case t.TRUE2:w===o.u?s.state=t.TRUE3:m(s,"Invalid true started with tr"+w);continue;case t.TRUE3:w===o.e?(A(s,"onvalue",!0),s.state=s.stack.pop()||t.VALUE):m(s,"Invalid true started with tru"+w);continue;case t.FALSE:w===o.a?s.state=t.FALSE2:m(s,"Invalid false started with f"+w);continue;case t.FALSE2:w===o.l?s.state=t.FALSE3:m(s,"Invalid false started with fa"+w);continue;case t.FALSE3:w===o.s?s.state=t.FALSE4:m(s,"Invalid false started with fal"+w);continue;case t.FALSE4:w===o.e?(A(s,"onvalue",!1),s.state=s.stack.pop()||t.VALUE):m(s,"Invalid false started with fals"+w);continue;case t.NULL:w===o.u?s.state=t.NULL2:m(s,"Invalid null started with n"+w);continue;case t.NULL2:w===o.l?s.state=t.NULL3:m(s,"Invalid null started with nu"+w);continue;case t.NULL3:w===o.l?(A(s,"onvalue",null),s.state=s.stack.pop()||t.VALUE):m(s,"Invalid null started with nul"+w);continue;case t.NUMBER_DECIMAL_POINT:w===o.period?(s.numberNode+=".",s.state=t.NUMBER_DIGIT):m(s,"Leading zero not followed by .");continue;case t.NUMBER_DIGIT:o._0<=w&&w<=o._9?s.numberNode+=String.fromCharCode(w):w===o.period?(s.numberNode.indexOf(".")!==-1&&m(s,"Invalid number has two dots"),s.numberNode+="."):w===o.e||w===o.E?((s.numberNode.indexOf("e")!==-1||s.numberNode.indexOf("E")!==-1)&&m(s,"Invalid number has two exponential"),s.numberNode+="e"):w===o.plus||w===o.minus?(O===o.e||O===o.E||m(s,"Invalid symbol in number"),s.numberNode+=String.fromCharCode(w)):(x(s),C--,D=!0,s.state=s.stack.pop()||t.VALUE);continue;default:m(s,"Unknown state: "+s.state)}return s.position>=s.bufferCheckPosition&&E(s),s}})(typeof gt>"u"?clarinet={}:gt)});var wr=Oe(Be=>{"use strict";Object.defineProperty(Be,"__esModule",{value:!0});Be.stringify=Be.parse=void 0;var pn=(br(),un(xr)),gn=pn.__importDefault(Ar());function mn(i){let e=yt(),r,n;function t(a){try{let o=e.next(a);o.done&&(r=o.value)}catch(o){n=o}}let l=gn.default.parser();if(l.onopenobject=a=>t({type:"openobject",key:a}),l.onopenarray=()=>t({type:"openarray"}),l.onkey=a=>t({type:"key",key:a}),l.onvalue=a=>t({type:"value",value:a}),l.oncloseobject=()=>t({type:"closeobject"}),l.onclosearray=()=>t({type:"closearray"}),l.onerror=a=>t({type:"error",err:a}),e.next(),l.write(i).close(),n)throw n;return r}Be.parse=mn;function mt(i){return Array.isArray(i)?`[${i.map(mt).join(",")}]`:i instanceof Map?`{${[...i].map(([e,r])=>JSON.stringify(e)+":"+mt(r)).join(",")}}`:JSON.stringify(i)}Be.stringify=mt;var Nr=Symbol();function*yt(){let i=yield;switch(i.type){case"value":return i.value;case"openobject":let e=new Map,r=i.key;for(r===void 0&&(yield);r!==void 0;)e.set(r,yield*yt()),r=(yield).key;return e;case"openarray":let n=[],t;for(;;){if(t=yield*yt(),t===Nr)return n;n.push(t)}case"closearray":return Nr;case"error":throw i.err;default:throw Error(`Unexpected ParseEvent ${i.type}`)}}});var Tr=Oe((Wn,_r)=>{var Sr=wr().parse;_r.exports=class{constructor(e=!1){let r=this;if(this.indentation=4,[!0,!1,void 0].indexOf(e)==-1)throw new Error("@param {Boolean} pedantic");this.pedantic=e}template(e){let r=this;var n=e.raw[0];for(let l=1;l<e.raw.length;l++)typeof arguments[l]=="string"?n+='"'+arguments[l]+'"':n+=arguments[l],n+=e.raw[l];return r._treeToMap(r._damonToTree(n))}damonToMap(e,r=0,n=!1){let t=this,l=t._damonToTree(e,r);return l===!0||l===!1||l===null||typeof l=="string"||typeof l=="number"?l:t._treeToMap(t._damonToTree(e,r),r,n)}damonToJSON(e){let r=this;return r.mapToJSON(r.damonToMap(e))}jsonToDamon(e){let r=this;return r.mapToDamon(r.jsonToMap(e),!1)}jsonToMap(e){var n=this._getLines(e,"JSON");if(n=n.filter(t=>!/^ *\/\//.test(t)),n=n.filter(t=>t!=""),n=n.filter(t=>!/^[ \t]+$/.test(t)),n.length==1){if(["true","false","null"].indexOf(n[0].trim())>-1)return JSON.parse(n[0]);if(/^".*"$/.test(n[0].trim()))try{return JSON.parse(n[0].trim())}catch(t){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),t.line=1,t.language="JSON",t.type="string",t}else if(isFinite(n[0])&&!isNaN(parseFloat(n[0]))&&Number.isFinite(n[0]*1)&&!Number.isNaN(n[0]*1)){if(n[0].indexOf(0)==0&&n[0].length>1&&n[0].indexOf(".")!==1){let t=new Error("Error line number 1: leading 0");throw t.line=1,t.language="DAMON",t}if(n[0].indexOf("_")>-1){let t=new Error("Error line number 1: numeric separator");throw t.line=1,t.language="DAMON",t}try{return JSON.parse(n[0]*1)}catch(t){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),t.line=1,t.language="JSON",t.type="number",t}}else if(n[0]*1===1/0)try{JSON.parse(n[0]*1)}catch(t){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),t.line=1,t.language="JSON",t.type="infinity",t}else return Sr(e)}else return Sr(e)}_getLines(e,r="DAMON",n=0){if(["DAMON","JSON"].indexOf(r)==-1)throw new Error("Bad language argument, expected 'DAMON' or 'JSON'");if(e===""){let a=new Error("Error line "+(n+1)+": empty string");throw a.line=n+1,a.language=r,a}if(/[\s]/.test(e)&&e.match(new RegExp(/[\s]/))[0].length==e.length){let a=new Error("Error line "+(n+1)+": string only contains whitespace");throw a.line=n+1,a.language=r,a}var t=/\r\n/.test(e)?`\r
`:`
`,l=e.split(t);if(t==`
`&&/\\*\n/.test(e)){if(/[^\\]\\(\\\\)*\n/.test(e)){let E=e.split(/[^\\]\\(\\\\)*\n/)[0].split(`
`).length,c=new Error("Error line "+(n+E)+": oddly escaped newline");throw c.line=n+E,c.language=r,c}l=e.split("").reverse().join("").split(/\n/).map(E=>E.split("").reverse().join("")).reverse()}return l}_damonToTree(e,r){let n=this,t=n._getLines(e,"DAMON",r),l=t.slice(0);if(t=t.filter(N=>!/^ *\/\//.test(N)),t=t.filter(N=>N!=""),t=t.filter(N=>!/^[ \t]+$/.test(N)),t.length==1){if(["true","false","null"].indexOf(t[0].trim())>-1)return JSON.parse(t[0]);if(/^".*"$/.test(t[0].trim()))try{return JSON.parse(t[0].trim())}catch(N){throw console.error("Error line number "+(r+1)+": not JSON-compliant, detailed error follows"),N.line=r+1,N.language="JSON",N.type="string",N}else if(isFinite(t[0])&&!isNaN(parseFloat(t[0]))&&Number.isFinite(t[0]*1)&&!Number.isNaN(t[0]*1)){if(t[0].indexOf(0)==0&&t[0].length>1&&t[0].indexOf(".")!==1){let N=new Error("Error line number "+(r+1)+": leading 0");throw N.line=r+1,N.language="DAMON",N}if(t[0].indexOf("_")>-1){let N=new Error("Error line number "+(r+1)+": numeric separator");throw N.line=r+1,N.language="DAMON",N}try{return JSON.parse(t[0]*1)}catch(N){throw console.error("Error line number "+(r+1)+": not JSON-compliant, detailed error follows"),N.line=r+1,N.language="JSON",N.type="number",N}}else if(t[0]*1===1/0)try{JSON.parse(t[0]*1)}catch(N){throw console.error("Error line number "+(r+1)+": not JSON-compliant, detailed error follows"),N.line=r+1,N.language="JSON",N.type="infinity",N}}let a=0,o=[];for(let N=0,x=l.length;N<x;N++)t.slice(a).indexOf(l[N])>-1?o[N]=t.slice(a).indexOf(l[N]):o[N]=null;let E=new RegExp("^(\\t)+");for(let N=0,x=t.length;N<x;N++){if(E.test(t[N])){let p=t[N].match(E)[0].length;for(let m=0,S=p;m<S;m++)t[N]=t[N].replace("	"," ".repeat(n.indentation))}if(!/^ *- $/.test(t[N])&&/[ \t]+$/.test(t[N])){let p=new Error("Error line "+(r+o.indexOf(N)+1)+": trailing whitespace");throw p.line=r+o.indexOf(N)+1,p.language="DAMON",p}}let c=new RegExp("^("+" ".repeat(n.indentation)+")+");if(c.test(t[0])){let N=t[0].match(c)[0].length,x=!0;for(let p=0,m=t.length;p<m;p++)c.test(t[p])&&t[p].match(c)[0].length>=N?t[p]=t[p].slice(N):x=!1;if(!x){let p=new Error("Error line "+(r+1)+": bad formatting");throw p.line=r+1,p.language="DAMON",p}}else if(c.test(t[1])&&t[1].match(c)[0].length>n.indentation){let N=t[1].match(c)[0].length-n.indentation,x=!0;for(let p=1,m=t.length;p<m;p++)c.test(t[p])&&t[p].match(c)[0].length>=N?t[p]=t[p].slice(N):x=!1;if(!x){let p=new Error("Error line "+(r+2)+": bad formatting");throw p.line=r+2,p.language="DAMON",p}}let h=!1;if(t.length>1)for(let N=0,x=t.length;N<x;N++)N!==0&&/^- /.test(t[N])&&(h=!0);if(!/^- \{\}$/.test(t[0])&&!/^- \[\]$/.test(t[0])&&(h=!0),h){for(let N=0,x=t.length;N<x;N++)t[N]=" ".repeat(n.indentation)+t[N];t.unshift("- {}")}var u={content:t[0],level:0,id:0,children:[],headless:h,damonOriginalLinesMapping:o},y=u;if(!/^- /.test(t[0].trimStart())||/^ +/.test(t[0])&&(t[0].match(/^ +/)[0].length%n.indentation!=0||t[0].match(/^ +/)[0].length!=n.indentation)){let N=new Error("Error line "+(r+(h*1+1))+": bad formatting");throw N.line=r+h*1+1,N.language="DAMON",N}t.shift();for(let N=0,x=t.length;N<x;N++){if(!/^- /.test(t[N].trimStart())||/^ +/.test(t[N])&&(t[N].match(/^ +/)[0].length%n.indentation!=0||N==0&&t[N].match(/^ +/)[0].length!=n.indentation||N!=0&&/^- /.test(t[N-1])&&t[N].match(/^ +/)[0].length!=n.indentation||N!=0&&!/^- /.test(t[N-1])&&t[N].match(/^ +/)[0].length>t[N-1].match(/^ +/)[0].length+n.indentation)){let m=new Error("Error line "+(r+o.indexOf(N)+1)+": bad formatting");throw m.line=r+o.indexOf(N)+1,m.language="DAMON",m}let p={content:t[N].trimStart().slice(2),level:1+t[N].match(/^ +/)[0].length/n.indentation,id:"",children:[]};if(y===u)p.id=u.children.length+1,u.children.push(p);else if(y.level===p.level){var d=n._findListItemCommonDirectParent(y,u);d.level==0?p.id=d.children.length+1:p.id=d.id+"-"+(d.children.length+1),d.children.push(p)}else if(y.level>p.level){var A=n._findListItemCommonAncestor(y,u,p.level);A.level==0?p.id=A.children.length+1:p.id=A.id+"-"+(A.children.length+1),A.children.push(p)}else if(y.level<p.level){var b=n._findListItemCommonDirectParent(y,u);let m=b.children.indexOf(y),S=b.children[m].id,T=b.children[m].children.length+1;p.id=S+"-"+T,b.children[m].children.push(p)}y=p}return u}_findListItemCommonDirectParent(e,r){let n=this;if(r.children.indexOf(e)>-1)return r;var t;for(let l=r.children.length-1,a=0;l>=a;l--)if(t=n._findListItemCommonDirectParent(e,r.children[l]),t)return t}_findListItemCommonAncestor(e,r,n){let t=this;var l=t._findListItemCommonDirectParent(e,r);return l.level<n?l:t._findListItemCommonAncestor(l,r,n)}_treeToMap(e,r,n=!1){let t=this;var l=0;if(e.content=="- {}"){let c=new Map;return c.damonOriginalLinesMapping=e.damonOriginalLinesMapping,e.headless&&(c.headless=!0),a(e,c)}else if(e.content=="- []"){let c=[];return c.damonOriginalLinesMapping=e.damonOriginalLinesMapping,a(e,c)}function a(c,h){if(typeof c!="object"||c==null||Array.isArray(c)){let u=e.headless*-1+e.damonOriginalLinesMapping.indexOf(l-1)+2,y=new Error("Error line number "+(r+u)+": @param { {} } tree");throw y.line=r+u,y.language="DAMON",y}if(typeof h=="object"&&h!==null&&!Array.isArray(h)&&h instanceof Map&&h.constructor===Map)o(c,h);else if(Array.isArray(h))E(c,h);else{let u=e.headless*-1+e.damonOriginalLinesMapping.indexOf(l-1)+2,y=new Error("Error line number "+(r+u)+": @param { {} | [] } jsonMap");throw y.line=r+u,y.language="DAMON",y}return h}function o(c,h){for(let u=0,y=c.children.length;u<y;u++)if(l++,c.children[u].content.length==0){let d="";c.children[u].children.length>0?(d="implicit map key",n?h.set(l+"-",new Map):h.set("",new Map),h.implicitMaps===void 0&&(h.implicitMaps=[]),h.implicitMaps.push(""),a(c.children[u],h.get(""))):(d="implicit null key",n?h.set(n+"-",null):h.set("",null),h.implicitNulls===void 0&&(h.implicitNulls=[]),h.implicitNulls.push(""))}else{let d=c.children[u].content,A="key";try{if(/^.*: +\[/.test(d)&&d[d.length-1]=="]")if(/: +\[ *\]$/.test(d)){let b=JSON.parse(`["${d.slice(0,-1*d.match(/: +\[ *\]$/)[0].length)}"]`)[0];n?h.set(l+"-"+b,[]):h.set(b,[]),c.children[u].children.length>0&&(n?a(c.children[u],h.get(l+"-"+b)):a(c.children[u],h.get(b)))}else{let b=new RegExp(/: +\[/g),N=d.slice(0,-1).split(b),x=d.match(b).concat([""]),p=N.map((g,f)=>g+x[f]),m="",S=[];for(let g=0,f=N.length;g<f;g++)try{let s;if(g==0?s=N[0]:s=p.slice(0,g).join("")+N[g],m=JSON.parse(`["${s}"]`)[0],A="list",S=JSON.parse(`[${p.slice(g+1).join("")}]`),Array.isArray(S))break}catch{if(g==f-2){let C=e.headless*-1+e.damonOriginalLinesMapping.indexOf(l-1)+2,w=new Error("Error line number "+(r+C)+": invalid inline list");throw w.line=r+C,w.language="DAMON",w}}if(S.every(function(g){return g===!0||g===!1||g===null||typeof g=="string"?!0:!!(isFinite(g)&&!isNaN(parseFloat(g))&&Number.isFinite(g*1)&&!Number.isNaN(g*1))}))n?h.set(l+"-"+m,S):h.set(m,S),h.damonInlineArrays===void 0&&(h.damonInlineArrays=[]),n?h.damonInlineArrays.push(l+"-"+m):h.damonInlineArrays.push(m);else{let g=+(e.headless*-1)+e.damonOriginalLinesMapping.indexOf(l-1)+2,f=new Error("Error line number "+(r+g)+": no nesting in inline lists");throw f.line=r+g,f.language="DAMON",f}if(c.children[u].children.length>0){let g=e.headless*-1+e.damonOriginalLinesMapping.indexOf(l-1)+3,f=new Error("Error line number "+(r+g)+": inline lists can't have children");throw f.line=r+g,f.language="DAMON",f}}else if(/: +\{ *\}$/.test(d)){let b=JSON.parse(`["${d.slice(0,-1*d.match(/: +\{ *\}$/)[0].length)}"]`)[0];n?(h.set(l+"-"+b,new Map),a(c.children[u],h.get(l+"-"+b))):(h.set(b,new Map),a(c.children[u],h.get(b)))}else{let b=!1;if(/^.*: /.test(d)&&d.split(new RegExp(/: +/))[d.split(new RegExp(/: +/)).length-1]==="true"){let N=d.match(new RegExp(/: +/g))[d.match(new RegExp(/: +/g)).length-1],x=JSON.parse(`["${d.slice(0,-1*N.length-4)}"]`)[0];n?h.set(l+"-"+x,!0):h.set(x,!0)}else if(/^.*: /.test(d)&&d.split(new RegExp(/: +/))[d.split(new RegExp(/: +/)).length-1]==="false"){let N=d.match(new RegExp(/: +/g))[d.match(new RegExp(/: +/g)).length-1],x=JSON.parse(`["${d.slice(0,-1*N.length-5)}"]`)[0];n?h.set(l+"-"+x,!1):h.set(x,!1)}else if(/^.*: /.test(d)&&d.split(new RegExp(/: +/))[d.split(new RegExp(/: +/)).length-1]==="null"){let N=d.match(new RegExp(/: +/g))[d.match(new RegExp(/: +/g)).length-1],x=JSON.parse(`["${d.slice(0,-1*N.length-4)}"]`)[0];n?h.set(l+"-"+x,null):h.set(x,null)}else if(/^.*: +"/.test(d)&&d[d.length-1]=='"'){let N=d.match(new RegExp(/: +"/g));if(N.length==1){let x=JSON.parse(`["${d.split(N[0])[0]}"]`)[0];A="string";let p=JSON.parse(`["${d.split(N[0]).slice(1).join("").slice(0,-1)}"]`)[0];n?h.set(l+"-"+x,p):h.set(x,p)}else if(N.length==2&&/: +"$/.test(d)){let x=JSON.parse(`["${d.split(N[0])[0]}"]`)[0];A="string";let p=JSON.parse(`["${d.split(N[0]).slice(1).join("")+": "}"]`)[0];n?h.set(l+"-"+x,p):h.set(x,p)}else{let x=+(e.headless*-1)+e.damonOriginalLinesMapping.indexOf(l-1)+2,p=new Error("Error line number "+(r+x)+": unescaped double quote");throw p.line=r+x,p.language="DAMON",p}}else if(/^.*: /.test(d)&&isFinite(d.split(": ")[d.split(": ").length-1])&&!isNaN(parseFloat(d.split(": ")[d.split(": ").length-1]))&&Number.isFinite(d.split(": ")[d.split(": ").length-1]*1)&&!Number.isNaN(d.split(": ")[d.split(": ").length-1]*1)){let N=JSON.parse(`["${d.split(": ").slice(0,-1).join(": ")}"]`)[0];A="number";let x=d.match(new RegExp(/: +/g)),p=x[x.length-1],m=d.split(p)[d.split(p).length-1];if(m.indexOf(0)==0&&m.length>1&&m.indexOf(".")!==1){let T=e.headless*-1+e.damonOriginalLinesMapping.indexOf(l-1)+2,g=new Error("Error line number "+(r+T)+": leading 0");throw g.line=r+T,g.language="DAMON",g}if(m.indexOf("_")>-1){let T=e.headless*-1+e.damonOriginalLinesMapping.indexOf(l-1)+2,g=new Error("Error line number "+(r+T)+": Numeric separator");throw g.line=r+T,g.language="DAMON",g}let S=JSON.parse(`[${d.split(": ")[d.split(": ").length-1]*1}]`)[0];n?h.set(l+"-"+N,S):h.set(N,S)}else if(/^.*: /.test(d)&&d.split(new RegExp(/: +/))[d.split(new RegExp(/: +/)).length-1]*1===1/0){let N=JSON.parse(`["${d.split(": ").slice(0,-1).join(": ")}"]`)[0];A="infinity";let x=JSON.parse(`[${d.split(": ")[d.split(": ").length-1]*1}]`)}else{let N=!1,x=0;if(/\[ *\]$/.test(d)&&(N=!0,x=d.match(new RegExp(/\[ *\]$/g))[0].length),/\{ *\}$/.test(d)&&(N=!0,x=d.match(new RegExp(/\{ *\}$/g))[0].length),/true$/.test(d)&&(N=!0,x=4),/false$/.test(d)&&(N=!0,x=5),/null$/.test(d)&&(N=!0,x=4),/".*"$/.test(d)&&(N=!0,x=d.match(new RegExp(/".*"$/g))[0].length),!N){let p="";for(let m=d.length-1;m>-1&&(p=d[m].concat(p),isFinite(p)&&!isNaN(parseFloat(p))&&Number.isFinite(p*1)&&!Number.isNaN(p*1));m--){if(!/[ \t]/.test(d[m]))break;(p.indexOf(0)==0&&p.length>1&&p.indexOf(".")!==1||p.indexOf("_")>-1)&&(N=!0,x=p.length)}}if(N)if(JSON.parse(`["${d.slice(0,-1*x)}"]`)[0],t.pedantic){let p=e.headless*-1+e.damonOriginalLinesMapping.indexOf(l),m=new Error("Error line number "+(r+p)+": missing separator");throw m.line=r+p,m.language="DAMON",m.errorType="pedantic",m}else if(b=!0,c.children[u].children.length>0){A="implicit map key";let p=JSON.parse(`["${d}"]`)[0];n?h.set(l+"-"+p,new Map):h.set(p,new Map),h.implicitMaps===void 0&&(h.implicitMaps=[]),n?(h.implicitMaps.push(l+"-"+p),a(c.children[u],h.get(l+"-"+p))):(h.implicitMaps.push(p),a(c.children[u],h.get(p)))}else{A="implicit null key";let p=JSON.parse(`["${d}"]`)[0];n?h.set(l+"-"+p,null):h.set(p,null),h.implicitNulls===void 0&&(h.implicitNulls=[]),n?h.implicitNulls.push(l+"-"+p):h.implicitNulls.push(p)}else{let p=JSON.parse(`["${d.slice(0,-1*x)}"]`)[0];if(t.pedantic)if(/: +$/.test(p)){let m=e.headless*-1+e.damonOriginalLinesMapping.indexOf(l),S=new Error("Error line number "+(r+m)+": bad value");throw S.line=r+m,S.language="DAMON",S.errorType="pedantic",S}else{let m=e.headless*-1+e.damonOriginalLinesMapping.indexOf(l),S=new Error("Error line number "+(r+m)+": missing separator");throw S.line=r+m,S.language="DAMON",S.errorType="pedantic",S}else if(b=!0,c.children[u].children.length>0){A="implicit map key";let m=JSON.parse(`["${d}"]`)[0];n?h.set(l+"-"+m,new Map):h.set(m,new Map),h.implicitMaps===void 0&&(h.implicitMaps=[]),n?(h.implicitMaps.push(l+"-"+m),a(c.children[u],h.get(l+"-"+m))):(h.implicitMaps.push(m),a(c.children[u],h.get(m)))}else{A="implicit null key";let m=JSON.parse(`["${d}"]`)[0];n?h.set(l+"-"+m,null):h.set(m,null),h.implicitNulls===void 0&&(h.implicitNulls=[]),n?h.implicitNulls.push(l+"-"+m):h.implicitNulls.push(m)}}}if(!b&&c.children[u].children.length>0){let N=e.headless*-1+e.damonOriginalLinesMapping.indexOf(l-1)+3,x=new Error("Error line number "+(r+N)+": missing container or excess indentation");throw x.line=r+N,x.language="DAMON",x}}}catch(b){if(b.language===void 0){let N=e.headless*-1+e.damonOriginalLinesMapping.indexOf(l-1)+2;console.error("Error line number "+(r+N)+": not JSON-compliant, detailed error follows"),b.line=r+N,b.language="JSON",b.type=A}throw b}}}function E(c,h){for(let u=0,y=c.children.length;u<y;u++)if(l++,c.children[u].content.length){let d=c.children[u].content;if(/^[ \t]*\[/.test(d)&&d[d.length-1]=="]")if(/^[ \t]*\[ *\]$/.test(d))h.push([]),a(c.children[u],h[h.length-1]);else{let A;try{A=JSON.parse(d)}catch{let x=e.headless*-1+e.damonOriginalLinesMapping.indexOf(l-1)+2,p=new Error("Error line number "+(r+x)+": invalid inline lists");throw p.line=r+x,p.language="JSON",p.type="list",p}if(A.every(function(N){return N===!0||N===!1||N===null||typeof N=="string"?!0:!!(isFinite(N)&&!isNaN(parseFloat(N))&&Number.isFinite(N*1)&&!Number.isNaN(N*1))}))h.push(A),h.damonInlineArrays===void 0&&(h.damonInlineArrays=[]),h.damonInlineArrays.push(u);else{let N=e.headless*-1+e.damonOriginalLinesMapping.indexOf(l-1)+2,x=new Error("Error line number "+(r+N)+": no nesting in inline lists");throw x.line=r+N,x.language="DAMON",x}if(c.children[u].children.length>0){let N=e.headless*-1+e.damonOriginalLinesMapping.indexOf(l-1)+3,x=new Error("Error line number "+(r+N)+": inline lists can't have children");throw x.line=r+N,x.language="DAMON",x}}else if(/^[ \t]*\{\}$/.test(d))h.push(new Map),a(c.children[u],h[h.length-1]);else if(/^[ \t]*true$/.test(d))h.push(!0);else if(/^[ \t]*false$/.test(d))h.push(!1);else if(/^[ \t]*null$/.test(d))h.push(null);else if(/^[ \t]*".*"$/.test(d))try{h.push(JSON.parse(`[${d.trimStart()}]`)[0])}catch(A){let b=e.headless*-1+e.damonOriginalLinesMapping.indexOf(l-1)+2;throw console.error("Error line number "+(r+b)+": not JSON-compliant, detailed error follows"),A.line=r+b,A.language="JSON",A.type="string",A}else if(isFinite(d)&&!isNaN(parseFloat(d))&&Number.isFinite(d*1)&&!Number.isNaN(d*1)){if(d.indexOf(0)==0&&d.length>1&&d.indexOf(".")!==1){let A=e.headless*-1+e.damonOriginalLinesMapping.indexOf(l-1)+2,b=new Error("Error line number "+(r+A)+": leading 0");throw b.line=r+A,b.language="DAMON",b}if(d.indexOf("_")>-1){let A=e.headless*-1+e.damonOriginalLinesMapping.indexOf(l-1)+2,b=new Error("Error line number "+(r+A)+": leading 0");throw b.line=r+A,b.language="DAMON",b}try{h.push(JSON.parse(`[${d*1}]`)[0])}catch(A){let b=e.headless*-1+e.damonOriginalLinesMapping.indexOf(l-1)+2;throw console.error("Error line number "+(r+b)+": not JSON-compliant, detailed error follows"),A.line=r+b,A.language="JSON",A.type="number",A}}else if(d*1===1/0)try{JSON.parse(d*1)}catch(A){let b=e.headless*-1+e.damonOriginalLinesMapping.indexOf(l-1)+2;throw console.error("Error line number "+(r+b)+": not JSON-compliant, detailed error follows"),A.line=r+b,A.language="JSON",A.type="infinity",A}else{let A=e.headless*-1+e.damonOriginalLinesMapping.indexOf(l-1)+2,b=new Error("Error line number "+(r+A)+": list items can't have a key");throw b.line=r+A,b.language="DAMON",b}}else{let d=e.headless*-1+e.damonOriginalLinesMapping.indexOf(l-1)+2,A=new Error("Error line number "+(r+d)+": empty list node");throw A.line=r+d,A.language="DAMON",A}}}mapToDamon(e,r,n){let t=this;var l="";if(Array.isArray(e))l+=`- []
`;else if(typeof e=="object"&&e!==null&&e instanceof Map&&e.constructor===Map)l+=`- {}
`;else return typeof e=="string"&&(e='"'+e+'"'),JSON.parse(e),e;if(a(e),t.damonToMap(l.slice(0,-1)),e.headless){let o=t._getLines(l);o=o.slice(1);for(let E=0,c=o.length;E<c;E++)o[E]=o[E].slice(4);return o.join(`
`).slice(0,-1)}return l.slice(0,-1);function a(o,E=1){if(typeof o=="object"&&o!==null&&!Array.isArray(o)&&o instanceof Map&&o.constructor===Map){let u=Array.from(o.keys()),y=!1;o.implicitNulls!==void 0&&o.implicitNulls.length===u.length&&(y=!0);for(let[d,A]of o){let b=d;if(n&&(b=b.split("-").slice(1).join("-")),typeof A=="object"&&A!==null)if(Array.isArray(A)){let N=0,x=A.filter(function(p){return p===!0||p===!1?!0:p===null?(N++,!0):typeof p=="string"?!0:!!(isFinite(p)&&!isNaN(parseFloat(p))&&Number.isFinite(p*1)&&!Number.isNaN(p*1))});if(A.length==x.length&&E*4+2+A.join(", ").length+N*4<=80||r&&o.damonInlineArrays!==void 0&&o.damonInlineArrays.indexOf(b)>-1){let p="["+A.map(function(m){return typeof m=="string"&&(m=JSON.stringify(m)),m}).join(", ")+"]";l+="    ".repeat(E)+"- "+JSON.stringify(b).slice(1,-1)+": "+p+`
`}else l+="    ".repeat(E)+"- "+JSON.stringify(b).slice(1,-1)+`: []
`,a(A,E+1)}else l+="    ".repeat(E)+"- "+JSON.stringify(b).slice(1,-1)+`: {}
`,a(A,E+1);else y?l+="    ".repeat(E)+"- "+JSON.stringify(b).slice(1,-1)+`
`:(l+="    ".repeat(E)+"- "+JSON.stringify(b).slice(1,-1)+": ",A===!0?l+=`true
`:A===!1?l+=`false
`:A===null?l+=`null
`:Number.isFinite(A)&&!Number.isNaN(A)?l+=A+`
`:l+=JSON.stringify(A)+`
`)}}else if(Array.isArray(o))for(var c=0,h=o.length;c<h;c++)if(typeof o[c]=="object"&&o[c]!==null)if(Array.isArray(o[c])){let u=0,y=o[c].filter(function(d){return d===!0||d===!1?!0:d===null?(u++,!0):typeof d=="string"?!0:!!(isFinite(d)&&!isNaN(parseFloat(d))&&Number.isFinite(d*1)&&!Number.isNaN(d*1))});if(o[c].length==y.length&&E*4+2+o[c].join(", ").length+u*4<=80||r&&o.damonInlineArrays!==void 0&&o.damonInlineArrays.indexOf(c)>-1){let d="["+o[c].map(function(A){return typeof A=="string"&&(A=JSON.stringify(A)),A}).join(", ")+"]";l+="    ".repeat(E)+"- "+d+`
`}else l+="    ".repeat(E)+`- []
`,a(o[c],E+1)}else l+="    ".repeat(E)+`- {}
`,a(o[c],E+1);else o[c]===!0?l+="    ".repeat(E)+`- true
`:o[c]===!1?l+="    ".repeat(E)+`- false
`:o[c]===null?l+="    ".repeat(E)+`- null
`:Number.isFinite(o[c])&&!Number.isNaN(o[c])?l+="    ".repeat(E)+"- "+o[c]+`
`:l+="    ".repeat(E)+"- "+JSON.stringify(o[c])+`
`}}mapToJSON(e){let r=this;var n="";if(Array.isArray(e))return n+=`[\r
`,t(e),n+="]",JSON.parse(n),n;return typeof e=="object"&&e!==null&&e instanceof Map&&e.constructor===Map?(n+=`{\r
`,t(e),n+="}",JSON.parse(n),n):(typeof e=="string"&&(e=JSON.stringify(e)),JSON.parse(e),e);function t(l,a=1){if(typeof l=="object"&&l!==null&&!Array.isArray(l)&&l instanceof Map&&l.constructor===Map)for(let[c,h]of l)typeof h=="object"&&h!==null?Array.isArray(h)?h.length>0?(n+="    ".repeat(a)+`${JSON.stringify(c)}: [\r
`,t(h,a+1),n+="    ".repeat(a)+"]"):n+="    ".repeat(a)+`${JSON.stringify(c)}: []`:Array.from(h.keys()).length>0?(n+="    ".repeat(a)+`${JSON.stringify(c)}: {\r
`,t(h,a+1),n+="    ".repeat(a)+"}"):n+="    ".repeat(a)+`${JSON.stringify(c)}: {}`:h===!0?n+="    ".repeat(a)+`${JSON.stringify(c)}: true`:h===!1?n+="    ".repeat(a)+`${JSON.stringify(c)}: false`:h===null?n+="    ".repeat(a)+`${JSON.stringify(c)}: null`:Number.isFinite(h)&&!Number.isNaN(h)?n+="    ".repeat(a)+`${JSON.stringify(c)}: `+h:n+="    ".repeat(a)+`${JSON.stringify(c)}: `+JSON.stringify(h),c!=Array.from(l.keys())[Array.from(l.keys()).length-1]?n+=`,\r
`:n+=`\r
`;else if(Array.isArray(l))for(var o=0,E=l.length;o<E;o++)typeof l[o]=="object"&&l[o]!==null?Array.isArray(l[o])?l[o].length>0?(n+="    ".repeat(a)+`[\r
`,t(l[o],a+1),n+="    ".repeat(a)+"]"):n+="    ".repeat(a)+"[]":Array.from(l[o].keys()).length>0?(n+="    ".repeat(a)+`{\r
`,t(l[o],a+1),n+="    ".repeat(a)+"}"):n+="    ".repeat(a)+"{}":l[o]===!0?n+="    ".repeat(a)+"true":l[o]===!1?n+="    ".repeat(a)+"false":l[o]===null?n+="    ".repeat(a)+"null":Number.isFinite(l[o])&&!Number.isNaN(l[o])?n+="    ".repeat(a)+l[o]:n+="    ".repeat(a)+JSON.stringify(l[o]),o!=E-1?n+=`,\r
`:n+=`\r
`}}getPathsList(e){let n=this.damonToMap(e),t=[];return l(n),t;function l(a,o=[]){if(typeof a=="object"&&a!==null&&!Array.isArray(a)&&a instanceof Map&&a.constructor===Map)for(let[E,c]of a)typeof c=="object"&&c!==null&&!Array.isArray(c)&&c instanceof Map&&c.constructor===Map&&Array.from(c.keys()).length?(t.push(o.concat(E)),l(c,o.concat([E]))):Array.isArray(c)&&(a.damonInlineArrays==null||a.damonInlineArrays.indexOf(E)===-1)&&c.length?(t.push(o.concat(E)),l(c,o.concat([E]))):t.push(o.concat(E).concat(c));else for(let E=0,c=a.length;E<c;E++)typeof a[E]=="object"&&a[E]!==null&&!Array.isArray(a[E])&&a[E]instanceof Map&&a[E].constructor===Map&&Array.from(a[E].keys()).length?(t.push(o.concat(E)),l(a[E],o.concat([E]))):Array.isArray(a[E])&&(a.damonInlineArrays==null||a.damonInlineArrays.indexOf(E)===-1)&&a[E].length?(t.push(o.concat(E)),l(a[E],o.concat([E]))):t.push(o.concat(a[E]))}}getRangeFromPath(e,r,n=0,t=!1,l=!1){let a=this,o=a.damonToMap(e,0,l),E=-1,c=!1;A(o,r);let h=a.mapIndexToLine(o,E),u=a._getLines(e)[h],y=0,d=u.length;if(l)for(let b=0,N=r.length;b<N;b++)typeof r[b]=="string"&&(r[b]=r[b].split("-").slice(1).join("-"));if(r.length===1)typeof r[r.length-1]=="string"?y=u.length-u.trimStart().slice(2+r[r.length-1].length+2).trimStart().length:y=u.length-u.trimStart().slice(2).length;else if(typeof r[r.length-2]=="string")if(typeof r[r.length-1]=="string")y=u.length-u.trimStart().slice(2+r[r.length-1].length+2).trimStart().length;else if(t){let b=u.trimStart().slice(2+r[r.length-2].length+2),N=JSON.parse(b),x="^( *\\[ *";for(let T=0,g=r[r.length-1]+1;T<g;T++){let f=""+N[T];typeof N[T]=="string"&&(f='"'+f+'"'),x+=f,T<g-1&&(x+=", *")}x+=")";let p=b.match(new RegExp(x))[1],m=N[r[r.length-1]],S=(""+m).length;typeof m=="string"&&(S+=2),y=u.length-b.length+p.length-S,d=y+S}else y=u.length-u.trimStart().slice(2).length;else if(typeof r[r.length-1]=="string")y=u.length-u.trimStart().slice(2+r[r.length-1].length+2).trimStart().length;else if(t){let b=u.trimStart().slice(2),N=JSON.parse(b),x="^( *\\[ *";for(let T=0,g=r[r.length-1]+1;T<g;T++){let f=""+N[T];typeof N[T]=="string"&&(f='"'+f+'"'),x+=f,T<g-1&&(x+=", *")}x+=")";let p=b.match(new RegExp(x))[1],m=N[r[r.length-1]],S=(""+m).length;typeof m=="string"&&(S+=2),y=u.length-b.length+p.length-S,d=y+S}else y=u.length-u.trimStart().slice(2).length;return[[h+n,y],[h+n,d]];function A(b,N,x=[]){if(E+=1,typeof b=="object"&&b!==null&&!Array.isArray(b)&&b instanceof Map&&b.constructor===Map)for(let[p,m]of b){if(c===!0)return;if(E+=1,JSON.stringify(N)===JSON.stringify(x.concat([p]))){c=!0;return}if(typeof m=="object"&&m!==null&&!Array.isArray(m)&&m instanceof Map&&m.constructor===Map&&Array.from(m.keys()).length)E-=1,A(m,N,x.concat([p]));else if(Array.isArray(m)&&m.length){if(b.damonInlineArrays==null||b.damonInlineArrays.indexOf(p)===-1)E-=1,A(m,N,x.concat([p]));else if(JSON.stringify(N.slice(0,-1))===JSON.stringify(x.concat([p]))){c=!0;return}}}else for(let p=0,m=b.length;p<m;p++){if(c==!0)return;if(E+=1,JSON.stringify(N)===JSON.stringify(x.concat([p]))){c=!0;return}if(typeof b[p]=="object"&&b[p]!==null&&!Array.isArray(b[p])&&b[p]instanceof Map&&b[p].constructor===Map&&Array.from(b[p].keys()).length)E-=1,A(b[p],N,x.concat([p]));else if(Array.isArray(b[p])&&b[p].length){if(b.damonInlineArrays==null||b.damonInlineArrays.indexOf(p)===-1)E-=1,A(b[p],N,x.concat([p]));else if(JSON.stringify(N.slice(0,-1))===JSON.stringify(x.concat([p]))){c=!0;return}}}}}getTokenFromCoordinates(e,r){let n=this,t={},l=n._getLines(e).slice(0,r[0]);if(l[r[0]-1]=="")return t.type="newline",t.path=null,t.range=[r,r],t;if(/^[ \t]+$/.test(l[r[0]-1]))return t.type="indentation",t.path=null,t.range=[[r[0],1],[r[0],l[l.length-1].length]],t;if(/^[ \t]+/.test(l[r[0]-1].slice(0,r[1]-1))&&(t.type="indentation",t.range=[[r[0],1],[r[0],l[r[0]-1].match(/^[ \t]+/)[0].length]]),/^ *\/\//.test(l[r[0]-1]))return t.type=="indentation"?(t.path=null,t):(t.type="comment",t.path=null,t.range=[[[r[0],l[r[0]-1].split("//")[0].length]],[[r[0],l[r[0]-1].length]]],t);if(l.length==1)try{let y=JSON.parse(e);if(y===!0||y===!1||y===null||typeof y=="string"||typeof y=="number"){let d=e.match(/^ */)[0].length,A=e.match(/ *$/)[0].length;return t.type="null",typeof y!="object"&&(t.type=typeof y),t.path=null,t.range=[[0,d],[0,e.length-A]],t}}catch{}let a=n.damonToMap(l.join(`
`)),o=Array.from(a.keys()),E=[],c=[];for(;o.length;){let y=o[o.length-1];if(E.push(y),typeof a=="object"&&a!==null&&!Array.isArray(a)&&a instanceof Map&&a.constructor===Map?(c.push(a),a=a.get(y)):Array.isArray(a)&&(c.push(a),a=a[y]),a===!0||a===!1||a===null||typeof a=="string"||typeof a=="number")break;o=Array.from(a.keys())}t.path=E;let h=[],u=c[c.length-2];if(u&&u.damonInlineArrays.length&&u.damonInlineArrays.indexOf(E[E.length-2])!==-1?h=n.getRangeFromPath(e,E,0,!0):h=n.getRangeFromPath(e,E),typeof E[E.length-1]=="string")if(r[1]<h[0][1]){let y=l[r[0]-1].slice(0,-1*(h[1][1]-h[0][1])-1).length;if(r[1]<y){let d=l[r[0]-1].match(/^[ \t]+/)[0].length+3;r[1]>=d?(t.type="property",t.range=[[r[0],d],[r[0],y]]):(t.type="hyphen",t.range=[[r[0],d-2],[r[0],d-1]])}else t.type="separator",t.range=[[r[0],y+1],[r[0],h[0][1]-1]]}else t.type="?",t.range=h;else if(r[1]<h[0][1]){t.type="hyphen";let y=l[r[0]-1].match(/^[ \t]+/)[0].length+1;t.range=[[r[0],y],[r[0],y+1]]}else t.type="?",t.range=h;return t}mapIndexToLine(e,r){let n=0,t=0;e.headless&&(r-=1);for(let l=0,a=e.damonOriginalLinesMapping.length;l<a;l++)if(e.damonOriginalLinesMapping[l]!==null&&t++,t==r){n=l+1;break}return n}getRangesMap(e,r,n=0,t=!1){let l=this,a=l._getLines(e),o=new Map;return E(r,[],o),o;function E(c,h=[],u,y=!1){if(typeof c=="object"&&c!==null&&!Array.isArray(c)&&c instanceof Map&&c.constructor===Map)for(let[d,A]of c)if(typeof A=="object"&&A!==null&&!Array.isArray(A)&&A instanceof Map&&A.constructor===Map&&Array.from(A.keys()).length){let b=l.getRangeFromPath(e,h.concat(d),n,!1,t),N=a[b[0][0]-n].match("^([ 	]*)")[1].length+2,x=t?d.length-(d.split("-")[0].length+1):d.length,p=[[b[0][0],N],[b[0][0],N+x]],m=JSON.stringify(p);u.set(m,new Map),E(A,h.concat([d]),u.get(m))}else if(Array.isArray(A)&&A.length){let b=[];b=l.getRangeFromPath(e,h.concat(d),n,!1,t);let N=a[b[0][0]-n].match("^([ 	]*)")[1].length+2,x=t?d.length-(d.split("-")[0].length+1):d.length,p=[[b[0][0],N],[b[0][0],N+x]],m=JSON.stringify(p);u.set(m,new Map),c.damonInlineArrays!==void 0&&c.damonInlineArrays.indexOf(d)>-1?E(A,h.concat([d]),u.get(m),!0):E(A,h.concat([d]),u.get(m))}else if(y){let b=l.getRangeFromPath(e,h.concat(d),n,!1),N=a[b[0][0]-n].match("^([ 	]*)")[1].length+2,x=t?d.length-(d.split("-")[0].length+1):d.length,p=[[b[0][0],N],[b[0][0],N+x]],m=JSON.stringify(p);u.set(m,JSON.stringify(l.getRangeFromPath(e,h.concat(d),n,!1,t)))}else{let b=l.getRangeFromPath(e,h.concat(d),n,!1,t),N=a[b[0][0]-n].match("^([ 	]*)")[1].length+2,x=t?d.length-(d.split("-")[0].length+1):d.length,p=[[b[0][0],N],[b[0][0],N+x]],m=JSON.stringify(p);u.set(m,JSON.stringify(l.getRangeFromPath(e,h.concat(d),n,!1,t)))}else for(let d=0,A=c.length;d<A;d++)if(typeof c[d]=="object"&&c[d]!==null&&!Array.isArray(c[d])&&c[d]instanceof Map&&c[d].constructor===Map&&Array.from(c[d].keys()).length){let b=JSON.stringify(l.getRangeFromPath(e,h.concat(d),n,!1,t));u.set(b,new Map),E(c[d],h.concat([d]),u.get(b))}else if(Array.isArray(c[d])&&c[d].length){let b="";b=JSON.stringify(l.getRangeFromPath(e,h.concat(d),n,!1,t)),u.set(b,new Map),c.damonInlineArrays!==void 0&&c.damonInlineArrays.indexOf(d)>-1?E(c[d],h.concat([d]),u.get(b),!0):E(c[d],h.concat([d]),u.get(b))}else if(y){let b=JSON.stringify(l.getRangeFromPath(e,h.concat(d),n,!0,t));u.set(b,JSON.stringify(l.getRangeFromPath(e,h.concat(d),n,!0,t)))}else{let b=JSON.stringify(l.getRangeFromPath(e,h.concat(d),n,!1,t));u.set(b,JSON.stringify(l.getRangeFromPath(e,h.concat(d),n,!1,t)))}}}}});var Et=Oe((Kn,Cr)=>{Cr.exports=class{constructor(e){let r=this;this.parent=e,this.itemHeight=parseFloat(getComputedStyle(this.parent.editor).getPropertyValue("--fontSize"))*parseFloat(getComputedStyle(this.parent.editor).getPropertyValue("--lineHeight")),this.viewportHeight=this.parent.editor.getBoundingClientRect().height,this.viewable=Math.ceil(r.viewportHeight/r.itemHeight),this.maxCounter=this.parent.textarea.value.split(`
`).length,this.buffer=r.viewable*2,this.visibleNodesCount=r.viewable+r.buffer,this.lastScrollTop=void 0,this.lastStart=void 0,this.active=!1}inputHandler(e){let r=this;r.parent.textarea.value.split(`
`).length<=r.visibleNodesCount?(r.parent.gutter.innerHTML="",r.init(0)):(r.parent.gutter.innerHTML="",r.init(r.getStartNode(r.parent.textarea.value.split(`
`).length)))}scrollHandler(){let e=this;e.maxCounter<e.visibleNodesCount?e.lastScrollTop!==e.parent.editor.scrollTop?(e.parent.editor.style.setProperty("--scrollbarPadding","0px"),e.init(0)):(e.parent.editor.style.setProperty("--scrollbarPadding","0px"),e.parent.gutter.style.transform="translate("+e.parent.editor.scrollLeft+"px, "+0*e.itemHeight+"px)",e.parent.overlay.firstElementChild.style.transform="translate(0px, "+0*e.itemHeight+"px)"):e.lastScrollTop!==e.parent.editor.scrollTop?(e.active=!0,e.parent.editor.style.setProperty("--scrollbarPadding","var(--textareaPadding) * 4"),e.update(e.getStartNode(e.maxCounter))):(e.parent.gutter.style.transform="translate("+e.parent.editor.scrollLeft+"px, "+e.getStartNode(e.maxCounter)*e.itemHeight+"px)",e.parent.overlay.firstElementChild.style.transform="translate(0px, "+e.getStartNode(e.maxCounter)*e.itemHeight+"px)")}init(e){let r=this;r.parent.textarea.style.height=(r.parent.textarea.value.split(`
`).length+1)*r.itemHeight+"px",r.resetProperties(),e>r.maxCounter-r.visibleNodesCount&&(r.maxCounter-r.visibleNodesCount>0?e=r.maxCounter-r.visibleNodesCount:e=0);let n=Math.max(1,Math.min(r.maxCounter-e,r.visibleNodesCount));if(r.parent.gutter.innerHTML==="")for(let E=e;E<e+n;E++){let c=document.createElement("div"),h=document.createElement("span"),u=(r.maxCounter+"").length,y=(E+1+"").length,d=u-y;h.textContent=" ".repeat(d)+(E+1),c.appendChild(h),r.parent.gutter.appendChild(c)}else{let E=0;for(let c=e;c<e+n;c++){let h=document.createElement("div"),u=document.createElement("span"),y=(r.maxCounter+"").length,d=(c+1+"").length,A=y-d;u.textContent=" ".repeat(A)+(c+1),h.appendChild(u),h.outerHTML!==r.parent.gutter.children[E].outerHTML&&r.parent.gutter.children[E].replaceWith(h),E++}}r.parent.gutter.style.transform="translate("+r.parent.editor.scrollLeft+"px, "+e*r.itemHeight+"px)",r.parent.overlay.firstElementChild.style.transform="translate(0px, "+e*r.itemHeight+"px)",r.lastStart=e,r.lastScrollTop=r.parent.editor.scrollTop,r.maxCounter>=r.visibleNodesCount&&(r.active=!0),r.setGutterWidth(),r.parent.updateCurrentLine(!0);let t=r.parent.textarea.value.split(`
`);r.parent.textarea.rows=t.length+1,r.parent.textarea.cols=t.map(E=>E.length).reduce(function(E,c){return Math.max(E,c)});let l=r.parent.textarea.value.replaceAll(/&amp;/g,"&").replaceAll(/&lt;/g,"<").replaceAll(/&gt;/g,">"),a=[`<span class="token lf">
</span>`],o=r.parent.lastTextareaValue.split(`
`);l!=""&&(a=r.parent.prism.highlight(l+`
`,r.parent.prism.languages.damon,"damon").replace(/<span>\n<\/span>$/,"").split(`
`).map(E=>E.replace(/^<\/span>/,"")+`
</span>`));for(let E=e,c=e+n;E<c;E++){let h=document.createElement("span"),u=0;h.classList.add("space-line"),h.innerHTML=a[E];for(let y=0,d=h.childNodes.length;y<d;y++)if(h.childNodes[y].tagName&&h.childNodes[y].textContent==" ")u++,u==4&&(u=0,h.children[y-3].classList.add("indent-guide"));else{u=0;break}(!r.parent.initialized||o[E]==null||o[E]!=t[E]||r.parent.overlay.firstElementChild.children[E-e]!=null&&h.innerHTML!=r.parent.overlay.firstElementChild.children[E-e].innerHTML)&&(o[E]==null||!r.parent.initialized?(r.parent.overlay.firstElementChild.appendChild(h),r.parent.overlay.firstElementChild.children.length>n+1&&r.parent.overlay.firstElementChild.firstElementChild.remove()):r.parent.overlay.firstElementChild.replaceChild(h,r.parent.overlay.firstElementChild.children[E-e]))}if(r.parent.overlay.firstElementChild.children.length>n)for(let E=n,c=r.parent.overlay.firstElementChild.children.length;E<c;E++)r.parent.overlay.firstElementChild.lastElementChild.remove()}getStartNode(e){let r=this,n=Math.floor(r.parent.editor.scrollTop/r.itemHeight)-r.viewable;return n=Math.min(Math.max(0,n),Math.max(0,e-r.buffer)),n}resetProperties(){let e=this;e.viewportHeight=e.parent.editor.getBoundingClientRect().height,e.viewable=Math.ceil(e.viewportHeight/e.itemHeight),e.maxCounter=e.parent.textarea.value.split(`
`).length,e.buffer=e.viewable*2,e.visibleNodesCount=e.viewable+e.buffer,e.active=!1}update(e){let r=this;requestAnimationFrame((function(){if(r.resetProperties(),r.parent.gutter.firstElementChild)if(r.lastScrollTop!=r.parent.editor.scrollTop)e>r.maxCounter-r.visibleNodesCount&&(r.maxCounter-r.visibleNodesCount>0?e=r.maxCounter-r.visibleNodesCount:e=0),r.diffItems(e,r.visibleNodesCount),r.parent.gutter.style.transform="translate("+r.parent.editor.scrollLeft+"px, "+e*r.itemHeight+"px)",r.parent.overlay.firstElementChild.style.transform="translate(0px, "+e*r.itemHeight+"px)",r.lastScrollTop=r.parent.editor.scrollTop;else if(/^translate\(.+px, .+px\)$/.test(r.parent.gutter.style.transform))r.parent.gutter.style.transform="translate("+r.parent.editor.scrollLeft+"px, "+r.parent.gutter.style.transform.split(", ")[1];else throw new Error("You need to update this regex.");r.setGutterWidth(),r.parent.updateCurrentLine(!0)}))}diffItems(e,r){let n=this;if(n.lastStart!=e){if(n.lastStart<e){let t=Math.min(r,Math.abs(e-n.lastStart));for(let c=0,h=t;c<h;c++)n.parent.gutter.firstElementChild.remove();for(let c=e+r-t;c<e+r;c++){let h=document.createElement("div"),u=document.createElement("span"),y=(n.maxCounter+"").length,d=(c+1+"").length,A=y-d;u.textContent=" ".repeat(A)+(c+1),h.appendChild(u),n.parent.gutter.appendChild(h)}let l=n.parent.textarea.value.split(`
`);n.parent.textarea.rows=l.length+1,n.parent.textarea.cols=l.map(c=>c.length).reduce(function(c,h){return Math.max(c,h)});let a=n.parent.textarea.value.replaceAll(/&amp;/g,"&").replaceAll(/&lt;/g,"<").replaceAll(/&gt;/g,">"),o=n.parent.prism.highlight(a+`
`,n.parent.prism.languages.damon,"damon").replace(/<span>\n<\/span>$/,"").split(`
`).map(c=>c.replace(/^<\/span>/,"")+`
</span>`),E=n.parent.lastTextareaValue.split(`
`);for(let c=0,h=t;c<h;c++)n.parent.overlay.firstElementChild.firstElementChild.remove();for(let c=e+r-t;c<e+r;c++){let h=document.createElement("span"),u=0;h.classList.add("space-line"),h.innerHTML=o[c];for(let y=0,d=h.childNodes.length;y<d;y++)if(h.childNodes[y].tagName&&h.childNodes[y].textContent==" ")u++,u==4&&(u=0,h.children[y-3].classList.add("indent-guide"));else{u=0;break}n.parent.overlay.firstElementChild.appendChild(h)}}else{let t=Math.min(r,Math.abs(n.lastStart-e));for(let u=0,y=t;u<y;u++)n.parent.gutter.lastElementChild.remove();let l=document.createDocumentFragment();for(let u=e;u<e+t;u++){let y=document.createElement("div"),d=document.createElement("span"),A=(n.maxCounter+"").length,b=(u+1+"").length,N=A-b;d.textContent=" ".repeat(N)+(u+1),y.appendChild(d),l.appendChild(y)}n.parent.gutter.insertBefore(l,n.parent.gutter.firstElementChild);let a=n.parent.textarea.value.split(`
`);n.parent.textarea.rows=a.length+1,n.parent.textarea.cols=a.map(u=>u.length).reduce(function(u,y){return Math.max(u,y)});let o=n.parent.textarea.value.replaceAll(/&amp;/g,"&").replaceAll(/&lt;/g,"<").replaceAll(/&gt;/g,">"),E=n.parent.prism.highlight(o+`
`,n.parent.prism.languages.damon,"damon").replace(/<span>\n<\/span>$/,"").split(`
`).map(u=>u.replace(/^<\/span>/,"")+`
</span>`),c=n.parent.lastTextareaValue.split(`
`);for(let u=0,y=t;u<y;u++)n.parent.overlay.firstElementChild.lastElementChild.remove();let h=document.createDocumentFragment();for(let u=e;u<e+t;u++){let y=document.createElement("span"),d=0;y.classList.add("space-line"),y.innerHTML=E[u];for(let A=0,b=y.childNodes.length;A<b;A++)if(y.childNodes[A].tagName&&y.childNodes[A].textContent==" ")d++,d==4&&(d=0,y.children[A-3].classList.add("indent-guide"));else{d=0;break}h.appendChild(y)}n.parent.overlay.firstElementChild.insertBefore(h,n.parent.overlay.firstElementChild.firstElementChild)}n.lastStart=e}}setGutterWidth(){let e=this,r=e.parent.gutter.children[0].children[0].getBoundingClientRect().width,n=parseFloat(getComputedStyle(e.parent.editor).getPropertyValue("--gutterWidth"));r>n?(e.parent.gutter.style.width=r+"px",e.parent.container.style.left=r+"px"):(e.parent.gutter.style.width="",e.parent.container.style.left="")}}});var Br=Oe((Xn,Pr)=>{"use strict";var{entries:Hr,setPrototypeOf:Or,isFrozen:yn,getPrototypeOf:En,getOwnPropertyDescriptor:xn}=Object,{freeze:Ee,seal:we,create:_t}=Object,{apply:Tt,construct:Ct}=typeof Reflect<"u"&&Reflect;Ee||(Ee=function(e){return e});we||(we=function(e){return e});Tt||(Tt=function(e,r){for(var n=arguments.length,t=new Array(n>2?n-2:0),l=2;l<n;l++)t[l-2]=arguments[l];return e.apply(r,t)});Ct||(Ct=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),t=1;t<r;t++)n[t-1]=arguments[t];return new e(...n)});var nt=xe(Array.prototype.forEach),bn=xe(Array.prototype.lastIndexOf),Lr=xe(Array.prototype.pop),Ve=xe(Array.prototype.push),An=xe(Array.prototype.splice),lt=xe(String.prototype.toLowerCase),xt=xe(String.prototype.toString),bt=xe(String.prototype.match),qe=xe(String.prototype.replace),Nn=xe(String.prototype.indexOf),wn=xe(String.prototype.trim),_e=xe(Object.prototype.hasOwnProperty),ye=xe(RegExp.prototype.test),We=Sn(TypeError);function xe(i){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var r=arguments.length,n=new Array(r>1?r-1:0),t=1;t<r;t++)n[t-1]=arguments[t];return Tt(i,e,n)}}function Sn(i){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Ct(i,r)}}function q(i,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:lt;Or&&Or(i,null);let n=e.length;for(;n--;){let t=e[n];if(typeof t=="string"){let l=r(t);l!==t&&(yn(e)||(e[n]=l),t=l)}i[t]=!0}return i}function _n(i){for(let e=0;e<i.length;e++)_e(i,e)||(i[e]=null);return i}function Ie(i){let e=_t(null);for(let[r,n]of Hr(i))_e(i,r)&&(Array.isArray(n)?e[r]=_n(n):n&&typeof n=="object"&&n.constructor===Object?e[r]=Ie(n):e[r]=n);return e}function Ye(i,e){for(;i!==null;){let n=xn(i,e);if(n){if(n.get)return xe(n.get);if(typeof n.value=="function")return xe(n.value)}i=En(i)}function r(){return null}return r}var vr=Ee(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),At=Ee(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Nt=Ee(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Tn=Ee(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),wt=Ee(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Cn=Ee(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Rr=Ee(["#text"]),kr=Ee(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),St=Ee(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Dr=Ee(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),it=Ee(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),On=we(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Ln=we(/<%[\w\W]*|[\w\W]*%>/gm),vn=we(/\$\{[\w\W]*/gm),Rn=we(/^data-[\-\w.\u00B7-\uFFFF]+$/),kn=we(/^aria-[\-\w]+$/),Fr=we(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Dn=we(/^(?:\w+script|data):/i),In=we(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Mr=we(/^html$/i),$n=we(/^[a-z][.\w]*(-[.\w]+)+$/i),Ir=Object.freeze({__proto__:null,ARIA_ATTR:kn,ATTR_WHITESPACE:In,CUSTOM_ELEMENT:$n,DATA_ATTR:Rn,DOCTYPE_NAME:Mr,ERB_EXPR:Ln,IS_ALLOWED_URI:Fr,IS_SCRIPT_OR_DATA:Dn,MUSTACHE_EXPR:On,TMPLIT_EXPR:vn}),Ke={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},Hn=function(){return typeof window>"u"?null:window},Fn=function(e,r){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null,t="data-tt-policy-suffix";r&&r.hasAttribute(t)&&(n=r.getAttribute(t));let l="dompurify"+(n?"#"+n:"");try{return e.createPolicy(l,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+l+" could not be created."),null}},$r=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Ur(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Hn(),e=F=>Ur(F);if(e.version="3.3.0",e.removed=[],!i||!i.document||i.document.nodeType!==Ke.document||!i.Element)return e.isSupported=!1,e;let{document:r}=i,n=r,t=n.currentScript,{DocumentFragment:l,HTMLTemplateElement:a,Node:o,Element:E,NodeFilter:c,NamedNodeMap:h=i.NamedNodeMap||i.MozNamedAttrMap,HTMLFormElement:u,DOMParser:y,trustedTypes:d}=i,A=E.prototype,b=Ye(A,"cloneNode"),N=Ye(A,"remove"),x=Ye(A,"nextSibling"),p=Ye(A,"childNodes"),m=Ye(A,"parentNode");if(typeof a=="function"){let F=r.createElement("template");F.content&&F.content.ownerDocument&&(r=F.content.ownerDocument)}let S,T="",{implementation:g,createNodeIterator:f,createDocumentFragment:s,getElementsByTagName:C}=r,{importNode:w}=n,O=$r();e.isSupported=typeof Hr=="function"&&typeof m=="function"&&g&&g.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:D,ERB_EXPR:U,TMPLIT_EXPR:P,DATA_ATTR:v,ARIA_ATTR:H,IS_SCRIPT_OR_DATA:k,ATTR_WHITESPACE:B,CUSTOM_ELEMENT:$}=Ir,{IS_ALLOWED_URI:M}=Ir,R=null,le=q({},[...vr,...At,...Nt,...wt,...Rr]),V=null,oe=q({},[...kr,...St,...Dr,...it]),K=Object.seal(_t(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),z=null,W=null,Q=Object.seal(_t(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}})),G=!0,j=!0,se=!1,te=!0,Y=!1,J=!0,ne=!1,X=!1,ee=!1,re=!1,Se=!1,me=!1,$e=!0,ce=!1,Ne="user-content-",ae=!0,fe=!1,pe={},Te=null,Je=q({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Le=null,Ae=q({},["audio","video","img","source","image","track"]),ve=null,ze=q({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Xe="http://www.w3.org/1998/Math/MathML",Ze="http://www.w3.org/2000/svg",Re="http://www.w3.org/1999/xhtml",Fe=Re,at=!1,st=null,Kr=q({},[Xe,Ze,Re],xt),Qe=q({},["mi","mo","mn","ms","mtext"]),je=q({},["annotation-xml"]),Xr=q({},["title","style","font","a","script"]),Ge=null,Zr=["application/xhtml+xml","text/html"],Qr="text/html",de=null,Me=null,jr=r.createElement("form"),kt=function(_){return _ instanceof RegExp||_ instanceof Function},ot=function(){let _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Me&&Me===_)){if((!_||typeof _!="object")&&(_={}),_=Ie(_),Ge=Zr.indexOf(_.PARSER_MEDIA_TYPE)===-1?Qr:_.PARSER_MEDIA_TYPE,de=Ge==="application/xhtml+xml"?xt:lt,R=_e(_,"ALLOWED_TAGS")?q({},_.ALLOWED_TAGS,de):le,V=_e(_,"ALLOWED_ATTR")?q({},_.ALLOWED_ATTR,de):oe,st=_e(_,"ALLOWED_NAMESPACES")?q({},_.ALLOWED_NAMESPACES,xt):Kr,ve=_e(_,"ADD_URI_SAFE_ATTR")?q(Ie(ze),_.ADD_URI_SAFE_ATTR,de):ze,Le=_e(_,"ADD_DATA_URI_TAGS")?q(Ie(Ae),_.ADD_DATA_URI_TAGS,de):Ae,Te=_e(_,"FORBID_CONTENTS")?q({},_.FORBID_CONTENTS,de):Je,z=_e(_,"FORBID_TAGS")?q({},_.FORBID_TAGS,de):Ie({}),W=_e(_,"FORBID_ATTR")?q({},_.FORBID_ATTR,de):Ie({}),pe=_e(_,"USE_PROFILES")?_.USE_PROFILES:!1,G=_.ALLOW_ARIA_ATTR!==!1,j=_.ALLOW_DATA_ATTR!==!1,se=_.ALLOW_UNKNOWN_PROTOCOLS||!1,te=_.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Y=_.SAFE_FOR_TEMPLATES||!1,J=_.SAFE_FOR_XML!==!1,ne=_.WHOLE_DOCUMENT||!1,re=_.RETURN_DOM||!1,Se=_.RETURN_DOM_FRAGMENT||!1,me=_.RETURN_TRUSTED_TYPE||!1,ee=_.FORCE_BODY||!1,$e=_.SANITIZE_DOM!==!1,ce=_.SANITIZE_NAMED_PROPS||!1,ae=_.KEEP_CONTENT!==!1,fe=_.IN_PLACE||!1,M=_.ALLOWED_URI_REGEXP||Fr,Fe=_.NAMESPACE||Re,Qe=_.MATHML_TEXT_INTEGRATION_POINTS||Qe,je=_.HTML_INTEGRATION_POINTS||je,K=_.CUSTOM_ELEMENT_HANDLING||{},_.CUSTOM_ELEMENT_HANDLING&&kt(_.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(K.tagNameCheck=_.CUSTOM_ELEMENT_HANDLING.tagNameCheck),_.CUSTOM_ELEMENT_HANDLING&&kt(_.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(K.attributeNameCheck=_.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),_.CUSTOM_ELEMENT_HANDLING&&typeof _.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(K.allowCustomizedBuiltInElements=_.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Y&&(j=!1),Se&&(re=!0),pe&&(R=q({},Rr),V=[],pe.html===!0&&(q(R,vr),q(V,kr)),pe.svg===!0&&(q(R,At),q(V,St),q(V,it)),pe.svgFilters===!0&&(q(R,Nt),q(V,St),q(V,it)),pe.mathMl===!0&&(q(R,wt),q(V,Dr),q(V,it))),_.ADD_TAGS&&(typeof _.ADD_TAGS=="function"?Q.tagCheck=_.ADD_TAGS:(R===le&&(R=Ie(R)),q(R,_.ADD_TAGS,de))),_.ADD_ATTR&&(typeof _.ADD_ATTR=="function"?Q.attributeCheck=_.ADD_ATTR:(V===oe&&(V=Ie(V)),q(V,_.ADD_ATTR,de))),_.ADD_URI_SAFE_ATTR&&q(ve,_.ADD_URI_SAFE_ATTR,de),_.FORBID_CONTENTS&&(Te===Je&&(Te=Ie(Te)),q(Te,_.FORBID_CONTENTS,de)),ae&&(R["#text"]=!0),ne&&q(R,["html","head","body"]),R.table&&(q(R,["tbody"]),delete z.tbody),_.TRUSTED_TYPES_POLICY){if(typeof _.TRUSTED_TYPES_POLICY.createHTML!="function")throw We('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof _.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw We('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');S=_.TRUSTED_TYPES_POLICY,T=S.createHTML("")}else S===void 0&&(S=Fn(d,t)),S!==null&&typeof T=="string"&&(T=S.createHTML(""));Ee&&Ee(_),Me=_}},Dt=q({},[...At,...Nt,...Tn]),It=q({},[...wt,...Cn]),en=function(_){let L=m(_);(!L||!L.tagName)&&(L={namespaceURI:Fe,tagName:"template"});let I=lt(_.tagName),ie=lt(L.tagName);return st[_.namespaceURI]?_.namespaceURI===Ze?L.namespaceURI===Re?I==="svg":L.namespaceURI===Xe?I==="svg"&&(ie==="annotation-xml"||Qe[ie]):!!Dt[I]:_.namespaceURI===Xe?L.namespaceURI===Re?I==="math":L.namespaceURI===Ze?I==="math"&&je[ie]:!!It[I]:_.namespaceURI===Re?L.namespaceURI===Ze&&!je[ie]||L.namespaceURI===Xe&&!Qe[ie]?!1:!It[I]&&(Xr[I]||!Dt[I]):!!(Ge==="application/xhtml+xml"&&st[_.namespaceURI]):!1},Ce=function(_){Ve(e.removed,{element:_});try{m(_).removeChild(_)}catch{N(_)}},He=function(_,L){try{Ve(e.removed,{attribute:L.getAttributeNode(_),from:L})}catch{Ve(e.removed,{attribute:null,from:L})}if(L.removeAttribute(_),_==="is")if(re||Se)try{Ce(L)}catch{}else try{L.setAttribute(_,"")}catch{}},$t=function(_){let L=null,I=null;if(ee)_="<remove></remove>"+_;else{let ue=bt(_,/^[\r\n\t ]+/);I=ue&&ue[0]}Ge==="application/xhtml+xml"&&Fe===Re&&(_='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+_+"</body></html>");let ie=S?S.createHTML(_):_;if(Fe===Re)try{L=new y().parseFromString(ie,Ge)}catch{}if(!L||!L.documentElement){L=g.createDocument(Fe,"template",null);try{L.documentElement.innerHTML=at?T:ie}catch{}}let ge=L.body||L.documentElement;return _&&I&&ge.insertBefore(r.createTextNode(I),ge.childNodes[0]||null),Fe===Re?C.call(L,ne?"html":"body")[0]:ne?L.documentElement:ge},Ht=function(_){return f.call(_.ownerDocument||_,_,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},ft=function(_){return _ instanceof u&&(typeof _.nodeName!="string"||typeof _.textContent!="string"||typeof _.removeChild!="function"||!(_.attributes instanceof h)||typeof _.removeAttribute!="function"||typeof _.setAttribute!="function"||typeof _.namespaceURI!="string"||typeof _.insertBefore!="function"||typeof _.hasChildNodes!="function")},Ft=function(_){return typeof o=="function"&&_ instanceof o};function ke(F,_,L){nt(F,I=>{I.call(e,_,L,Me)})}let Mt=function(_){let L=null;if(ke(O.beforeSanitizeElements,_,null),ft(_))return Ce(_),!0;let I=de(_.nodeName);if(ke(O.uponSanitizeElement,_,{tagName:I,allowedTags:R}),J&&_.hasChildNodes()&&!Ft(_.firstElementChild)&&ye(/<[/\w!]/g,_.innerHTML)&&ye(/<[/\w!]/g,_.textContent)||_.nodeType===Ke.progressingInstruction||J&&_.nodeType===Ke.comment&&ye(/<[/\w]/g,_.data))return Ce(_),!0;if(!(Q.tagCheck instanceof Function&&Q.tagCheck(I))&&(!R[I]||z[I])){if(!z[I]&&Pt(I)&&(K.tagNameCheck instanceof RegExp&&ye(K.tagNameCheck,I)||K.tagNameCheck instanceof Function&&K.tagNameCheck(I)))return!1;if(ae&&!Te[I]){let ie=m(_)||_.parentNode,ge=p(_)||_.childNodes;if(ge&&ie){let ue=ge.length;for(let be=ue-1;be>=0;--be){let De=b(ge[be],!0);De.__removalCount=(_.__removalCount||0)+1,ie.insertBefore(De,x(_))}}}return Ce(_),!0}return _ instanceof E&&!en(_)||(I==="noscript"||I==="noembed"||I==="noframes")&&ye(/<\/no(script|embed|frames)/i,_.innerHTML)?(Ce(_),!0):(Y&&_.nodeType===Ke.text&&(L=_.textContent,nt([D,U,P],ie=>{L=qe(L,ie," ")}),_.textContent!==L&&(Ve(e.removed,{element:_.cloneNode()}),_.textContent=L)),ke(O.afterSanitizeElements,_,null),!1)},Ut=function(_,L,I){if($e&&(L==="id"||L==="name")&&(I in r||I in jr))return!1;if(!(j&&!W[L]&&ye(v,L))){if(!(G&&ye(H,L))){if(!(Q.attributeCheck instanceof Function&&Q.attributeCheck(L,_))){if(!V[L]||W[L]){if(!(Pt(_)&&(K.tagNameCheck instanceof RegExp&&ye(K.tagNameCheck,_)||K.tagNameCheck instanceof Function&&K.tagNameCheck(_))&&(K.attributeNameCheck instanceof RegExp&&ye(K.attributeNameCheck,L)||K.attributeNameCheck instanceof Function&&K.attributeNameCheck(L,_))||L==="is"&&K.allowCustomizedBuiltInElements&&(K.tagNameCheck instanceof RegExp&&ye(K.tagNameCheck,I)||K.tagNameCheck instanceof Function&&K.tagNameCheck(I))))return!1}else if(!ve[L]){if(!ye(M,qe(I,B,""))){if(!((L==="src"||L==="xlink:href"||L==="href")&&_!=="script"&&Nn(I,"data:")===0&&Le[_])){if(!(se&&!ye(k,qe(I,B,"")))){if(I)return!1}}}}}}}return!0},Pt=function(_){return _!=="annotation-xml"&&bt(_,$)},Bt=function(_){ke(O.beforeSanitizeAttributes,_,null);let{attributes:L}=_;if(!L||ft(_))return;let I={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:V,forceKeepAttr:void 0},ie=L.length;for(;ie--;){let ge=L[ie],{name:ue,namespaceURI:be,value:De}=ge,Ue=de(ue),ut=De,he=ue==="value"?ut:wn(ut);if(I.attrName=Ue,I.attrValue=he,I.keepAttr=!0,I.forceKeepAttr=void 0,ke(O.uponSanitizeAttribute,_,I),he=I.attrValue,ce&&(Ue==="id"||Ue==="name")&&(He(ue,_),he=Ne+he),J&&ye(/((--!?|])>)|<\/(style|title|textarea)/i,he)){He(ue,_);continue}if(Ue==="attributename"&&bt(he,"href")){He(ue,_);continue}if(I.forceKeepAttr)continue;if(!I.keepAttr){He(ue,_);continue}if(!te&&ye(/\/>/i,he)){He(ue,_);continue}Y&&nt([D,U,P],zt=>{he=qe(he,zt," ")});let Jt=de(_.nodeName);if(!Ut(Jt,Ue,he)){He(ue,_);continue}if(S&&typeof d=="object"&&typeof d.getAttributeType=="function"&&!be)switch(d.getAttributeType(Jt,Ue)){case"TrustedHTML":{he=S.createHTML(he);break}case"TrustedScriptURL":{he=S.createScriptURL(he);break}}if(he!==ut)try{be?_.setAttributeNS(be,ue,he):_.setAttribute(ue,he),ft(_)?Ce(_):Lr(e.removed)}catch{He(ue,_)}}ke(O.afterSanitizeAttributes,_,null)},tn=function F(_){let L=null,I=Ht(_);for(ke(O.beforeSanitizeShadowDOM,_,null);L=I.nextNode();)ke(O.uponSanitizeShadowNode,L,null),Mt(L),Bt(L),L.content instanceof l&&F(L.content);ke(O.afterSanitizeShadowDOM,_,null)};return e.sanitize=function(F){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},L=null,I=null,ie=null,ge=null;if(at=!F,at&&(F="<!-->"),typeof F!="string"&&!Ft(F))if(typeof F.toString=="function"){if(F=F.toString(),typeof F!="string")throw We("dirty is not a string, aborting")}else throw We("toString is not a function");if(!e.isSupported)return F;if(X||ot(_),e.removed=[],typeof F=="string"&&(fe=!1),fe){if(F.nodeName){let De=de(F.nodeName);if(!R[De]||z[De])throw We("root node is forbidden and cannot be sanitized in-place")}}else if(F instanceof o)L=$t("<!---->"),I=L.ownerDocument.importNode(F,!0),I.nodeType===Ke.element&&I.nodeName==="BODY"||I.nodeName==="HTML"?L=I:L.appendChild(I);else{if(!re&&!Y&&!ne&&F.indexOf("<")===-1)return S&&me?S.createHTML(F):F;if(L=$t(F),!L)return re?null:me?T:""}L&&ee&&Ce(L.firstChild);let ue=Ht(fe?F:L);for(;ie=ue.nextNode();)Mt(ie),Bt(ie),ie.content instanceof l&&tn(ie.content);if(fe)return F;if(re){if(Se)for(ge=s.call(L.ownerDocument);L.firstChild;)ge.appendChild(L.firstChild);else ge=L;return(V.shadowroot||V.shadowrootmode)&&(ge=w.call(n,ge,!0)),ge}let be=ne?L.outerHTML:L.innerHTML;return ne&&R["!doctype"]&&L.ownerDocument&&L.ownerDocument.doctype&&L.ownerDocument.doctype.name&&ye(Mr,L.ownerDocument.doctype.name)&&(be="<!DOCTYPE "+L.ownerDocument.doctype.name+`>
`+be),Y&&nt([D,U,P],De=>{be=qe(be,De," ")}),S&&me?S.createHTML(be):be},e.setConfig=function(){let F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ot(F),X=!0},e.clearConfig=function(){Me=null,X=!1},e.isValidAttribute=function(F,_,L){Me||ot({});let I=de(F),ie=de(_);return Ut(I,ie,L)},e.addHook=function(F,_){typeof _=="function"&&Ve(O[F],_)},e.removeHook=function(F,_){if(_!==void 0){let L=bn(O[F],_);return L===-1?void 0:An(O[F],L,1)[0]}return Lr(O[F])},e.removeHooks=function(F){O[F]=[]},e.removeAllHooks=function(){O=$r()},e}var Mn=Ur();Pr.exports=Mn});var Jr=Oe((Ot,Lt)=>{((i,e)=>{typeof define=="function"&&define.amd?define([],e):typeof Lt=="object"&&typeof Ot<"u"?Lt.exports=e():i.Papa=e()})(Ot,function i(){var e=typeof self<"u"?self:typeof window<"u"?window:e!==void 0?e:{},r,n=!e.document&&!!e.postMessage,t=e.IS_PAPA_WORKER||!1,l={},a=0,o={};function E(g){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(f){var s=m(f);s.chunkSize=parseInt(s.chunkSize),f.step||f.chunk||(s.chunkSize=null),this._handle=new d(s),(this._handle.streamer=this)._config=s}.call(this,g),this.parseChunk=function(f,s){var C=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<C){let O=this._config.newline;O||(w=this._config.quoteChar||'"',O=this._handle.guessLineEndings(f,w)),f=[...f.split(O).slice(C)].join(O)}this.isFirstChunk&&T(this._config.beforeFirstChunk)&&(w=this._config.beforeFirstChunk(f))!==void 0&&(f=w),this.isFirstChunk=!1,this._halted=!1;var C=this._partialLine+f,w=(this._partialLine="",this._handle.parse(C,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(f=w.meta.cursor,C=(this._finished||(this._partialLine=C.substring(f-this._baseIndex),this._baseIndex=f),w&&w.data&&(this._rowCount+=w.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),t)e.postMessage({results:w,workerId:o.WORKER_ID,finished:C});else if(T(this._config.chunk)&&!s){if(this._config.chunk(w,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=w=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(w.data),this._completeResults.errors=this._completeResults.errors.concat(w.errors),this._completeResults.meta=w.meta),this._completed||!C||!T(this._config.complete)||w&&w.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),C||w&&w.meta.paused||this._nextChunk(),w}this._halted=!0},this._sendError=function(f){T(this._config.error)?this._config.error(f):t&&this._config.error&&e.postMessage({workerId:o.WORKER_ID,error:f,finished:!1})}}function c(g){var f;(g=g||{}).chunkSize||(g.chunkSize=o.RemoteChunkSize),E.call(this,g),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(s){this._input=s,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(f=new XMLHttpRequest,this._config.withCredentials&&(f.withCredentials=this._config.withCredentials),n||(f.onload=S(this._chunkLoaded,this),f.onerror=S(this._chunkError,this)),f.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var s,C=this._config.downloadRequestHeaders;for(s in C)f.setRequestHeader(s,C[s])}var w;this._config.chunkSize&&(w=this._start+this._config.chunkSize-1,f.setRequestHeader("Range","bytes="+this._start+"-"+w));try{f.send(this._config.downloadRequestBody)}catch(O){this._chunkError(O.message)}n&&f.status===0&&this._chunkError()}},this._chunkLoaded=function(){f.readyState===4&&(f.status<200||400<=f.status?this._chunkError():(this._start+=this._config.chunkSize||f.responseText.length,this._finished=!this._config.chunkSize||this._start>=(s=>(s=s.getResponseHeader("Content-Range"))!==null?parseInt(s.substring(s.lastIndexOf("/")+1)):-1)(f),this.parseChunk(f.responseText)))},this._chunkError=function(s){s=f.statusText||s,this._sendError(new Error(s))}}function h(g){(g=g||{}).chunkSize||(g.chunkSize=o.LocalChunkSize),E.call(this,g);var f,s,C=typeof FileReader<"u";this.stream=function(w){this._input=w,s=w.slice||w.webkitSlice||w.mozSlice,C?((f=new FileReader).onload=S(this._chunkLoaded,this),f.onerror=S(this._chunkError,this)):f=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var w=this._input,O=(this._config.chunkSize&&(O=Math.min(this._start+this._config.chunkSize,this._input.size),w=s.call(w,this._start,O)),f.readAsText(w,this._config.encoding));C||this._chunkLoaded({target:{result:O}})},this._chunkLoaded=function(w){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(w.target.result)},this._chunkError=function(){this._sendError(f.error)}}function u(g){var f;E.call(this,g=g||{}),this.stream=function(s){return f=s,this._nextChunk()},this._nextChunk=function(){var s,C;if(!this._finished)return s=this._config.chunkSize,f=s?(C=f.substring(0,s),f.substring(s)):(C=f,""),this._finished=!f,this.parseChunk(C)}}function y(g){E.call(this,g=g||{});var f=[],s=!0,C=!1;this.pause=function(){E.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){E.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(w){this._input=w,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){C&&f.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),f.length?this.parseChunk(f.shift()):s=!0},this._streamData=S(function(w){try{f.push(typeof w=="string"?w:w.toString(this._config.encoding)),s&&(s=!1,this._checkIsFinished(),this.parseChunk(f.shift()))}catch(O){this._streamError(O)}},this),this._streamError=S(function(w){this._streamCleanUp(),this._sendError(w)},this),this._streamEnd=S(function(){this._streamCleanUp(),C=!0,this._streamData("")},this),this._streamCleanUp=S(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function d(g){var f,s,C,w,O=Math.pow(2,53),D=-O,U=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,P=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,v=this,H=0,k=0,B=!1,$=!1,M=[],R={data:[],errors:[],meta:{}};function le(z){return g.skipEmptyLines==="greedy"?z.join("").trim()==="":z.length===1&&z[0].length===0}function V(){if(R&&C&&(K("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+o.DefaultDelimiter+"'"),C=!1),g.skipEmptyLines&&(R.data=R.data.filter(function(j){return!le(j)})),oe()){let j=function(se,te){T(g.transformHeader)&&(se=g.transformHeader(se,te)),M.push(se)};var G=j;if(R)if(Array.isArray(R.data[0])){for(var z=0;oe()&&z<R.data.length;z++)R.data[z].forEach(j);R.data.splice(0,1)}else R.data.forEach(j)}function W(j,se){for(var te=g.header?{}:[],Y=0;Y<j.length;Y++){var J=Y,ne=j[Y],ne=((X,ee)=>(re=>(g.dynamicTypingFunction&&g.dynamicTyping[re]===void 0&&(g.dynamicTyping[re]=g.dynamicTypingFunction(re)),(g.dynamicTyping[re]||g.dynamicTyping)===!0))(X)?ee==="true"||ee==="TRUE"||ee!=="false"&&ee!=="FALSE"&&((re=>{if(U.test(re)&&(re=parseFloat(re),D<re&&re<O))return 1})(ee)?parseFloat(ee):P.test(ee)?new Date(ee):ee===""?null:ee):ee)(J=g.header?Y>=M.length?"__parsed_extra":M[Y]:J,ne=g.transform?g.transform(ne,J):ne);J==="__parsed_extra"?(te[J]=te[J]||[],te[J].push(ne)):te[J]=ne}return g.header&&(Y>M.length?K("FieldMismatch","TooManyFields","Too many fields: expected "+M.length+" fields but parsed "+Y,k+se):Y<M.length&&K("FieldMismatch","TooFewFields","Too few fields: expected "+M.length+" fields but parsed "+Y,k+se)),te}var Q;R&&(g.header||g.dynamicTyping||g.transform)&&(Q=1,!R.data.length||Array.isArray(R.data[0])?(R.data=R.data.map(W),Q=R.data.length):R.data=W(R.data,0),g.header&&R.meta&&(R.meta.fields=M),k+=Q)}function oe(){return g.header&&M.length===0}function K(z,W,Q,G){z={type:z,code:W,message:Q},G!==void 0&&(z.row=G),R.errors.push(z)}T(g.step)&&(w=g.step,g.step=function(z){R=z,oe()?V():(V(),R.data.length!==0&&(H+=z.data.length,g.preview&&H>g.preview?s.abort():(R.data=R.data[0],w(R,v))))}),this.parse=function(z,W,Q){var G=g.quoteChar||'"',G=(g.newline||(g.newline=this.guessLineEndings(z,G)),C=!1,g.delimiter?T(g.delimiter)&&(g.delimiter=g.delimiter(z),R.meta.delimiter=g.delimiter):((G=((j,se,te,Y,J)=>{var ne,X,ee,re;J=J||[",","	","|",";",o.RECORD_SEP,o.UNIT_SEP];for(var Se=0;Se<J.length;Se++){for(var me,$e=J[Se],ce=0,Ne=0,ae=0,fe=(ee=void 0,new b({comments:Y,delimiter:$e,newline:se,preview:10}).parse(j)),pe=0;pe<fe.data.length;pe++)te&&le(fe.data[pe])?ae++:(me=fe.data[pe].length,Ne+=me,ee===void 0?ee=me:0<me&&(ce+=Math.abs(me-ee),ee=me));0<fe.data.length&&(Ne/=fe.data.length-ae),(X===void 0||ce<=X)&&(re===void 0||re<Ne)&&1.99<Ne&&(X=ce,ne=$e,re=Ne)}return{successful:!!(g.delimiter=ne),bestDelimiter:ne}})(z,g.newline,g.skipEmptyLines,g.comments,g.delimitersToGuess)).successful?g.delimiter=G.bestDelimiter:(C=!0,g.delimiter=o.DefaultDelimiter),R.meta.delimiter=g.delimiter),m(g));return g.preview&&g.header&&G.preview++,f=z,s=new b(G),R=s.parse(f,W,Q),V(),B?{meta:{paused:!0}}:R||{meta:{paused:!1}}},this.paused=function(){return B},this.pause=function(){B=!0,s.abort(),f=T(g.chunk)?"":f.substring(s.getCharIndex())},this.resume=function(){v.streamer._halted?(B=!1,v.streamer.parseChunk(f,!0)):setTimeout(v.resume,3)},this.aborted=function(){return $},this.abort=function(){$=!0,s.abort(),R.meta.aborted=!0,T(g.complete)&&g.complete(R),f=""},this.guessLineEndings=function(j,G){j=j.substring(0,1048576);var G=new RegExp(A(G)+"([^]*?)"+A(G),"gm"),Q=(j=j.replace(G,"")).split("\r"),G=j.split(`
`),j=1<G.length&&G[0].length<Q[0].length;if(Q.length===1||j)return`
`;for(var se=0,te=0;te<Q.length;te++)Q[te][0]===`
`&&se++;return se>=Q.length/2?`\r
`:"\r"}}function A(g){return g.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function b(g){var f=(g=g||{}).delimiter,s=g.newline,C=g.comments,w=g.step,O=g.preview,D=g.fastMode,U=null,P=!1,v=g.quoteChar==null?'"':g.quoteChar,H=v;if(g.escapeChar!==void 0&&(H=g.escapeChar),(typeof f!="string"||-1<o.BAD_DELIMITERS.indexOf(f))&&(f=","),C===f)throw new Error("Comment character same as delimiter");C===!0?C="#":(typeof C!="string"||-1<o.BAD_DELIMITERS.indexOf(C))&&(C=!1),s!==`
`&&s!=="\r"&&s!==`\r
`&&(s=`
`);var k=0,B=!1;this.parse=function($,M,R){if(typeof $!="string")throw new Error("Input must be a string");var le=$.length,V=f.length,oe=s.length,K=C.length,z=T(w),W=[],Q=[],G=[],j=k=0;if(!$)return ce();if(D||D!==!1&&$.indexOf(v)===-1){for(var se=$.split(s),te=0;te<se.length;te++){if(G=se[te],k+=G.length,te!==se.length-1)k+=s.length;else if(R)return ce();if(!C||G.substring(0,K)!==C){if(z){if(W=[],re(G.split(f)),Ne(),B)return ce()}else re(G.split(f));if(O&&O<=te)return W=W.slice(0,O),ce(!0)}}return ce()}for(var Y=$.indexOf(f,k),J=$.indexOf(s,k),ne=new RegExp(A(H)+A(v),"g"),X=$.indexOf(v,k);;)if($[k]===v)for(X=k,k++;;){if((X=$.indexOf(v,X+1))===-1)return R||Q.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:W.length,index:k}),me();if(X===le-1)return me($.substring(k,X).replace(ne,v));if(v===H&&$[X+1]===H)X++;else if(v===H||X===0||$[X-1]!==H){Y!==-1&&Y<X+1&&(Y=$.indexOf(f,X+1));var ee=Se((J=J!==-1&&J<X+1?$.indexOf(s,X+1):J)===-1?Y:Math.min(Y,J));if($.substr(X+1+ee,V)===f){G.push($.substring(k,X).replace(ne,v)),$[k=X+1+ee+V]!==v&&(X=$.indexOf(v,k)),Y=$.indexOf(f,k),J=$.indexOf(s,k);break}if(ee=Se(J),$.substring(X+1+ee,X+1+ee+oe)===s){if(G.push($.substring(k,X).replace(ne,v)),$e(X+1+ee+oe),Y=$.indexOf(f,k),X=$.indexOf(v,k),z&&(Ne(),B))return ce();if(O&&W.length>=O)return ce(!0);break}Q.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:W.length,index:k}),X++}}else if(C&&G.length===0&&$.substring(k,k+K)===C){if(J===-1)return ce();k=J+oe,J=$.indexOf(s,k),Y=$.indexOf(f,k)}else if(Y!==-1&&(Y<J||J===-1))G.push($.substring(k,Y)),k=Y+V,Y=$.indexOf(f,k);else{if(J===-1)break;if(G.push($.substring(k,J)),$e(J+oe),z&&(Ne(),B))return ce();if(O&&W.length>=O)return ce(!0)}return me();function re(ae){W.push(ae),j=k}function Se(ae){var fe=0;return fe=ae!==-1&&(ae=$.substring(X+1,ae))&&ae.trim()===""?ae.length:fe}function me(ae){return R||(ae===void 0&&(ae=$.substring(k)),G.push(ae),k=le,re(G),z&&Ne()),ce()}function $e(ae){k=ae,re(G),G=[],J=$.indexOf(s,k)}function ce(ae){if(g.header&&!M&&W.length&&!P){var fe=W[0],pe=Object.create(null),Te=new Set(fe);let Je=!1;for(let Le=0;Le<fe.length;Le++){let Ae=fe[Le];if(pe[Ae=T(g.transformHeader)?g.transformHeader(Ae,Le):Ae]){let ve,ze=pe[Ae];for(;ve=Ae+"_"+ze,ze++,Te.has(ve););Te.add(ve),fe[Le]=ve,pe[Ae]++,Je=!0,(U=U===null?{}:U)[ve]=Ae}else pe[Ae]=1,fe[Le]=Ae;Te.add(Ae)}Je&&console.warn("Duplicate headers found and renamed."),P=!0}return{data:W,errors:Q,meta:{delimiter:f,linebreak:s,aborted:B,truncated:!!ae,cursor:j+(M||0),renamedHeaders:U}}}function Ne(){w(ce()),W=[],Q=[]}},this.abort=function(){B=!0},this.getCharIndex=function(){return k}}function N(g){var f=g.data,s=l[f.workerId],C=!1;if(f.error)s.userError(f.error,f.file);else if(f.results&&f.results.data){var w={abort:function(){C=!0,x(f.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:p,resume:p};if(T(s.userStep)){for(var O=0;O<f.results.data.length&&(s.userStep({data:f.results.data[O],errors:f.results.errors,meta:f.results.meta},w),!C);O++);delete f.results}else T(s.userChunk)&&(s.userChunk(f.results,w,f.file),delete f.results)}f.finished&&!C&&x(f.workerId,f.results)}function x(g,f){var s=l[g];T(s.userComplete)&&s.userComplete(f),s.terminate(),delete l[g]}function p(){throw new Error("Not implemented.")}function m(g){if(typeof g!="object"||g===null)return g;var f,s=Array.isArray(g)?[]:{};for(f in g)s[f]=m(g[f]);return s}function S(g,f){return function(){g.apply(f,arguments)}}function T(g){return typeof g=="function"}return o.parse=function(g,f){var s=(f=f||{}).dynamicTyping||!1;if(T(s)&&(f.dynamicTypingFunction=s,s={}),f.dynamicTyping=s,f.transform=!!T(f.transform)&&f.transform,!f.worker||!o.WORKERS_SUPPORTED)return s=null,o.NODE_STREAM_INPUT,typeof g=="string"?(g=(C=>C.charCodeAt(0)!==65279?C:C.slice(1))(g),s=new(f.download?c:u)(f)):g.readable===!0&&T(g.read)&&T(g.on)?s=new y(f):(e.File&&g instanceof File||g instanceof Object)&&(s=new h(f)),s.stream(g);(s=(()=>{var C;return!!o.WORKERS_SUPPORTED&&(C=(()=>{var w=e.URL||e.webkitURL||null,O=i.toString();return o.BLOB_URL||(o.BLOB_URL=w.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",O,")();"],{type:"text/javascript"})))})(),(C=new e.Worker(C)).onmessage=N,C.id=a++,l[C.id]=C)})()).userStep=f.step,s.userChunk=f.chunk,s.userComplete=f.complete,s.userError=f.error,f.step=T(f.step),f.chunk=T(f.chunk),f.complete=T(f.complete),f.error=T(f.error),delete f.worker,s.postMessage({input:g,config:f,workerId:s.id})},o.unparse=function(g,f){var s=!1,C=!0,w=",",O=`\r
`,D='"',U=D+D,P=!1,v=null,H=!1,k=((()=>{if(typeof f=="object"){if(typeof f.delimiter!="string"||o.BAD_DELIMITERS.filter(function(M){return f.delimiter.indexOf(M)!==-1}).length||(w=f.delimiter),typeof f.quotes!="boolean"&&typeof f.quotes!="function"&&!Array.isArray(f.quotes)||(s=f.quotes),typeof f.skipEmptyLines!="boolean"&&typeof f.skipEmptyLines!="string"||(P=f.skipEmptyLines),typeof f.newline=="string"&&(O=f.newline),typeof f.quoteChar=="string"&&(D=f.quoteChar),typeof f.header=="boolean"&&(C=f.header),Array.isArray(f.columns)){if(f.columns.length===0)throw new Error("Option columns is empty");v=f.columns}f.escapeChar!==void 0&&(U=f.escapeChar+D),f.escapeFormulae instanceof RegExp?H=f.escapeFormulae:typeof f.escapeFormulae=="boolean"&&f.escapeFormulae&&(H=/^[=+\-@\t\r].*$/)}})(),new RegExp(A(D),"g"));if(typeof g=="string"&&(g=JSON.parse(g)),Array.isArray(g)){if(!g.length||Array.isArray(g[0]))return B(null,g,P);if(typeof g[0]=="object")return B(v||Object.keys(g[0]),g,P)}else if(typeof g=="object")return typeof g.data=="string"&&(g.data=JSON.parse(g.data)),Array.isArray(g.data)&&(g.fields||(g.fields=g.meta&&g.meta.fields||v),g.fields||(g.fields=Array.isArray(g.data[0])?g.fields:typeof g.data[0]=="object"?Object.keys(g.data[0]):[]),Array.isArray(g.data[0])||typeof g.data[0]=="object"||(g.data=[g.data])),B(g.fields||[],g.data||[],P);throw new Error("Unable to serialize unrecognized input");function B(M,R,le){var V="",oe=(typeof M=="string"&&(M=JSON.parse(M)),typeof R=="string"&&(R=JSON.parse(R)),Array.isArray(M)&&0<M.length),K=!Array.isArray(R[0]);if(oe&&C){for(var z=0;z<M.length;z++)0<z&&(V+=w),V+=$(M[z],z);0<R.length&&(V+=O)}for(var W=0;W<R.length;W++){var Q=(oe?M:R[W]).length,G=!1,j=oe?Object.keys(R[W]).length===0:R[W].length===0;if(le&&!oe&&(G=le==="greedy"?R[W].join("").trim()==="":R[W].length===1&&R[W][0].length===0),le==="greedy"&&oe){for(var se=[],te=0;te<Q;te++){var Y=K?M[te]:te;se.push(R[W][Y])}G=se.join("").trim()===""}if(!G){for(var J=0;J<Q;J++){0<J&&!j&&(V+=w);var ne=oe&&K?M[J]:J;V+=$(R[W][ne],J)}W<R.length-1&&(!le||0<Q&&!j)&&(V+=O)}}return V}function $(M,R){var le,V;return M==null?"":M.constructor===Date?JSON.stringify(M).slice(1,25):(V=!1,H&&typeof M=="string"&&H.test(M)&&(M="'"+M,V=!0),le=M.toString().replace(k,U),(V=V||s===!0||typeof s=="function"&&s(M,R)||Array.isArray(s)&&s[R]||((oe,K)=>{for(var z=0;z<K.length;z++)if(-1<oe.indexOf(K[z]))return!0;return!1})(le,o.BAD_DELIMITERS)||-1<le.indexOf(w)||le.charAt(0)===" "||le.charAt(le.length-1)===" ")?D+le+D:le)}},o.RECORD_SEP="",o.UNIT_SEP="",o.BYTE_ORDER_MARK="\uFEFF",o.BAD_DELIMITERS=["\r",`
`,'"',o.BYTE_ORDER_MARK],o.WORKERS_SUPPORTED=!n&&!!e.Worker,o.NODE_STREAM_INPUT=1,o.LocalChunkSize=10485760,o.RemoteChunkSize=5242880,o.DefaultDelimiter=",",o.Parser=b,o.ParserHandle=d,o.NetworkStreamer=c,o.FileStreamer=h,o.StringStreamer=u,o.ReadableStreamStreamer=y,e.jQuery&&((r=e.jQuery).fn.parse=function(g){var f=g.config||{},s=[];return this.each(function(O){if(!(r(this).prop("tagName").toUpperCase()==="INPUT"&&r(this).attr("type").toLowerCase()==="file"&&e.FileReader)||!this.files||this.files.length===0)return!0;for(var D=0;D<this.files.length;D++)s.push({file:this.files[D],inputElem:this,instanceConfig:r.extend({},f)})}),C(),this;function C(){if(s.length===0)T(g.complete)&&g.complete();else{var O,D,U,P,v=s[0];if(T(g.before)){var H=g.before(v.file,v.inputElem);if(typeof H=="object"){if(H.action==="abort")return O="AbortError",D=v.file,U=v.inputElem,P=H.reason,void(T(g.error)&&g.error({name:O},D,U,P));if(H.action==="skip")return void w();typeof H.config=="object"&&(v.instanceConfig=r.extend(v.instanceConfig,H.config))}else if(H==="skip")return void w()}var k=v.instanceConfig.complete;v.instanceConfig.complete=function(B){T(k)&&k(B,v.file,v.inputElem),w()},o.parse(v.file,v.instanceConfig)}}function w(){s.splice(0,1),C()}}),t&&(e.onmessage=function(g){g=g.data,o.WORKER_ID===void 0&&g&&(o.WORKER_ID=g.workerId),typeof g.input=="string"?e.postMessage({workerId:o.WORKER_ID,results:o.parse(g.input,g.config),finished:!0}):(e.File&&g.input instanceof File||g.input instanceof Object)&&(g=o.parse(g.input,g.config))&&e.postMessage({workerId:o.WORKER_ID,results:g,finished:!0})}),(c.prototype=Object.create(E.prototype)).constructor=c,(h.prototype=Object.create(E.prototype)).constructor=h,(u.prototype=Object.create(u.prototype)).constructor=u,(y.prototype=Object.create(E.prototype)).constructor=y,o})});var Gr=Oe((Qn,zr)=>{var Z=Br(),vt=Jr();zr.exports=class{constructor(e){let r=this;r.damon=e,r.domPurify=Z,r.websiteRegex=/^(https?:\/\/)?[-a-zA-Z0-9]*[a-zA-Z0-9]+(\.[-a-zA-Z0-9]*[a-zA-Z0-9]+)+/,r.httpRegex=/^https?:\/\//}damonToSExpression(e){let r=this;return r.prefixedKeysMapToSExpression(r.damon.damonToMap(e))}sExpressionToDamon(e){let r=this;return r.damon.mapToDamon(r.sExpressionToPrefixedKeysMap(e),!1,!0)}escape(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}mapToHtmlList(e,r=!1,n=void 0){let t=this;try{t.damon.mapToJSON(e)}catch(c){throw console.log(c),new Error("Provided map value doesn't passes JSON.parse()")}var l=0,a=document.createElement("ul"),o;return n!==void 0&&(o=JSON.parse(n)),a.className="DAMON-List",E(e,a),a;function E(c,h,u=[]){if(typeof h!="object"||h==null||Array.isArray(h))throw new Error("Error List Item number "+l+": @param { {} } list");if(typeof c=="object"&&c!==null&&!Array.isArray(c)&&c instanceof Map&&c.constructor===Map){if(h.tagName=="UL")for(let[A,b]of c){let N=document.createElement("ul"),x=document.createElement("code"),p=document.createElement("span"),m=document.createElement("li");if(m.dataset.graphArbo=Array.from(c.keys()).indexOf(A),u.length>0&&(m.dataset.graphArbo=u.join("-")+"-"+Array.from(c.keys()).indexOf(A)),p.className="type-key",t.websiteRegex.test(A)){let S=A;t.httpRegex.test(A)||(S="https://"+A);let T=Z.sanitize(`<a href="${S}"><span>${S}</span></a>`);p.innerHTML=T}else n!==void 0&&A in o["@context"]?p.innerHTML=Z.sanitize(`<a href="${o["@context"][A]["@id"]}"><span>${A}</span></a>`):p.textContent=A;if(typeof b=="object"&&b!==null)if(Array.isArray(b))if(c.damonInlineArrays!==void 0&&c.damonInlineArrays.indexOf(A)>-1){x.innerHTML=p.outerHTML+'<span class="operator">: </span>[';for(let S=0,T=b.length;S<T;S++){let g=document.createElement("span"),f=b[S];if(f===!0)g.textContent="true",g.className="type-boolean";else if(f===!1)g.textContent="false",g.className="type-boolean";else if(f===null)g.textContent="null",g.className="type-null";else if(Number.isFinite(f)&&!Number.isNaN(f))g.textContent=f+"",g.className="type-number";else{if(r)if(t.websiteRegex.test(f)){let s=f;t.httpRegex.test(f)||(s="https://"+f),g.innerHTML=Z.sanitize(`<a href="${s}">"${s}"</a>`)}else g.innerHTML=`"${f}"`;else if(t.websiteRegex.test(f)){let s=f;t.httpRegex.test(f)||(s="https://"+f),g.innerHTML=Z.sanitize(`<a href="${s}">"${s}"</a>`)}else g.textContent=`"${f}"`;g.className="type-string"}S!==0&&(x.innerHTML+=", "),x.appendChild(g)}x.innerHTML+="]",m.appendChild(x),m.appendChild(N),h.appendChild(m)}else x.innerHTML=p.outerHTML+'<span class="operator">: </span>[]',m.appendChild(x),m.appendChild(N),h.appendChild(m),E(b,N,u.concat([Array.from(c.keys()).indexOf(A)]));else c.implicitMaps!==void 0&&c.implicitMaps.indexOf(A)>-1?x.innerHTML=p.outerHTML:x.innerHTML=p.outerHTML+'<span class="operator">: </span>{}',m.appendChild(x),m.appendChild(N),h.appendChild(m),E(b,N,u.concat([Array.from(c.keys()).indexOf(A)]));else{l++,x.innerHTML=p.outerHTML+'<span class="operator">: </span>';let S=document.createElement("span"),T=b;if(T===!0)S.textContent="true",S.className="type-boolean";else if(T===!1)S.textContent="false",S.className="type-boolean";else if(T===null)S.textContent="null",S.className="type-null";else if(Number.isFinite(T)&&!Number.isNaN(T))S.textContent=T+"",S.className="type-number";else{if(r)if(t.websiteRegex.test(T)){let g=T;t.httpRegex.test(T)||(g="https://"+T),S.innerHTML=Z.sanitize(`<a href="${g}">"${g}"</a>`)}else S.innerHTML=`"${T}"`;else if(t.websiteRegex.test(T)){let g=T;t.httpRegex.test(T)||(g="https://"+T),S.innerHTML=Z.sanitize(`<a href="${g}">"${g}"</a>`)}else S.textContent=`"${T}"`;S.className="type-string"}c.implicitNulls===void 0||c.implicitNulls.indexOf(A)==-1?x.appendChild(S):x.innerHTML=x.innerHTML.slice(0,-2),m.appendChild(x),h.appendChild(m)}}}else if(Array.isArray(c))for(var y=0,d=c.length;y<d;y++){let A=document.createElement("ul"),b=document.createElement("code"),N=document.createElement("li");if(N.dataset.graphArbo=y,u.length>0&&(N.dataset.graphArbo=u.join("-")+"-"+y),typeof c[y]=="object"&&c[y]!==null)if(Array.isArray(c[y]))if(c.damonInlineArrays!==void 0&&c.damonInlineArrays.indexOf(y)>-1){b.innerHTML+="[";for(let x=0,p=c[y].length;x<p;x++){let m=document.createElement("span"),S=c[y][x];if(S===!0)m.textContent="true",m.className="type-boolean";else if(S===!1)m.textContent="false",m.className="type-boolean";else if(S===null)m.textContent="null",m.className="type-null";else if(Number.isFinite(S)&&!Number.isNaN(S))m.textContent=S+"",m.className="type-number";else{if(r)if(t.websiteRegex.test(S)){let T=S;t.httpRegex.test(S)||(T="https://"+S),m.innerHTML=Z.sanitize(`<a href="${T}">"${T}"</a>`)}else m.innerHTML=`"${S}"`;else if(t.websiteRegex.test(S)){let T=S;t.httpRegex.test(S)||(T="https://"+S),m.innerHTML=Z.sanitize(`<a href="${T}">"${T}"</a>`)}else m.textContent=`"${S}"`;m.className="type-string"}x!==0&&(b.innerHTML+=", "),b.appendChild(m)}b.innerHTML+="]",N.appendChild(b),N.appendChild(A),h.appendChild(N)}else b.textContent="[]",N.appendChild(b),N.appendChild(A),h.appendChild(N),E(c[y],A,u.concat(y));else b.textContent="{}",N.appendChild(b),N.appendChild(A),h.appendChild(N),E(c[y],A,u.concat(y));else{l++;let x=c[y];if(x===!0)b.textContent="true",b.className="type-boolean";else if(x===!1)b.textContent="false",b.className="type-boolean";else if(x===null)b.textContent="null",b.className="type-null";else if(Number.isFinite(x)&&!Number.isNaN(x))b.textContent=x+"",b.className="type-number";else{if(r)if(t.websiteRegex.test(x)){let p=x;t.httpRegex.test(x)||(p="https://"+x),b.innerHTML=Z.sanitize(`<a href="${p}">"${p}"</a>`)}else b.innerHTML=`"${x}"`;else if(t.websiteRegex.test(x)){let p=x;t.httpRegex.test(x)||(p="https://"+x),b.innerHTML=Z.sanitize(`<a href="${p}">"${p}"</a>`)}else b.textContent=`"${x}"`;b.className="type-string"}N.appendChild(b),N.appendChild(A),h.appendChild(N)}}}}mapToHtmlTable(e,r=!1){let n=this;try{n.damon.mapToJSON(e)}catch{throw new Error("Provided value doesn't passes JSON.parse().")}var t=0,l=document.createElement("table"),a=document.createElement("thead"),o=document.createElement("tbody"),E=!1,c=0;if(l.className="DAMON-Table",typeof e!="object"||e==null||Array.isArray(e)||!(e instanceof Map)||e.constructor!==Map)throw new Error("Error: expected an Object value, saw otherwise.");for(let[h,u]of e){if(typeof u=="object"&&u!==null&&!Array.isArray(u)&&u instanceof Map&&u.constructor===Map)if(t==0){let y=document.createElement("tr");c=u.length;for(let[d,A]of u)if(A===null){let b=document.createElement("th");b.dataset.graphArbo=t+"-"+y.children.length,r?n.websiteRegex.test(d)?b.innerHTML=Z.sanitize(`<a href="${d}">${d}</a>`):b.innerHTML=`${d}`:n.websiteRegex.test(d)?b.innerHTML=Z.sanitize(`<a href="${d}">${d}</a>`):b.textContent=`${d}`,y.appendChild(b)}else throw new Error("Error row "+t+": expected implicit null property, saw otherwise.");a.appendChild(y),E=!0}else{if(u.length!=c)throw new Error("Error row "+t+": cells total doesn't match the header's.");let y=document.createElement("tr");for(let[d,A]of u)if(A===null){let b=document.createElement("td");b.dataset.graphArbo=t+"-"+y.children.length,r?n.websiteRegex.test(d)?b.innerHTML=Z.sanitize(`<a href="${d}">${d}</a>`):b.innerHTML=`${d}`:n.websiteRegex.test(d)?b.innerHTML=Z.sanitize(`<a href="${d}">${d}</a>`):b.textContent=`${d}`,y.appendChild(b)}else throw new Error("Error row "+t+": expected implicit null property, saw otherwise.");o.appendChild(y)}else throw new Error("Error row "+t+": expected an Object value, saw otherwise.");t++}return E&&l.appendChild(a),l.appendChild(o),l}mapTreeLeavesToHtmlTable(e,r=!1){let n=this;try{n.damon.mapToJSON(e)}catch{throw new Error("Provided map value doesn't passes JSON.parse()")}var t=0,l=0,a=document.createElement("table"),o=document.createElement("thead"),E=document.createElement("tbody"),c=!1;if(a.className="DAMON-LeavesToTable",typeof e!="object"||e==null||Array.isArray(e)||!(e instanceof Map)||e.constructor!==Map)throw new Error("Error List Item number "+t+": @param { {} } list");for(let[u,y]of e){if(typeof y=="object"&&!Array.isArray(y)){if(u=="head"&&!c){try{h(y,o)}catch{return}c=!0}else if(u=="body")try{h(y,E)}catch{return}}else if(typeof y!="object"&&u=="caption"){let d=document.createElement("caption");r?d.innerHTML=y:d.textContent=y,a.appendChild(d)}else throw new Error("Error List Item number "+t+": @param { {} } list");t++}return c&&a.appendChild(o),a.appendChild(E),a;function h(u,y,d=0,A=[]){if(typeof y!="object"||y==null)throw new Error("Error List Item number "+t+": @param { {} } list");if(typeof u=="object"&&u!==null&&!Array.isArray(u)&&u instanceof Map&&u.constructor===Map){if(y.tagName=="THEAD")if(Array.from(u.keys()).length==1)if(typeof u.get(Array.from(u.keys())[0])=="object"&&u.get(Array.from(u.keys())[0])!==null)t++,h(u.get(Array.from(u.keys())[0]),y,d+1,A.concat([Array.from(u.keys())[0]]));else throw new Error("Error List Item number "+t+": @param { {} } list");else throw new Error("Error List Item number "+t+": @param { {} } list");else if(y.tagName=="TBODY"){if(Array.from(u.keys()).length==0)throw new Error("Error List Item number "+t+": @param { {} } list");for(let[b,N]of u)if(typeof N=="object"&&N!==null)t++,h(N,y,d+1,A.concat([b]));else throw new Error("Error List Item number "+t+": @param { {} } list")}}else if(Array.isArray(u)){if(y.tagName=="THEAD")if(u.length==1){t++,l=d;let b=document.createElement("tr");A.push(u[0]);for(let N=0,x=A.length;N<x;N++){let p=document.createElement("th");r?p.innerHTML=A[N]:p.textContent=A[N],b.appendChild(p)}y.appendChild(b)}else throw new Error("Error List Item number "+t+": @param { {} } list");else if(y.tagName=="TBODY")if(d==l){if(u.length==0)throw new Error("Error List Item number "+t+": @param { {} } list");for(let b=0,N=u.length;b<N;b++){t++;let x=document.createElement("tr");for(let m=0,S=A.length;m<S;m++){let T=document.createElement("td");r?T.innerHTML=A[m]:T.textContent=A[m],x.appendChild(T)}let p=document.createElement("td");r?p.innerHTML=u[b]:p.textContent=u[b],p.textContent=u[b],x.appendChild(p),y.appendChild(x)}}else throw new Error("Error List Item number "+t+": @param { {} } list")}}}htmlToJSON(e){let r=this;var n=0;if(e.firstElementChild.textContent=="{}")return r._mapToJSON(t(e,new Map));if(e.firstElementChild.textContent=="[]")return r._mapToJSON(t(e,[]));function t(l,a){if(typeof l!="object"||l==null||Array.isArray(l))throw new Error("Error List Item number "+n+": @param { {} } list");if(typeof a=="object"&&a!==null&&!Array.isArray(a)&&a instanceof Map&&a.constructor===Map){for(let o=0,E=l.children.length;o<E;o++)if(n++,l.children[o].tagName=="LI")if(l.children[o].firstElementChild.tagName=="CODE")if(l.children[o].firstElementChild.innerHTML.length){let c=l.children[o].firstElementChild.innerHTML.trim();if(c[c.length-1]==":"&&c.length>1){let h=l.children[o].children[1];if(h.tagName=="UL"&&h.firstElementChild.tagName=="LI"&&h.children.length==1&&h.firstElementChild.firstElementChild.tagName=="CODE"){n++;let u=h.firstElementChild.firstElementChild.textContent.trim();u=="true"?a.set(c.slice(0,-1),!0):u=="false"?a.set(c.slice(0,-1),!1):u=="null"?a.set(c.slice(0,-1),null):isFinite(u)&&!isNaN(parseFloat(u))?a.set(c.slice(0,-1),u*1):a.set(c.slice(0,-1),u)}else throw new Error("Error List Item number "+n+": not DAMON-compliant.")}else if(c[c.length-4]==":"&&c.length>4){if(c.slice(-3)==" []")if(a.set(c.slice(0,-4),[]),l.children[o].children[1].tagName=="UL")t(l.children[o].children[1],a.get(c.slice(0,-4)));else throw new Error("Error List Item number "+n+": not DAMON-compliant.");else if(c.slice(-3)==" {}")if(a.set(c.slice(0,-4),new Map),l.children[o].children[1].tagName=="UL")t(l.children[o].children[1],a.get(c.slice(0,-4)));else throw new Error("Error List Item number "+n+": not DAMON-compliant.")}else throw new Error("Error List Item number "+n+": map items need a key")}else throw new Error("Error List Item number "+n+": empty node.");else throw new Error("Error List Item number "+n+": not DAMON-compliant.")}else if(Array.isArray(a)){for(let o=0,E=l.children.length;o<E;o++)if(n++,l.children[o].tagName=="LI")if(l.children[o].firstElementChild.tagName=="CODE")if(l.children[o].firstElementChild.innerHTML.length){let c=l.children[o].firstElementChild.innerHTML.trim();if(c[c.length-1]==":"&&c.length>1)throw new Error("Error List Item number "+n+": lists can't have keys.");if(c[c.length-4]==":"&&c.length>4)throw new Error("Error List Item number "+n+": not DAMON-compliant.");if(c=="[]")if(a.push([]),l.children[o].children[1]&&l.children[o].children[1].tagName=="UL")t(l.children[o].children[1],a[a.length-1]);else throw new Error("Error List Item number "+n+": not DAMON-compliant.");else if(c=="{}")if(a.push({}),l.children[o].children[1]&&l.children[o].children[1].tagName=="UL")t(l.children[o].children[1],a[a.length-1]);else throw new Error("Error List Item number "+n+": not DAMON-compliant.");else c=="true"?a.push(!0):c=="false"?a.push(!1):c=="null"?a.push(null):isFinite(c)&&!isNaN(parseFloat(c))?a.push(c*1):a.push(c)}else throw new Error("Error List Item number "+n+": empty node.");else throw new Error("Error List Item number "+n+": not DAMON-compliant.")}else throw new Error("Error List Item number "+n+": @param { {} | [] } jsonMap");return a}}prefixedKeysMapToSExpression(e){let r=this;var n="";if(typeof e=="object"&&e!==null&&e instanceof Map&&e.constructor===Map)return n+=`[\r
`,t(e),n+="]",JSON.parse(n),n;return typeof e=="string"&&(e='"'+e+'"'),JSON.parse(e),e;function t(l,a=1){if(typeof l=="object"&&l!==null&&!Array.isArray(l)&&l instanceof Map&&l.constructor===Map){let c=-1;for(let[h,u]of l){c++;let y=h.slice(h.match(/^[0-9]+-/)[0].length);if(typeof u=="object"&&u!==null)if(Array.isArray(u))u.length>0?(n+="    ".repeat(a)+`${JSON.stringify(y)}, [\r
`,t(u,a+1),n+="    ".repeat(a)+"]"):n+="    ".repeat(a)+`${JSON.stringify(y)}, []`;else if(Array.from(u.keys()).length>0){if(a==1)if(c==0)n="";else throw new Error("Multiple S-Expression roots");n+="    ".repeat(a)+`[${JSON.stringify(y)}, \r
`,t(u,a+1),a!=1&&(n+="    ".repeat(a)+"]")}else n+="    ".repeat(a)+`${JSON.stringify(y)}, []`;else{if(u===!0)throw new Error("Booleans require quotes");if(u===!1)throw new Error("Booleans require quotes");u===null?n+="    ".repeat(a)+`${JSON.stringify(y)}`:Number.isFinite(u)&&!Number.isNaN(u)?n+="    ".repeat(a)+`${JSON.stringify(y)}, `+u:n+="    ".repeat(a)+`${JSON.stringify(y)}, `+JSON.stringify(u)}h!=Array.from(l.keys())[Array.from(l.keys()).length-1]?n+=`,\r
`:n+=`\r
`}}else if(Array.isArray(l))for(var o=0,E=l.length;o<E;o++){if(typeof l[o]=="object"&&l[o]!==null)Array.isArray(l[o])?l[o].length>0?(n+="    ".repeat(a)+`[\r
`,t(l[o],a+1),n+="    ".repeat(a)+"]"):n+="    ".repeat(a)+"[]":Array.from(l[o].keys()).length>0?(n+="    ".repeat(a)+`[\r
`,t(l[o],a+1),n+="    ".repeat(a)+"]"):n+="    ".repeat(a)+"[]";else{if(l[o]===!0)throw new Error("Booleans require quotes");if(l[o]===!1)throw new Error("Booleans require quotes");if(l[o]===null)throw new Error("Array-nulls require quotes");Number.isFinite(l[o])&&!Number.isNaN(l[o])?n+="    ".repeat(a)+l[o]:n+="    ".repeat(a)+JSON.stringify(l[o])}o!=E-1?n+=`,\r
`:n+=`\r
`}}}sExpressionToPrefixedKeysMap(e){let r=this,n=new Map,t=0;return n.headless=!0,l(JSON.parse(e),n),n;function l(a,o){if(Array.isArray(a)){let E=new Map;t++,o.set(t+"-"+a[0],E);for(let c=1,h=a.length;c<h;c++)l(a[c],E)}else t++,o.set(t+"-"+a[0],null)}}prefixedKeysMapToMathJs(e){let r=this,n="";if(Array.isArray(e))return l(e),n.slice(0,-1);return typeof e=="object"&&e!==null&&e instanceof Map&&e.constructor===Map?(l(e),n.slice(0,-1)):(typeof e=="string"&&(e=JSON.stringify(e)),JSON.parse(e),e);function t(a){return a[0].toLowerCase()+a.slice(1)}function l(a,o=0){if(typeof a=="object"&&a!==null&&!Array.isArray(a)&&a instanceof Map&&a.constructor===Map)for(let[h,u]of a){let y=h.slice(h.match(/^[0-9]+-/)[0].length);y=="Power"&&(y="Pow"),y=="e"&&(y="2.718281828459045"),y=="i"&&(y="sqrt(-1)"),y=="LN2"&&(y="0.6931471805599453"),y=="LN10"&&(y="2.302585092994046"),y=="LOG2E"&&(y="1.4426950408889634"),y=="LOG10E"&&(y="0.4342944819032518"),y=="phi"&&(y="1.618033988749895"),y=="pi"&&(y="3.141592653589793"),y=="SQRT1_2"&&(y="0.7071067811865476"),y=="SQRT2"&&(y="1.4142135623730951"),y=="tau"&&(y="6.283185307179586"),typeof u=="object"&&u!==null?Array.isArray(u)?u.length>0?(n+="    ".repeat(o)+`${JSON.stringify(t(y)).slice(1,-1)}(
`,l(u,o+1),n+="    ".repeat(o)+")"):n+="    ".repeat(o)+`${JSON.stringify(t(y)).slice(1,-1)}()`:Array.from(u.keys()).length>0?(n+="    ".repeat(o)+`${JSON.stringify(t(y)).slice(1,-1)}(
`,l(u,o+1),n+="    ".repeat(o)+")"):n+="    ".repeat(o)+`${JSON.stringify(t(y)).slice(1,-1)}()`:u===!0?n+="    ".repeat(o)+`${JSON.stringify(t(y)).slice(1,-1)}(true)`:u===!1?n+="    ".repeat(o)+`${JSON.stringify(t(y)).slice(1,-1)}(false)`:u===null?n+="    ".repeat(o)+`${JSON.stringify(t(y)).slice(1,-1)}`:Number.isFinite(u)&&!Number.isNaN(u)?n+="    ".repeat(o)+`${JSON.stringify(t(y)).slice(1,-1)}(`+u+")":n+="    ".repeat(o)+`${JSON.stringify(t(y)).slice(1,-1)}(`+JSON.stringify(u)+")",h!=Array.from(a.keys())[Array.from(a.keys()).length-1]?n+=`,
`:n+=`
`}else if(Array.isArray(a))for(var E=0,c=a.length;E<c;E++)typeof a[E]=="object"&&a[E]!==null?Array.isArray(a[E])?a[E].length>0?a.damonInlineArrays!==void 0&&a.damonInlineArrays.indexOf(E)>-1?a[E]===!0?n+="    ".repeat(o)+"true":a[E]===!1?n+="    ".repeat(o)+"false":a[E]===null?n+="    ".repeat(o)+"null":Number.isFinite(a[E])&&!Number.isNaN(a[E])?n+="    ".repeat(o)+a[E]:n+="    ".repeat(o)+JSON.stringify(a[E]).slice(1,-1):(n+="    ".repeat(o)+`(
`,l(a[E],o+1),n+="    ".repeat(o)+")"):n+="    ".repeat(o)+"()":Array.from(a[E].keys()).length>0?(n+="    ".repeat(o)+`(
`,l(a[E],o+1),n+="    ".repeat(o)+")"):n+="    ".repeat(o)+"()":a[E]===!0?n+="    ".repeat(o)+"true":a[E]===!1?n+="    ".repeat(o)+"false":a[E]===null?n+="    ".repeat(o)+"null":Number.isFinite(a[E])&&!Number.isNaN(a[E])?n+="    ".repeat(o)+a[E]:n+="    ".repeat(o)+JSON.stringify(a[E]).slice(1,-1),E!=c-1?n+=`,
`:n+=`
`}}_mapsDiff(e,r){let n=this;try{n.damon.mapToJSON(e),n.damon.mapToJSON(r)}catch{throw new Error("Provided map value doesn't passes JSON.parse()")}if(typeof e!=typeof r||typeof e=="object"&&e!==null&&!Array.isArray(e)&&e instanceof Map&&e.constructor===Map&&(r==null||Array.isArray(r)||!(r instanceof Map)||r.constructor!==Map))throw new Error("Different root types.");var t;if(typeof e=="object"&&e!==null&&!Array.isArray(e)&&e instanceof Map&&e.constructor===Map)return t=new Map,l(e),t;if(Array.isArray(e))return t=[],l(e),t;function l(a,o=[]){if(typeof a=="object"&&a!==null&&!Array.isArray(a)&&a instanceof Map&&a.constructor===Map){let E="",c=null,h=r;for(let d=0,A=o.length;d<A;d++)typeof h=="object"&&h!==null&&!Array.isArray(h)&&h instanceof Map&&h.constructor===Map?h=h.get(Array.from(h.keys())[o[d]]):h=h[o[d]];let u=t;for(let d=0,A=o.length;d<A;d++)typeof u=="object"&&u!==null&&!Array.isArray(u)&&u instanceof Map&&u.constructor===Map&&Array.from(u.keys()).length?u=u.get(Array.from(u.keys())[o[d]]):u=u[o[d]];let y=0;for(let[d,A]of a)y>Array.from(h.keys()).length-1?typeof A=="object"&&A!==null&&!Array.isArray(A)&&A instanceof Map&&A.constructor===Map?Array.from(h.keys()).indexOf(d)!==-1&&typeof h.get(d)=="object"&&h.get(d)!==null&&!Array.isArray(h.get(d))&&h.get(d)instanceof Map&&h.get(d).constructor===Map?u.set(y+"-yellow",null):u.set(y+"-red",null):Array.isArray(A)?Array.from(h.keys()).indexOf(d)!==-1&&Array.isArray(h.get(d))?u.set(y+"-yellow",null):u.set(y+"-red",null):Array.from(h.keys()).indexOf(d)!==-1&&A===h.get(d)?u.set(y+"-yellow",null):u.set(y+"-red",null):(E=Array.from(h.keys())[y],c=h.get(E),typeof A=="object"&&A!==null&&!Array.isArray(A)&&A instanceof Map&&A.constructor===Map?typeof c=="object"&&c!==null&&!Array.isArray(c)&&c instanceof Map&&c.constructor===Map&&d===E?(u.set(y+"-green",new Map),Array.from(A.keys()).length>0&&l(A,o.concat([y]))):u.set(y+"-red",null):Array.isArray(A)?Array.isArray(c)&&d===E?(u.set(y+"-green",[]),A.length>0&&l(A,o.concat([y]))):u.set(y+"-red",null):A===c&&d===E?u.set(y+"-green","green"):u.set(y+"-red",null)),y++;if(Array.from(a.keys()).length<Array.from(h.keys()).length){let d=0;for(let[A,b]of h){if(d<=y-1){d++;continue}typeof b=="object"&&b!==null&&!Array.isArray(b)&&b instanceof Map&&b.constructor===Map?Array.from(a.keys()).indexOf(A)!==-1&&typeof a.get(A)=="object"&&a.get(A)!==null&&!Array.isArray(a.get(A))&&a.get(A)instanceof Map&&a.get(A).constructor===Map?u.set(y+"-yellow",null):u.set(y+"-red",null):Array.isArray(b)?Array.from(a.keys()).indexOf(A)!==-1&&Array.isArray(a.get(A))?u.set(y+"-yellow",null):u.set(y+"-red",null):Array.from(a.keys()).indexOf(A)!==-1&&b===a.get(A)?u.set(y+"-yellow",null):u.set(y+"-red",null),d++}}}else{let E=null,c=r;for(let u=0,y=o.length;u<y;u++)typeof c=="object"&&c!==null&&!Array.isArray(c)&&c instanceof Map&&c.constructor===Map&&Array.from(c.keys()).length?c=c.get(Array.from(c.keys())[o[u]]):c=c[o[u]];let h=t;for(let u=0,y=o.length;u<y;u++)typeof h=="object"&&h!==null&&!Array.isArray(h)&&h instanceof Map&&h.constructor===Map&&Array.from(h.keys()).length?h=h.get(Array.from(h.keys())[o[u]]):h=h[o[u]];for(let u=0,y=a.length;u<y;u++)u>c.length-1?h[u]="red":(E=c[u],typeof a[u]=="object"&&a[u]!==null&&!Array.isArray(a[u])&&a[u]instanceof Map&&a[u].constructor===Map?typeof E=="object"&&E!==null&&!Array.isArray(E)&&E instanceof Map&&E.constructor===Map?(h[u]=new Map,Array.from(a[u].keys()).length>0&&l(a[u],o.concat([u]))):h[u]="red":Array.isArray(a[u])?Array.isArray(E)?(h[u]=[],a[u].length>0&&l(a[u],o.concat([u]))):h[u]="red":a[u]===E?h[u]="green":h[u]="red");if(a.length<c.length)for(let u=0,y=c.length;u<y;u++)u<=a.length-1||(h[u]="red")}}}sortMap(e,r){let n=this,t=Array.from(e.keys()),l=Array.from(r.keys()),a=new Map;for(let o=0,E=t.length;o<E;o++)r.get(t[o])!==void 0&&a.set(t[o],r.get(t[o]));for(let o=0,E=l.length;o<E;o++)t.indexOf(l[o])==-1&&a.set(l[o],r.get(l[o]));return a}renderDiff(e,r,n=!1){let t=this,l=document.createElement("div"),a=document.createElement("div"),o=document.createElement("ul"),E=t._mapsDiff(e,r);return l.className="DAMON-Diff",a.className="DAMON-Diff-legend",o.className="DAMON-List",a.innerHTML='<span id="damonDiffRed"><span>Red</span>: Difference</span>; <span id="damonDiffBlue"><span>Blue</span>: Addition</span>; <span id="damonDiffGreen"><span>Green</span>: Displacement</span>',c(E,o),l.appendChild(a),l.appendChild(o),l;function c(u,y,d=[],A="green"){if(A==="green"){if(typeof y!="object"||y==null||Array.isArray(y))throw new Error("Error List Item "+d.concat("-")+": @param { {} } list");if(typeof u=="object"&&u!==null&&!Array.isArray(u)&&u instanceof Map&&u.constructor===Map){if(y.tagName=="UL"){let x="",p=null,m=e;for(let s=0,C=d.length;s<C;s++)typeof m=="object"&&m!==null&&!Array.isArray(m)&&m instanceof Map&&m.constructor===Map?m=m.get(Array.from(m.keys())[d[s]]):m=m[d[s]];let S="",T=null,g=r;for(let s=0,C=d.length;s<C;s++)typeof g=="object"&&g!==null&&!Array.isArray(g)&&g instanceof Map&&g.constructor===Map?g=g.get(Array.from(g.keys())[d[s]]):g=g[d[s]];let f=0;for(let[s,C]of u){let w=Array.from(u.keys())[f].split("-")[1],O=u.get(Array.from(u.keys())[f]),D=document.createElement("ul"),U=document.createElement("code"),P=document.createElement("span"),v=document.createElement("li");if(P.className="type-key",v.className=w+"-diff",v.className==="red-diff"&&f<=Array.from(m.keys()).length-1?f>Array.from(g.keys()).length-1?(s="",C=""):(f>Array.from(m.keys()).length-1&&(v.className="blue-diff",v.setAttribute("aria-describedby","damonDiffBlue")),S=Array.from(g.keys())[f],T=g.get(S),s=S,C=T):v.className==="green-diff"?(v.dataset.graphArbo=f,d.length>0&&(v.dataset.graphArbo=d.join("-")+"-"+f),v.className="",x=Array.from(g.keys())[f],p=g.get(x),s=x,C=p):v.className==="yellow-diff"?f>Array.from(m.keys()).length-1?(v.className="green-diff",v.setAttribute("aria-describedby","damonDiffGreen"),x=Array.from(g.keys())[f],p=g.get(x),s=x,C=p):(s="",C="",v.className="red-diff",v.setAttribute("aria-describedby","damonDiffRed")):(v.className="blue-diff",v.setAttribute("aria-describedby","damonDiffBlue"),x=Array.from(g.keys())[f],p=g.get(x),s=x,C=p),v.className==="red-diff"&&v.setAttribute("aria-describedby","damonDiffRed"),t.websiteRegex.test(s)){let H=s;t.httpRegex.test(s)||(H="https://"+s);let k=Z.sanitize(`<a href="${H}"><span>${H}</span></a>`);P.innerHTML=k}else P.textContent=s;if(typeof C=="object"&&C!==null)if(Array.isArray(C))if(e.damonInlineArrays!==void 0&&e.damonInlineArrays.indexOf(s)>-1){U.innerHTML=P.outerHTML+'<span class="operator">: </span>[';for(let H=0,k=C.length;H<k;H++){let B=document.createElement("span"),$=C[H];if($===!0)B.textContent="true",B.className="type-boolean";else if($===!1)B.textContent="false",B.className="type-boolean";else if($===null)B.textContent="null",B.className="type-null";else if(Number.isFinite($)&&!Number.isNaN($))B.textContent=$+"",B.className="type-number";else{if(n)if(t.websiteRegex.test($)){let M=$;t.httpRegex.test($)||(M="https://"+$),B.innerHTML=Z.sanitize(`<a href="${M}">"${M}"</a>`)}else B.innerHTML=`"${$}"`;else if(t.websiteRegex.test($)){let M=$;t.httpRegex.test($)||(M="https://"+$),B.innerHTML=Z.sanitize(`<a href="${M}">"${M}"</a>`)}else B.textContent=`"${$}"`;B.className="type-string"}H!==0&&(U.innerHTML+=", "),U.appendChild(B)}U.innerHTML+="]",v.appendChild(U),v.appendChild(D),y.appendChild(v)}else U.innerHTML=P.outerHTML+'<span class="operator">: </span>[]',v.appendChild(U),v.appendChild(D),y.appendChild(v),w=="green"?c(O,D,d.concat([f]),w):c(O,D,d.concat([f]),w);else e.implicitMaps!==void 0&&e.implicitMaps.indexOf(s)>-1?U.innerHTML=P.outerHTML:U.innerHTML=P.outerHTML+'<span class="operator">: </span>{}',v.appendChild(U),v.appendChild(D),y.appendChild(v),w=="green"?c(O,D,d.concat([f]),w):c(O,D,d.concat([f]),w);else{U.innerHTML=P.outerHTML+'<span class="operator">: </span>';let H=document.createElement("span"),k=C;if(k===!0)H.textContent="true",H.className="type-boolean";else if(k===!1)H.textContent="false",H.className="type-boolean";else if(k===null)H.textContent="null",H.className="type-null";else if(Number.isFinite(k)&&!Number.isNaN(k))H.textContent=k+"",H.className="type-number";else{if(n)if(t.websiteRegex.test(k)){let B=k;t.httpRegex.test(k)||(B="https://"+k),H.innerHTML=Z.sanitize(`<a href="${B}">"${B}"</a>`)}else H.innerHTML=`"${k}"`;else if(t.websiteRegex.test(k)){let B=k;t.httpRegex.test(k)||(B="https://"+k),H.innerHTML=Z.sanitize(`<a href="${B}">"${B}"</a>`)}else H.textContent=`"${k}"`;H.className="type-string"}e.implicitNulls===void 0||e.implicitNulls.indexOf(s)==-1?U.appendChild(H):U.innerHTML=U.innerHTML.slice(0,-2),v.appendChild(U),y.appendChild(v)}f++}}}else if(Array.isArray(u)){let x=e;for(let m=0,S=d.length;m<S;m++)typeof x=="object"&&x!==null&&!Array.isArray(x)&&x instanceof Map&&x.constructor===Map&&Array.from(x.keys()).length?x=x.get(Array.from(x.keys())[d[m]]):x=x[d[m]];let p=r;for(let m=0,S=d.length;m<S;m++)typeof p=="object"&&p!==null&&!Array.isArray(p)&&p instanceof Map&&p.constructor===Map&&Array.from(p.keys()).length?p=p.get(Array.from(p.keys())[d[m]]):p=p[d[m]];for(var b=0,N=u.length;b<N;b++){let m=document.createElement("ul"),S=document.createElement("code"),T=document.createElement("li"),g="green",f;if(T.className="green-diff",typeof u[b]=="string"&&(g=u[b],T.className=u[b]+"-diff"),T.className==="red-diff"&&b<=x.length-1?b>p.length-1?f="":(b>x.length-1&&(T.className=="red-diff"?(T.className="blue-diff",T.setAttribute("aria-describedby","damonDiffBlue")):(T.className="green-diff",T.setAttribute("aria-describedby","damonDiffGreen"))),f=p[b]):(T.className==="green-diff"?(T.dataset.graphArbo=b,d.length>0&&(T.dataset.graphArbo=d.join("-")+"-"+b),T.className=""):(T.className="blue-diff",T.setAttribute("aria-describedby","damonDiffBlue")),f=x[b]),T.className==="red-diff"&&T.setAttribute("aria-describedby","damonDiffRed"),typeof f=="object"&&f!==null)if(Array.isArray(f))if(e.damonInlineArrays!==void 0&&e.damonInlineArrays.indexOf(b)>-1){S.innerHTML+="[";for(let s=0,C=f.length;s<C;s++){let w=document.createElement("span"),O=f[s];if(O===!0)w.textContent="true",w.className="type-boolean";else if(O===!1)w.textContent="false",w.className="type-boolean";else if(O===null)w.textContent="null",w.className="type-null";else if(Number.isFinite(O)&&!Number.isNaN(O))w.textContent=O+"",w.className="type-number";else{if(n)if(t.websiteRegex.test(O)){let D=O;t.httpRegex.test(O)||(D="https://"+O),w.innerHTML=Z.sanitize(`<a href="${D}">"${D}"</a>`)}else w.innerHTML=`"${O}"`;else if(t.websiteRegex.test(O)){let D=O;t.httpRegex.test(O)||(D="https://"+O),w.innerHTML=Z.sanitize(`<a href="${D}">"${D}"</a>`)}else w.textContent=`"${O}"`;w.className="type-string"}s!==0&&(S.innerHTML+=", ")}S.innerHTML+="]",T.appendChild(S),T.appendChild(m),y.appendChild(T)}else S.textContent="[]",T.appendChild(S),T.appendChild(m),y.appendChild(T),c(u[b],m,d.concat([b]),g);else S.textContent="{}",T.appendChild(S),T.appendChild(m),y.appendChild(T),c(u[b],m,d.concat([b]),g);else{let s=f;if(s===!0)S.textContent="true",S.className="type-boolean";else if(s===!1)S.textContent="false",S.className="type-boolean";else if(s===null)S.textContent="null",S.className="type-null";else if(Number.isFinite(s)&&!Number.isNaN(s))S.textContent=s+"",S.className="type-number";else{if(n)if(t.websiteRegex.test(s)){let C=s;t.httpRegex.test(s)||(C="https://"+s),S.innerHTML=Z.sanitize(`<a href="${C}">"${C}"</a>`)}else S.innerHTML=`"${s}"`;else if(t.websiteRegex.test(s)){let C=s;t.httpRegex.test(s)||(C="https://"+s),S.innerHTML=Z.sanitize(`<a href="${C}">"${C}"</a>`)}else S.textContent=`"${s}"`;S.className="type-string"}T.appendChild(S),T.appendChild(m),y.appendChild(T)}}}}else if(["red","yellow"].indexOf(A)>-1){let x=r;for(let p=0,m=d.length;p<m;p++)typeof x=="object"&&x!==null&&!Array.isArray(x)&&x instanceof Map&&x.constructor===Map?x=x.get(Array.from(x.keys())[d[p]]):x=x[d[p]];h(x,y,d,A)}}function h(u,y,d,A){if(typeof y!="object"||y==null||Array.isArray(y))throw new Error("Error List Item "+d.concat("-")+": @param { {} } list");if(typeof u=="object"&&u!==null&&!Array.isArray(u)&&u instanceof Map&&u.constructor===Map){if(y.tagName=="UL"){let x=0;for(let[p,m]of u){let S=document.createElement("ul"),T=document.createElement("code"),g=document.createElement("span"),f=document.createElement("li");if(g.className="type-key",f.className="red-diff",f.setAttribute("aria-describedby","damonDiffRed"),t.websiteRegex.test(p)){let s=p;t.httpRegex.test(p)||(s="https://"+p);let C=Z.sanitize(`<a href="${s}">${s}</a>`);g.innerHTML=C}else g.textContent=p;if(typeof m=="object"&&m!==null)if(Array.isArray(m))if(u.damonInlineArrays!==void 0&&u.damonInlineArrays.indexOf(p)>-1){T.innerHTML=g.outerHTML+'<span class="operator">: </span>[';for(let s=0,C=m.length;s<C;s++){let w=document.createElement("span"),O=m[s];if(O===!0)w.textContent="true",w.className="type-boolean";else if(O===!1)w.textContent="false",w.className="type-boolean";else if(O===null)w.textContent="null",w.className="type-null";else if(Number.isFinite(O)&&!Number.isNaN(O))w.textContent=O+"",w.className="type-number";else{if(n)if(t.websiteRegex.test(O)){let D=O;t.httpRegex.test(O)||(D="https://"+O),w.innerHTML=Z.sanitize(`<a href="${D}">"${D}"</a>`)}else w.innerHTML=`"${O}"`;else if(t.websiteRegex.test(O)){let D=O;t.httpRegex.test(O)||(D="https://"+O),w.innerHTML=Z.sanitize(`<a href="${D}">"${D}"</a>`)}else w.textContent=`"${O}"`;w.className="type-string"}s!==0&&(T.innerHTML+=", "),T.appendChild(w)}T.innerHTML+="]",f.appendChild(T),f.appendChild(S),y.appendChild(f)}else T.innerHTML=g.outerHTML+'<span class="operator">: </span>[]',f.appendChild(T),f.appendChild(S),y.appendChild(f),h(m,S,d.concat([x]),A);else u.implicitMaps!==void 0&&u.implicitMaps.indexOf(p)>-1?T.innerHTML=g.outerHTML:T.innerHTML=g.outerHTML+'<span class="operator">: </span>{}',f.appendChild(T),f.appendChild(S),y.appendChild(f),h(m,S,d.concat([x]),A);else{T.innerHTML=g.outerHTML+'<span class="operator">: </span>';let s=document.createElement("span"),C=m;if(C===!0)s.textContent="true",s.className="type-boolean";else if(C===!1)s.textContent="false",s.className="type-boolean";else if(C===null)s.textContent="null",s.className="type-null";else if(Number.isFinite(C)&&!Number.isNaN(C))s.textContent=C+"",s.className="type-number";else{if(n)if(t.websiteRegex.test(C)){let w=C;t.httpRegex.test(C)||(w="https://"+C),s.innerHTML=Z.sanitize(`<a href="${w}">"${w}"</a>`)}else s.innerHTML=`"${C}"`;else if(t.websiteRegex.test(C)){let w=C;t.httpRegex.test(C)||(w="https://"+C),s.innerHTML=Z.sanitize(`<a href="${w}">"${w}"</a>`)}else s.textContent=`"${C}"`;s.className="type-string"}u.implicitNulls===void 0||u.implicitNulls.indexOf(p)==-1?T.appendChild(s):T.innerHTML=T.innerHTML.slice(0,-2),f.appendChild(T),y.appendChild(f)}x++}}}else if(Array.isArray(u))for(var b=0,N=u.length;b<N;b++){let x=document.createElement("ul"),p=document.createElement("code"),m=document.createElement("li");if(m.className=u[b]+"-diff",m.setAttribute("aria-describedby","damonDiffRed"),typeof u[b]=="object"&&u[b]!==null)if(Array.isArray(u[b]))if(u.damonInlineArrays!==void 0&&u.damonInlineArrays.indexOf(b)>-1){p.innerHTML+="[";for(let S=0,T=u[b].length;S<T;S++){let g=document.createElement("span"),f=u[b][S];if(f===!0)g.textContent="true",g.className="type-boolean";else if(f===!1)g.textContent="false",g.className="type-boolean";else if(f===null)g.textContent="null",g.className="type-null";else if(Number.isFinite(f)&&!Number.isNaN(f))g.textContent=f+"",g.className="type-number";else{if(n)if(t.websiteRegex.test(f)){let s=f;t.httpRegex.test(f)||(s="https://"+f),g.innerHTML=Z.sanitize(`<a href="${s}">"${s}"</a>`)}else g.innerHTML=`"${f}"`;else if(t.websiteRegex.test(f)){let s=f;t.httpRegex.test(f)||(s="https://"+f),g.innerHTML=Z.sanitize(`<a href="${s}">"${s}"</a>`)}else g.textContent=`"${f}"`;g.className="type-string"}S!==0&&(p.innerHTML+=", "),p.appendChild(g)}p.innerHTML+="]",m.appendChild(p),m.appendChild(x),y.appendChild(m)}else p.textContent="[]",m.appendChild(p),m.appendChild(x),y.appendChild(m),h(u[b],x,d.concat([b]),A);else p.textContent="{}",m.appendChild(p),m.appendChild(x),y.appendChild(m),h(u[b],x,d.concat([b]),A);else{let S=u[b];if(S===!0)p.textContent="true",p.className="type-boolean";else if(S===!1)p.textContent="false",p.className="type-boolean";else if(S===null)p.textContent="null",p.className="type-null";else if(Number.isFinite(S)&&!Number.isNaN(S))p.textContent=S+"",p.className="type-number";else{if(n)if(t.websiteRegex.test(S)){let T=S;t.httpRegex.test(S)||(T="https://"+S),p.innerHTML=Z.sanitize(`<a href="${T}">"${T}"</a>`)}else p.innerHTML=`"${S}"`;else if(t.websiteRegex.test(S)){let T=S;t.httpRegex.test(S)||(T="https://"+S),p.innerHTML=Z.sanitize(`<a href="${T}">"${T}"</a>`)}else p.textContent=`"${S}"`;p.className="type-string"}m.appendChild(p),m.appendChild(x),y.appendChild(m)}}}}damonTableMapToCSV(e){let r=this,n="",t=0;for(let[l,a]of e){if(t===0&&l==="00"){n+=vt.unparse([[a]],{quotes:!0})+`
`,t++;continue}let o=Array.from(a.keys());for(let E=0,c=o.length;E<c;E++)n+=vt.unparse([[o[E]]],{quotes:!0}),E!=c-1&&(n+=",");n+=`
`,t++}return n.slice(0,-1)}damonTableMapToJSON(e){let r=this,n=`[
`,t=0;for(let[l,a]of e){if(n+="    [",t===0&&l==="00"){n+=JSON.stringify(a)+`],
`,t++;continue}let o=Array.from(a.keys());for(let E=0,c=o.length;E<c;E++)n+=JSON.stringify(o[E]),E!=c-1&&(n+=", ");n+=`],
`,t++}return n=n.slice(0,-2)+`
]`,n}csvToDamonTable(e,r=!1){let n=this,t=vt.parse(e);if(t.meta.aborted)throw new Error("CSV parsing failed");let l=t.data,a=new Map;r&&(a.headless=!0);for(let o=0,E=l.length;o<E;o++){let c=new Map;c.implicitNulls=[],a.set(o+"",c);let h=l[o];for(let u=0,y=h.length;u<y;u++)a.get(o+"").set(h[u],null),a.get(o+"").implicitNulls.push(h[u])}return n.damon.mapToDamon(a)}jsonToDamonTable(e){let r=this,n=JSON.parse(e).map(l=>JSON.stringify(l)),t=new Map;for(let l=0,a=n.length;l<a;l++){let o=new Map;o.implicitNulls=[],t.set(l+"",o);let E=JSON.parse(n[l]);for(let c=0,h=E.length;c<h;c++)t.get(l+"").set(E[c],null),t.get(l+"").implicitNulls.push(E[c])}return r.damon.mapToDamon(t)}wrapListContentsForStyling(e){let r=this;for(let n=0,t=e.length;n<t;n++){let l=document.createElement("div");for(let a=e[n].childNodes.length-1;a>=0;a--)(e[n].childNodes[a].tagName&&e[n].childNodes[a].tagName!=="UL"&&e[n].childNodes[a].tagName!=="OL"||e[n].childNodes[a].nodeType==3&&e[n].childNodes[a].data!=`
`&&e[n].childNodes[a].data!=`\r
`)&&(l.childNodes.length==0?l.appendChild(e[n].childNodes[a]):l.insertBefore(e[n].childNodes[a],l.childNodes[0]));e[n].firstElementChild?e[n].insertBefore(l,e[n].firstElementChild):e[n].appendChild(l)}}addLineNumbers(e,r,n=0){let t=this,l=r.querySelectorAll("li[data-graph-arbo]");for(let a=0,o=l.length;a<o;a++){let E=document.createElement("div");E.className="damon-line-number";let c=t.damon.damonToMap(e),h=l[a].dataset.graphArbo.split("-"),u=[];for(let y=0,d=h.length;y<d;y++)typeof c=="object"&&c!==null&&!Array.isArray(c)&&c instanceof Map&&c.constructor===Map?(u.push(Array.from(c.keys())[h[y]]),c=c.get(u[y])):(u.push(parseInt(h[y])),c=c[u[y]]);E.textContent=t.damon.getRangeFromPath(e,u)[0][0]+1+n,E.id="damonLine"+E.textContent,l[a].setAttribute("aria-labelledBy",E.id),E.style.top=r.scrollTop+l[a].firstElementChild.getBoundingClientRect().top-r.getBoundingClientRect().top+"px",r.appendChild(E)}}addTableLineNumbers(e,r,n=0){let t=this,l=r.querySelectorAll("th[data-graph-arbo]:first-child, td[data-graph-arbo]:first-child");for(let a=0,o=l.length;a<o;a++){let E=document.createElement("div");E.className="damon-line-number",E.textContent=t.damon.getRangeFromPath(e,[Array.from(t.damon.damonToMap(e).keys())[a]])[0][0]+1+n,E.id="damonLine"+E.textContent,l[a].setAttribute("aria-labelledBy",E.id),E.style.top=r.scrollTop+l[a].getBoundingClientRect().top-r.getBoundingClientRect().top+"px",r.appendChild(E)}}damonGraphMapToMermaid(e,r=0){let n=this,t="";if(typeof e!="object"||e===null||Array.isArray(e)||!(e instanceof Map)||e.constructor!==Map)throw new Error("Error: input does not conform to Map type");let l=0;for(let[a,o]of e){if(l++,o===null){t+=a+`\r
`;continue}if(typeof o!="object"||Array.isArray(o)||!(o instanceof Map)||o.constructor!==Map)throw new Error("Error line "+n.damon.mapIndexToLine(e,l)+r+": value does not conform to Map type");if(Array.from(o.keys()).length)for(let[E,c]of o){if(l++,typeof c!="string")throw new Error("Error line "+n.damon.mapIndexToLine(e,l)+r+": value does not conform to String type");let h=c.split(",");for(let u=0,y=h.length;u<y;u++)u==0,E.length?t+=a+" -- "+E+" --> "+h[u]+`\r
`:t+=a+" --> "+h[u]+`\r
`}else t+=a+`\r
`}return t.slice(0,-2)}}});var qr=Oe((ei,Vr)=>{var jn=Et();Vr.exports=(function(i){i.editor.addEventListener("focusin",e),i.editor.addEventListener("focusout",r),i.gutter.addEventListener("click",n),document.addEventListener("mousedown",l),document.addEventListener("mousemove",a),document.addEventListener("mouseup",o),document.addEventListener("selectionchange",E),i.textarea.addEventListener("beforeinput",c),i.textarea.addEventListener("keydown",h),i.textarea.addEventListener("cut",u),i.textarea.addEventListener("copy",y),i.textarea.addEventListener("paste",d);function e(x){i.utils.addDataState(i.editor,"focused")}function r(x){i.editor.contains(x.target)||i.utils.removeDataState(i.editor,"focused")}function n(x){(Array.from(i.gutter.children).indexOf(x.target)>-1||Array.from(i.gutter.children).indexOf(x.target.parentNode)>-1)&&i.setCarretAt(parseInt(x.target.textContent.trim())-1)}var t;function l(x){if(x.target==i.container){t=x.target,x.preventDefault();let p=i.gutter.children,m="0";for(let S=0,T=p.length;S<T;S++)x.clientY>p[S].getBoundingClientRect().y&&(m=p[S].textContent.trim());m-1<0&&(m=1),i.setCarretAt(m-1),i.textarea.focus()}}function a(x){if(t==i.container&&x.buttons==1){let p=i.gutter.children,m="0";for(let S=0,T=p.length;S<T;S++)x.clientY>p[S].getBoundingClientRect().y&&(m=p[S].textContent.trim());i.textarea.focus(),i.textarea.setSelectionRange(i.textarea.value.split(`
`).slice(0,m).join().length,i.textarea.value.length,"backward")}}function o(x){t==i.container&&x.target==i.textarea&&(i.textarea.selectionEnd=i.textarea.value.length,i.textarea.selectionStart=i.textarea.value.length,i.textarea.focus()),t=void 0}function E(x){document.activeElement===i.textarea&&(i.updateCaret(),i.updateCurrentLine(),i.updateHorizontalScroll(),i.lastSelection=i.getTextareaSelection())}function c(x){i.lastTextareaValue=i.textarea.value}function h(x){if(!x.ctrlKey&&!x.shiftKey&&!x.altKey){if(x.key==" "&&i.textarea.selectionStart==i.textarea.selectionEnd&&(!/\n/.test(i.textarea.value.slice(0,i.textarea.selectionStart))&&(/ +$/.test(i.textarea.value.slice(0,i.textarea.selectionStart))||i.textarea.selectionStart===0)||/\n +$/.test(i.textarea.value.slice(0,i.textarea.selectionStart))||i.textarea.selectionStart<i.textarea.value.length&&(/\n +\n$/.test(i.textarea.value.slice(0,i.textarea.selectionStart+1))||/\n$/.test(i.textarea.value.slice(0,i.textarea.selectionStart)))||i.textarea.value.length==i.textarea.selectionStart&&(/\n +$/.test(i.textarea.value)||/\n$/.test(i.textarea.value)))){x.preventDefault();let p=i.textarea.selectionStart+4,m=i.textarea.value.slice(0,i.textarea.selectionStart)+"    "+i.textarea.value.slice(i.textarea.selectionEnd);i.setTextarea(m,p),A()}if(x.key=="Enter"){let p=i.textarea.value,m=p.split(`
`),S=i.getSelectionStartCoordinates(),T=S[0],g=S[1],f=m[T];if(/^    /.test(f)){if(x.preventDefault(),g%4!==0&&g<f.match(/^(    )+/)[0].length){for(let D=g;0<=D;D--)if(D%4==0){i.textarea.selectionStart==i.textarea.selectionEnd&&(i.textarea.selectionEnd=m.slice(0,T).join().length+D),i.textarea.selectionStart=m.slice(0,T).join().length+D,g=D;break}}let s=0;g>0&&(s=f.slice(0,g).match(/^(    )+/)[0].length);let C=i.textarea.selectionStart,w=i.textarea.value.slice(i.textarea.selectionEnd);w.split(`
`)[0].trim()==""&&(w=`
`+w.split(`
`).slice(1).join(`
`));let O=i.textarea.value.slice(0,i.textarea.selectionStart)+`
`+" ".repeat(s)+w;i.setTextarea(O,C+s+1),A()}}}else if(!x.ctrlKey&&x.shiftKey&&!x.altKey)x.key==" "&&i.textarea.selectionStart==i.textarea.selectionEnd;else if(x.ctrlKey&&!x.shiftKey&&!x.altKey){if(x.key=="Backspace"){let p=i.textarea.value.split(`
`),m=i.getSelectionStartCoordinates(),S=p[m[0]],T=S.slice(0,m[1]);if(i.textarea.selectionEnd==i.textarea.selectionStart&&/^ +$/.test(T)){x.preventDefault();let g=0;T.length%4==0?(p[m[0]]=S.slice(4),g=4):(p[m[0]]=S.slice(T.length%4),g=T.length%4),i.setTextarea(p.join(`
`)),A(),i.setCarretAt(m[0],m[1]-g)}}if(x.key==" "){let p=i.textarea.value.slice(0,i.textarea.selectionStart)+"	"+i.textarea.value.slice(i.textarea.selectionEnd);i.setTextarea(i.formatIndentation(p),i.textarea.selectionEnd+1),A()}if(x.key=="]"){x.preventDefault();let p=i.textarea.value.split(`
`),m=i.textarea.value.slice(0,i.textarea.selectionStart).split(`
`).length-1,S=i.textarea.value.slice(0,i.textarea.selectionEnd).split(`
`).length-1,T=i.textarea.selectionStart+4,g=i.textarea.selectionEnd+4*(S-m+1);for(let f=0,s=p.length;f<s;f++)f>=m&&f<=S&&(p[f]="    "+p[f]);i.setTextarea(p.join(`
`),T,g),A()}if(x.key=="["){let p=i.textarea.value,m=i.textarea.value.split(`
`),S=i.textarea.value.slice(0,i.textarea.selectionStart).split(`
`).length-1,T=i.textarea.value.slice(0,i.textarea.selectionEnd).split(`
`).length-1,g=i.textarea.selectionStart,f=i.textarea.selectionEnd;for(let s=0,C=m.length;s<C;s++)s>=S&&s<=T&&m[s].startsWith("    ")&&(s==S&&(g-=4),f-=4,m[s]=m[s].slice(4));i.setTextarea(m.join(`
`),g,f),A()}if(x.key=="Enter"){let p=i.textarea.value.split(`
`),m=i.getCurrentLine();m==p.length-1?i.setTextarea(p.join(`
`)+`
`):i.setTextarea(p.slice(0,m+1).join(`
`)+`

`+p.slice(m+1).join(`
`)),A(),i.setCarretAt(m+1)}if(x.key=="z"&&(x.preventDefault(),i.historyPosition>1)){i.historyPosition-=1;let p=i.history[i.historyPosition-1];i.setTextarea(p[0],p[1]),i.update(),i.virtualScroller.inputHandler(!0),i.textarea.blur(),i.textarea.focus()}if(x.key=="y"&&(x.preventDefault(),i.historyPosition<i.history.length)){i.historyPosition+=1;let p=i.history[i.historyPosition-1];i.setTextarea(p[0],p[1]),i.update(),i.virtualScroller.inputHandler(!0),i.textarea.blur(),i.textarea.focus()}}else if(!x.ctrlKey&&x.shiftKey&&x.altKey)x.key=="f"&&i.setTextarea(i.formatIndentation(i.textarea.value),i.textarea.selectionEnd);else if(!x.ctrlKey&&!x.shiftKey&&x.altKey){if(x.key=="ArrowDown")if(i.getSelectionStartCoordinates()[0]==i.getSelectionEndCoordinates()[0]){let p=i.textarea.value.split(`
`),m=i.getCurrentLine(),S=p[i.getCurrentLine()].slice();if(i.getCurrentLine()!==p.length){let T=p[i.getCurrentLine()+1].slice();p[i.getCurrentLine()]=T,p[i.getCurrentLine()+1]=S,i.setTextarea(p.join(`
`)),A(),i.setCarretAt(m+1)}}else{let p=i.textarea.value.split(`
`),m=i.getSelectionStartCoordinates()[0],S=i.getSelectionEndCoordinates()[0];if(S<m&&(m=i.getSelectionEndCoordinates()[0],S=i.getSelectionStartCoordinates()[0]),S!=p.length){let T=p.slice(m,S+1),g=p[S+1].slice();p[m]=g;for(let f=m,s=f+T.length;f<s;f++)p[f+1]=T[f-m];S<m?i.setTextarea(p.join(`
`),i.textarea.selectionEnd+g.length+1,i.textarea.selectionStart+g.length+1):i.setTextarea(p.join(`
`),i.textarea.selectionStart+g.length+1,i.textarea.selectionEnd+g.length+1),A()}}else if(x.key=="ArrowUp")if(i.getSelectionStartCoordinates()[0]==i.getSelectionEndCoordinates()[0]){let p=i.textarea.value.split(`
`),m=i.getCurrentLine(),S=p[i.getCurrentLine()].slice();if(i.getCurrentLine()!==0){let T=p[i.getCurrentLine()-1].slice();p[i.getCurrentLine()]=T,p[i.getCurrentLine()-1]=S,i.setTextarea(p.join(`
`)),A(),i.setCarretAt(m-1)}}else{let p=i.textarea.value.split(`
`),m=i.getSelectionStartCoordinates()[0],S=i.getSelectionEndCoordinates()[0];if(S<m&&(m=i.getSelectionEndCoordinates()[0],S=i.getSelectionStartCoordinates()[0]),m!=0){let T=p.slice(m,S+1),g=p[m-1].slice();p[S]=g;for(let f=m,s=f+T.length;f<s;f++)p[f-1]=T[f-m];S<m?i.setTextarea(p.join(`
`),i.textarea.selectionEnd-g.length-1,i.textarea.selectionStart-g.length-1):i.setTextarea(p.join(`
`),i.textarea.selectionStart-g.length-1,i.textarea.selectionEnd-g.length-1),A()}}}i.debounceLint()}function u(x){if(i.textarea.selectionStart==i.textarea.selectionEnd){x.preventDefault();let p=i.textarea.value.split(`
`),m=i.getCurrentLine(),S=p.slice(0,m).join(`
`).length,T=S+p[m].length+1;i.textarea.setSelectionRange(S,T),i.lastTextareaValue=i.textarea.value,document.execCommand("cut"),A(),b()}}function y(x){if(i.textarea.selectionStart==i.textarea.selectionEnd){x.preventDefault();let p=i.textarea.value.split(`
`),m=i.getCurrentLine(),S=p.slice(0,m).join(`
`).length,T=S+p[m].length+1;i.textarea.setSelectionRange(S,T),document.execCommand("copy")}}function d(x){x.preventDefault();let p=x.clipboardData.getData("text").replace(new RegExp(/\r/g),""),m=i.textarea.value.slice(0,i.textarea.selectionStart),S=i.textarea.value.slice(i.textarea.selectionEnd),T=m+p+S,g=i.textarea.selectionStart+p.length;if(m+S==""||i.textarea.selectionStart==0&&i.textarea.selectionEnd==T.length-1)try{let U=JSON.parse(T);if(Array.isArray(U)&&U.map(P=>Array.isArray(U)).indexOf(!1)==-1&&U.map(P=>P.map(v=>!Array.isArray(v)&&(typeof P!="object"||P==null)).indexOf(!1)==-1).indexOf(!1)==-1)i.setTextarea(i.damonUtils.jsonToDamonTable(T));else{let P=i.damon.jsonToMap(T);P.headless=!0,i.setTextarea(i.damon.mapToDamon(P))}A(),b();return}catch{try{i.damon.damonToMap(T)}catch{let v=T,H=/\r\n/.test(v)?`\r
`:`
`,k=v.split(H);if(H==`
`&&/\\*\n/.test(v)){if(/[^\\]\\(\\\\)*\n/.test(v)){let M=v.split(/[^\\]\\(\\\\)*\n/)[0].split(`
`).length,R=new Error("Error line "+M+": oddly escaped newline");console.log(R)}k=v.split("").reverse().join("").split(/\n/).map(M=>M.split("").reverse().join("")).reverse()}try{i.setTextarea(i.damonUtils.csvToDamonTable(T)),A(),b();return}catch(B){console.log(B)}}}let f=T.split(`
`),s=g,C=0,w=0;for(let U=0,P=f.length;U<P;U++)if(C+f[U].length+U<s)C+=f[U].length;else{C+=U,w=U;break}let O=[w,g-C],D=f[w].slice(0);if(T=i.formatIndentation(T),f=T.split(`
`),i.textarea.value!==T){let U=f.slice(0,w+1).join(`
`).length-D.length+O[1];i.setTextarea(T,U),A(),b()}}i.textarea.addEventListener("input",A),i.editor.addEventListener("scroll",b);function A(){document.activeElement==i.textarea&&(i.update(),i.debounceHistoryUpdate(),i.updateCurrentLine(),i.updateHorizontalScroll(),i.updateCaret(),i.debounceLint())}function b(x){i.virtualScroller.scrollHandler()}window.spaceResizeTimeout=null;function N(x){console.log("B"),spaceResizeTimeout&&clearTimeout(spaceResizeTimeout),window.spaceResizeTimeout=setTimeout(function(){let p=i.editor.scrollTop;i.gutter.innerHTML="",i.overlay.firstElementChild.innerHTML="",i.initialized=!1,i.virtualScroller.inputHandler(),i.initialized=!0,i.editor.scrollTop=p},100)}})});var Yr=Oe((ri,Wr)=>{var Rt=Vt(),Un=Tr(),Pn=Et(),Bn=Gr();Wr.exports=class{constructor(e,r,n){let t=this;t.dom=e,t.innerHTML="",t.editor={},t.gutter={},t.container={},t.overlay={},t.textarea={},t.caretPadding={},t.caret={},t.statusBar={},t.copyButton={},t.diffButton={},t.prism=r,t.indentation="    ",t.currentLine=0,t.history=[],t.historyPosition=0,t.historyUpdateTimeoutId,t.lintTimeoutId,t.lastTextareaValue="",t.lastSelection="",t.initialized=!1,t.virtualScroller={},t.damon=new Un,t.damonUtils=new Bn(t.damon),t.utils=Rt}init(){let e=this;e.statusBarHTML=Rt.html`
<div>
    Spaces: <a href="https://github.com/adrianturcev/space/blob/master/bindings.md"><kbd>SPACE</kbd></a>
</div>
<a href="https://github.com/adrianturcev/damon/blob/master/language_reference.md">
    DAMON
    <svg
    viewBox="0 0 24 24"
    xmlns="http://www.w3.org/2000/svg">
        <title>help-circle</title>
        <circle
            style="fill:#FEFEFE;stroke-width:1.04312;fill-opacity:1"
            cx="12"
            cy="12"
            r="9.6854191" />
        <path
            fill="#FEFEFE"
            d="M15.07,11.25L14.17,12.17C13.45,12.89 13,13.5 13,15H11V14.5C11,13.39 11.45,12.39 12.17,11.67L13.41,10.41C13.78,10.05 14,9.55 14,9C14,7.89 13.1,7 12,7A2,2 0 0,0 10,9H8A4,4 0 0,1 12,5A4,4 0 0,1 16,9C16,9.88 15.64,10.67 15.07,11.25M13,19H11V17H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z"
            style="fill:#4169e1;fill-opacity:1" />
    </svg>
</a>
<button class="space-copyButton">
    JSON
    <svg
        viewBox="0 0 24 24"
        xmlns="http://www.w3.org/2000/svg">
        <title>content-copy</title>
        <path
            fill="#FEFEFE"
            d="M 4,21 H 15 V 7 H 4 M 4,5 h 11 a -2,2 0 0 1 2,2 v 14 a -2,2 0 0 1 -2,2 H 4 A -2,2 0 0 1 2,21 V 7 A -2,2 0 0 1 4,5 M 7,1 h 12 a -2,2 0 0 1 2,2 V 17 H 19 V 3 H 7 Z"/>
    </svg>
</button>
<button class="space-diffButton">
    Diff
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <title>set-left-right</title>
        <path
            fill="#FEFEFE"
            d="M9,5C10.04,5 11.06,5.24 12,5.68C12.94,5.24 13.96,5 15,5A7,7 0 0,1 22,12A7,7 0 0,1 15,19C13.96,19 12.94,18.76 12,18.32C11.06,18.76 10.04,19 9,19A7,7 0 0,1 2,12A7,7 0 0,1 9,5M9,12C9,14.22 10.21,16.16 12,17.2C13.79,16.16 15,14.22 15,12C15,9.78 13.79,7.84 12,6.8C10.21,7.84 9,9.78 9,12Z" />
    </svg>
</button>`,e.innerHTML=Rt.html`
<div class="space-editor" data-state="js-off">
    <div class="space-gutter"></div>
    <div class="space-container">
<pre class="space-dummyTextarea"><span class="space-caretPadding"></span><span class="space-caret">&nbsp;</span></pre>
        <pre class="space-overlay" aria-hidden="true" tabindex="-1">
            <code class="language-damon"></code>
        </pre>
        <textarea
            class="space-textarea"
            placeholder="Paste JSON/CSV or write DAMON"
            spellcheck="false"
            aria-labelledby=""
            aria-controls="space-statusBar0"
            maxlength="500000">
        </textarea>
        <ul class="space-suggestions"></ul>
    </div>
</div>
<div class="space-statusBar" id="space-statusBar0" role="log" aria-live="polite">${e.statusBarHTML}</div>
        `;let r="";e.dom.innerHTML!==e.innerHTML&&(e.dom.getElementsByTagName("textarea")[0]!==void 0&&(r=e.dom.getElementsByTagName("textarea")[0].innerHTML),e.dom.innerHTML=e.innerHTML),e.editor=e.dom.getElementsByClassName("space-editor")[0],e.gutter=e.dom.getElementsByClassName("space-gutter")[0],e.container=e.dom.getElementsByClassName("space-container")[0],e.overlay=e.dom.getElementsByClassName("space-overlay")[0],e.textarea=e.dom.getElementsByClassName("space-textarea")[0],e.textarea.innerHTML=r,e.caretPadding=e.dom.getElementsByClassName("space-caretPadding")[0],e.caret=e.dom.getElementsByClassName("space-caret")[0],e.statusBar=e.dom.getElementsByClassName("space-statusBar")[0],e.copyButton=e.dom.getElementsByClassName("space-copyButton")[0],e.diffButton=e.dom.getElementsByClassName("space-copyButton")[0],e.virtualScroller=new Pn(this),e.editor.dataset.state="",e.textarea.value=e.formatIndentation(e.textarea.value.replaceAll(/\r/g,""));let n=e.prism.languages.damon;e.prism.hooks.run("before-highlight",{grammar:n}),e.historyUpdate(),e.routes=qr()(this),e.update(),e.updateCurrentLine(),e.lastTextareaValue=e.textarea.value,e.initialized=!0,e.lint()}update(){let e=this;e.initialized&&e.lastTextareaValue==e.textarea.value||(e.gutter.children.length==0?e.virtualScroller.init(0):e.virtualScroller.inputHandler(),e.initialized&&(e.lastTextareaValue=e.textarea.value))}updateHorizontalScroll(){let e=this;if(document.activeElement==e.textarea){let r=e.textarea.value.split(`
`),n=0,t=e.gutter.children[0].children[0].getBoundingClientRect().width;for(let l=0,a=r.length;l<a&&n+r[l].length<e.textarea.selectionEnd;l++)n+=r[l].length+1;(e.textarea.selectionEnd-n)*t-e.gutter.clientWidth<=e.editor.scrollLeft&&(e.editor.scrollLeft=0)}}getCurrentLine(){let e=this,r=e.textarea.value.split(`
`),n=0,t=0,l=0;(e.textarea.selectionDirection=="forward"||e.textarea.selectionStart==e.textarea.selectionEnd)&&(n=e.textarea.selectionEnd),e.textarea.selectionDirection=="backward"&&(n=e.textarea.selectionStart);for(let a=0,o=r.length;a<o;a++)if(t+r[a].length+a<n)t+=r[a].length;else{l=a;break}return l}getSelectionStartCoordinates(){let e=this,r=e.textarea.value.split(`
`),n=e.textarea.selectionStart,t=0,l=0;for(let a=0,o=r.length;a<o;a++)if(t+r[a].length+a<n)t+=r[a].length;else{t+=a,l=a;break}return[l,e.textarea.selectionStart-t]}getSelectionEndCoordinates(){let e=this,r=e.textarea.value.split(`
`),n=e.textarea.selectionEnd,t=0,l=0;for(let a=0,o=r.length;a<o;a++)if(t+r[a].length+a<n)t+=r[a].length;else{t+=a,l=a;break}return[l,e.textarea.selectionEnd-t]}setCarretAt(e,r){let n=this;r==null&&(r=n.textarea.value.split(`
`)[e].length);let t=Math.min(r,n.textarea.value.split(`
`)[e].length);e==0?n.textarea.selectionStart=t:n.textarea.selectionStart=n.textarea.value.split(`
`).slice(0,e).reduce(function(l,a){return l+a}).length+e+t,n.textarea.selectionEnd=n.textarea.selectionStart,n.textarea.focus()}getTextareaSelection(){let e=this;return e.textarea.selectionStart<e.textarea.selectionEnd?e.textarea.value.slice(e.textarea.selectionStart,e.textarea.selectionEnd):e.textarea.selectionStart<e.textarea.selectionEnd?e.textarea.value.slice(e.textarea.selectionEnd,e.textarea.selectionStart):void 0}updateCurrentLine(e){let r=this,n=r.currentLine;if(r.currentLine=r.getCurrentLine(),n!=r.currentLine||!r.initialized||e||r.lastSelection!=null&&r.getTextareaSelection()==null){for(let l=0,a=r.gutter.children.length;l<a;l++)r.gutter.children[l].classList.remove("currentLine"),r.gutter.children[l].classList.remove("selectionEnd");r.gutter.children[r.currentLine-r.gutter.children[0].textContent.trim()+1]&&(r.textarea.selectionEnd==r.textarea.selectionStart?r.gutter.children[r.currentLine-r.gutter.children[0].textContent.trim()+1].classList.add("currentLine"):r.gutter.children[r.currentLine-r.gutter.children[0].textContent.trim()+1].classList.add("selectionEnd"))}}historyUpdate(){let e=this;if(e.history.length==0||e.textarea.value!=e.history[e.historyPosition-1][0]){let n=function(t,l){return t+l[0]+l[1]};var r=n;if(e.history.length==1){let t=e.textarea.selectionStart-(e.textarea.value.length-e.history[0][0].length);e.history[0][0].length>e.textarea.value.length&&(t=e.textarea.selectionStart-(e.history[0][0].length-e.textarea.value.length)),e.history.push([e.history[0][0],t]),e.historyPosition++}if(e.historyPosition!=e.history.length&&(e.history=e.history.slice(0,e.historyPosition)),e.history.push([e.textarea.value,e.textarea.selectionStart]),e.history.reduce(n,"").length*4>1e8){let t=0;for(;e.history.reduce(n,"").length*4>1e8;)t++,e.history.shift();e.historyPosition-=t}e.historyPosition++}}debounceHistoryUpdate(){var e=this,r=arguments;clearTimeout(this.historyUpdateTimeoutId),this.historyUpdateTimeoutId=setTimeout(function(){e.historyUpdateTimeoutId=null,e.historyUpdate.apply(e,r)},200)}formatIndentation(e){let r=this,n=e.split(`
`);for(let t=0,l=n.length;t<l;t++){if(/^ *(\t)+/.test(n[t])){let a=n[t].match(/^ *(\t)+/)[0].length;for(let o=0,E=a;o<E;o++)n[t]=n[t].replace("	","    ")}if(/^( )+/.test(n[t])&&n[t].match(/^( )+/)[0].length%4!==0){for(let a=n[t].match(/^( )+/)[0].length;0<=a;a--)if(a%4==0){n[t].trimStart(),n[t]=" ".repeat(a)+n[t];break}}}return n.join(`
`)}formatHyphens(e){let r=this,n=e.split(`
`);for(let t=0,l=n.length;t<l;t++)if(!/^ *- /.test(n[t])){let a="";/^ /.test(n[t])&&(a=n[t].match(/^( )+/)[0]),n[t]=a+"- "+n[t].slice(a.length)}return n.join(`
`)}updateCaret(){let e=this;e.textarea.selectionDirection=="forward"||e.textarea.selectionStart==e.textarea.selectionEnd?e.caretPadding.textContent=e.textarea.value.slice(0,e.textarea.selectionEnd):e.caretPadding.textContent=e.textarea.value.slice(0,e.textarea.selectionStart)}setTextarea(e,r,n=r){let t=this;t.lastTextareaValue=t.textarea.value,t.textarea.value=e,r!==null&&t.textarea.setSelectionRange(r,n)}lint(){let e=this;try{e.damon.damonToMap(e.textarea.value),e.statusBar.innerHTML=e.statusBarHTML}catch(r){r.language=="JSON"?e.statusBar.innerHTML="<span>( ! ) Error line number "+r.line+": "+r.type+" not JSON-compliant</span>"+e.statusBarHTML:e.statusBar.innerHTML="<span>( ! ) "+r.message+"</span>"+e.statusBarHTML,console.error(r)}e.copyButton=e.dom.getElementsByClassName("space-copyButton")[0],e.copyButton.addEventListener("click",function(r){let n=document.createElement("textarea");n.style.opacity="0";try{n.value=e.damon.damonToJSON(e.textarea.value)}catch{setTimeout(function(){e.copyButton.classList.remove("error")},1100),e.copyButton.classList.add("error");return}document.body.appendChild(n),n.focus(),n.select();try{document.execCommand("copy")&&(setTimeout(function(){e.copyButton.classList.remove("success")},1100),e.copyButton.classList.add("success"))}catch(t){console.error(t.name,t.message)}document.body.removeChild(n)}),e.diffButton=e.dom.getElementsByClassName("space-diffButton")[0],e.diffButton.addEventListener("click",function(r){try{e.damon.damonToMap(e.textarea.value)}catch{alert("Invalid initial value.");return}e.diff(r)})}diff(e){let r=this;if(r.dom.getElementsByTagName("form").length||r.dom.getElementsByClassName("space-diff").length)return;let n=document.createElement("form"),t=document.createElement("div"),l=document.createElement("input"),a=document.createElement("label"),o=document.createElement("textarea"),E=document.createElement("button");l.type="checkbox",l.id="spaceDiffSortCheckbox",l.name="sort",a.textContent="Sort",a.setAttribute("for","spaceDiffSortCheckbox"),o.className="space-diffTextarea",n.style.position="absolute",o.placeholder="Paste DAMON or JSON.",E.textContent="Close",E.addEventListener("click",function(c){n.remove()}),t.appendChild(l),t.appendChild(a),n.appendChild(t),n.appendChild(o),n.appendChild(E),r.dom.appendChild(n),o.focus(),o.addEventListener("paste",function(c){let h=r.formatIndentation(c.clipboardData.getData("text").replace(new RegExp(/\r/g),"")),u="",y,d;try{y=r.damon.damonToMap(r.textarea.value)}catch{n.remove(),alert("Invalid initial value.");return}try{JSON.parse(h),d=r.damon.jsonToMap(h)}catch{try{d=r.damon.damonToMap(h)}catch{n.remove(),alert("Invalid clipboard value.");return}}l.checked&&(d=r.damonUtils.sortMap(y,d)),u=r.damonUtils.renderDiff(y,d);let A=document.createElement("div"),b=document.createElement("button");A.className="space-diff",A.innerHTML=u.innerHTML,b.textContent="Close",r.damonUtils.wrapListContentsForStyling(A.getElementsByTagName("li")),A.appendChild(b),r.dom.append(A),b.addEventListener("click",function(N){A.remove()}),r.damonUtils.addLineNumbers(r.textarea.value,A),n.remove()})}debounceLint(){var e=this,r=arguments;clearTimeout(this.lintTimeoutId),this.lintTimeoutId=setTimeout(function(){e.lintTimeoutId=null,e.lint.apply(e,r)},200)}}});(function(){window.Space=Yr()})();})();
/*! Bundled license information:

dompurify/dist/purify.cjs.js:
  (*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE *)

papaparse/papaparse.min.js:
  (* @license
  Papa Parse
  v5.5.3
  https://github.com/mholt/PapaParse
  License: MIT
  *)
*/
