(()=>{var zi=Object.create;var Ze=Object.defineProperty;var qi=Object.getOwnPropertyDescriptor;var Wi=Object.getOwnPropertyNames;var Gi=Object.getPrototypeOf,Vi=Object.prototype.hasOwnProperty;var Yi=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var Ki=(t,e)=>()=>(t&&(e=t(t=0)),e);var M=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Xi=(t,e)=>{for(var r in e)Ze(t,r,{get:e[r],enumerable:!0})},Fr=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Wi(e))!Vi.call(t,i)&&i!==r&&Ze(t,i,{get:()=>e[i],enumerable:!(n=qi(e,i))||n.enumerable});return t};var St=(t,e,r)=>(r=t!=null?zi(Gi(t)):{},Fr(e||!t||!t.__esModule?Ze(r,"default",{value:t,enumerable:!0}):r,t)),Zi=t=>Fr(Ze({},"__esModule",{value:!0}),t);var Mr=M((ba,Hr)=>{Hr.exports={nil(t){return t===null||typeof t>"u"},hack(t,e,r){return t.slice(e,r+1)},pick(t,e){return t.filter(e)},prune(t,e){return t.filter(function(r){return!e(r)})},check(t,e){return t.every(e)},escape(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},html(t){let e=t[0],r=Math.max(t.length,arguments.length-1);for(let n=1;n<t.length;n++)e+=arguments[n],e+=t[n];return e},addDataState(t,e){let r=[];t.dataset.state&&t.dataset.state.indexOf(" ")>-1?r=t.dataset.state.split(" "):r=[t.dataset.state],r.indexOf(e)===-1&&(r.push(e),t.dataset.state=r.join(" "))},removeDataState(t,e){let r=[];t.dataset.state&&t.dataset.state.indexOf(" ")>-1?r=t.dataset.state.split(" "):r=[t.dataset.state],t.dataset.state=r.filter(n=>n!==e).join(" ")},replaceDataState(t,e,r){this.removeDataState(t,e),this.addDataState(t,r)},toggleDataState(t,e){t.dataset.state.split(" ").indexOf(e)==-1?this.addDataState(t,e):this.removeDataState(t,e)},ajaxGet(t,e,r,n){var i=new XMLHttpRequest;i.open("GET",t),i.addEventListener("load",function(){if(i.status>=200&&i.status<400)if(r){var l={};try{l=JSON.parse(i.responseText)}catch{console.error("Get request returned invalid JSON.")}n===void 0?e(l):e.apply(n,[l])}else n===void 0?e(i.responseText):e.apply(n,[i.responseText]);else console.error(i.status+" "+i.statusText+" "+t)}),i.addEventListener("error",function(){console.error("Network error trying to access: "+t)}),i.send(null)},ajaxPost(t,e,r,n,i,l,a){var o=new XMLHttpRequest;o.open("POST",t),o.addEventListener("load",function(){o.status>=200&&o.status<400?l===void 0?r(o):r.apply(l,[o]):(a===void 0?n(o):n.apply(a,[o]),console.error(o.status+" "+o.statusText+" "+t))}),o.addEventListener("error",function(){console.error("Network error trying to access: "+t)}),i&&(o.setRequestHeader("Content-Type","application/json"),e=JSON.stringify(e)),o.send(e)}}});var on={};Xi(on,{__addDisposableResource:()=>ln,__assign:()=>Qe,__asyncDelegator:()=>Xr,__asyncGenerator:()=>Kr,__asyncValues:()=>Zr,__await:()=>ve,__awaiter:()=>zr,__classPrivateFieldGet:()=>tn,__classPrivateFieldIn:()=>nn,__classPrivateFieldSet:()=>rn,__createBinding:()=>et,__decorate:()=>Br,__disposeResources:()=>an,__esDecorate:()=>Qi,__exportStar:()=>Wr,__extends:()=>$r,__generator:()=>qr,__importDefault:()=>en,__importStar:()=>jr,__makeTemplateObject:()=>Qr,__metadata:()=>Jr,__param:()=>Ur,__propKey:()=>el,__read:()=>Tt,__rest:()=>kr,__runInitializers:()=>ji,__setFunctionName:()=>tl,__spread:()=>Gr,__spreadArray:()=>Yr,__spreadArrays:()=>Vr,__values:()=>je,default:()=>il});function $r(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");_t(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function kr(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Br(t,e,r,n){var i=arguments.length,l=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(l=(i<3?a(l):i>3?a(e,r,l):a(e,r))||l);return i>3&&l&&Object.defineProperty(e,r,l),l}function Ur(t,e){return function(r,n){e(r,n,t)}}function Qi(t,e,r,n,i,l){function a(L){if(L!==void 0&&typeof L!="function")throw new TypeError("Function expected");return L}for(var o=n.kind,c=o==="getter"?"get":o==="setter"?"set":"value",f=!e&&t?n.static?t:t.prototype:null,p=e||(f?Object.getOwnPropertyDescriptor(f,n.name):{}),s,g=!1,y=r.length-1;y>=0;y--){var m={};for(var d in n)m[d]=d==="access"?{}:n[d];for(var d in n.access)m.access[d]=n.access[d];m.addInitializer=function(L){if(g)throw new TypeError("Cannot add initializers after decoration has completed");l.push(a(L||null))};var b=(0,r[y])(o==="accessor"?{get:p.get,set:p.set}:p[c],m);if(o==="accessor"){if(b===void 0)continue;if(b===null||typeof b!="object")throw new TypeError("Object expected");(s=a(b.get))&&(p.get=s),(s=a(b.set))&&(p.set=s),(s=a(b.init))&&i.unshift(s)}else(s=a(b))&&(o==="field"?i.unshift(s):p[c]=s)}f&&Object.defineProperty(f,n.name,p),g=!0}function ji(t,e,r){for(var n=arguments.length>2,i=0;i<e.length;i++)r=n?e[i].call(t,r):e[i].call(t);return n?r:void 0}function el(t){return typeof t=="symbol"?t:"".concat(t)}function tl(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function Jr(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function zr(t,e,r,n){function i(l){return l instanceof r?l:new r(function(a){a(l)})}return new(r||(r=Promise))(function(l,a){function o(p){try{f(n.next(p))}catch(s){a(s)}}function c(p){try{f(n.throw(p))}catch(s){a(s)}}function f(p){p.done?l(p.value):i(p.value).then(o,c)}f((n=n.apply(t,e||[])).next())})}function qr(t,e){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},n,i,l,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(f){return function(p){return c([f,p])}}function c(f){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,f[0]&&(r=0)),r;)try{if(n=1,i&&(l=f[0]&2?i.return:f[0]?i.throw||((l=i.return)&&l.call(i),0):i.next)&&!(l=l.call(i,f[1])).done)return l;switch(i=0,l&&(f=[f[0]&2,l.value]),f[0]){case 0:case 1:l=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!l||f[1]>l[0]&&f[1]<l[3])){r.label=f[1];break}if(f[0]===6&&r.label<l[1]){r.label=l[1],l=f;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(f);break}l[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(p){f=[6,p],i=0}finally{n=l=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function Wr(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&et(e,t,r)}function je(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Tt(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,l=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)l.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return l}function Gr(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Tt(arguments[e]));return t}function Vr(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var l=arguments[e],a=0,o=l.length;a<o;a++,i++)n[i]=l[a];return n}function Yr(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,l;n<i;n++)(l||!(n in e))&&(l||(l=Array.prototype.slice.call(e,0,n)),l[n]=e[n]);return t.concat(l||Array.prototype.slice.call(e))}function ve(t){return this instanceof ve?(this.v=t,this):new ve(t)}function Kr(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,l=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(y){return function(m){return Promise.resolve(m).then(y,s)}}function o(y,m){n[y]&&(i[y]=function(d){return new Promise(function(b,L){l.push([y,d,b,L])>1||c(y,d)})},m&&(i[y]=m(i[y])))}function c(y,m){try{f(n[y](m))}catch(d){g(l[0][3],d)}}function f(y){y.value instanceof ve?Promise.resolve(y.value.v).then(p,s):g(l[0][2],y)}function p(y){c("next",y)}function s(y){c("throw",y)}function g(y,m){y(m),l.shift(),l.length&&c(l[0][0],l[0][1])}}function Xr(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,l){e[i]=t[i]?function(a){return(r=!r)?{value:ve(t[i](a)),done:!1}:l?l(a):a}:l}}function Zr(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof je=="function"?je(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(l){r[l]=t[l]&&function(a){return new Promise(function(o,c){a=t[l](a),i(o,c,a.done,a.value)})}}function i(l,a,o,c){Promise.resolve(c).then(function(f){l({value:f,done:o})},a)}}function Qr(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function jr(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&et(e,t,r);return rl(e,t),e}function en(t){return t&&t.__esModule?t:{default:t}}function tn(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function rn(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function nn(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function ln(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(l){return Promise.reject(l)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}function an(t){function e(l){t.error=t.hasError?new nl(l,t.error,"An error was suppressed during disposal."):l,t.hasError=!0}var r,n=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var l=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(l).then(i,function(a){return e(a),i()})}else n|=1}catch(a){e(a)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}var _t,Qe,et,rl,nl,il,sn=Ki(()=>{_t=function(t,e){return _t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},_t(t,e)};Qe=function(){return Qe=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e},Qe.apply(this,arguments)};et=Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};rl=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};nl=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};il={__extends:$r,__assign:Qe,__rest:kr,__decorate:Br,__param:Ur,__metadata:Jr,__awaiter:zr,__generator:qr,__createBinding:et,__exportStar:Wr,__values:je,__read:Tt,__spread:Gr,__spreadArrays:Vr,__spreadArray:Yr,__await:ve,__asyncGenerator:Kr,__asyncDelegator:Xr,__asyncValues:Zr,__makeTemplateObject:Qr,__importStar:jr,__importDefault:en,__classPrivateFieldGet:tn,__classPrivateFieldSet:rn,__classPrivateFieldIn:nn,__addDisposableResource:ln,__disposeResources:an}});var un=M(At=>{(function(t){"use strict";var e=typeof process=="object"&&process.env?process.env:self;t.parser=function(x){return new s(x)},t.CParser=s,t.CStream=y,t.createStream=g,t.MAX_BUFFER_LENGTH=64*1024,t.DEBUG=e.CDEBUG==="debug",t.INFO=e.CDEBUG==="debug"||e.CDEBUG==="info",t.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var r={textNode:void 0,numberNode:""},n=t.EVENTS.filter(function(x){return x!=="error"&&x!=="end"}),i=0,l;t.STATE={BEGIN:i++,VALUE:i++,OPEN_OBJECT:i++,CLOSE_OBJECT:i++,OPEN_ARRAY:i++,CLOSE_ARRAY:i++,TEXT_ESCAPE:i++,STRING:i++,BACKSLASH:i++,END:i++,OPEN_KEY:i++,CLOSE_KEY:i++,TRUE:i++,TRUE2:i++,TRUE3:i++,FALSE:i++,FALSE2:i++,FALSE3:i++,FALSE4:i++,NULL:i++,NULL2:i++,NULL3:i++,NUMBER_DECIMAL_POINT:i++,NUMBER_DIGIT:i++};for(var a in t.STATE)t.STATE[t.STATE[a]]=a;i=t.STATE;let o={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(x){function u(){this.__proto__=x}return u.prototype=x,new u}),Object.getPrototypeOf||(Object.getPrototypeOf=function(x){return x.__proto__}),Object.keys||(Object.keys=function(x){var u=[];for(var _ in x)x.hasOwnProperty(_)&&u.push(_);return u});function c(x){var u=Math.max(t.MAX_BUFFER_LENGTH,10),_=0;for(var O in r){var P=x[O]===void 0?0:x[O].length;if(P>u)switch(O){case"text":closeText(x);break;default:E(x,"Max buffer length exceeded: "+O)}_=Math.max(_,P)}x.bufferCheckPosition=t.MAX_BUFFER_LENGTH-_+x.position}function f(x){for(var u in r)x[u]=r[u]}var p=/[\\"\n]/g;function s(x){if(!(this instanceof s))return new s(x);var u=this;f(u),u.bufferCheckPosition=t.MAX_BUFFER_LENGTH,u.q=u.c=u.p="",u.opt=x||{},u.closed=u.closedRoot=u.sawRoot=!1,u.tag=u.error=null,u.state=i.BEGIN,u.stack=new Array,u.position=u.column=0,u.line=1,u.slashed=!1,u.unicodeI=0,u.unicodeS=null,u.depth=0,m(u,"onready")}s.prototype={end:function(){w(this)},write:S,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{l=Yi("stream").Stream}catch{l=function(){}}function g(x){return new y(x)}function y(x){if(!(this instanceof y))return new y(x);this._parser=new s(x),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var u=this;l.apply(u),this._parser.onend=function(){u.emit("end")},this._parser.onerror=function(_){u.emit("error",_),u._parser.error=null},n.forEach(function(_){Object.defineProperty(u,"on"+_,{get:function(){return u._parser["on"+_]},set:function(O){if(!O)return u.removeAllListeners(_),u._parser["on"+_]=O,O;u.on(_,O)},enumerable:!0,configurable:!1})})}y.prototype=Object.create(l.prototype,{constructor:{value:y}}),y.prototype.write=function(x){x=new Buffer(x);for(var u=0;u<x.length;u++){var _=x[u];if(this.bytes_remaining>0){for(var O=0;O<this.bytes_remaining;O++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+O]=x[O];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,u=u+O-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&_>=128)if(_>=194&&_<=223&&(this.bytes_in_sequence=2),_>=224&&_<=239&&(this.bytes_in_sequence=3),_>=240&&_<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+u>x.length){for(var P=0;P<=x.length-1-u;P++)this.temp_buffs[this.bytes_in_sequence][P]=x[u+P];return this.bytes_remaining=u+this.bytes_in_sequence-x.length,!0}else{this.string=x.slice(u,u+this.bytes_in_sequence).toString(),u=u+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var U=u;U<x.length&&!(x[U]>=128);U++);this.string=x.slice(u,U).toString(),this._parser.write(this.string),this.emit("data",this.string),u=U-1}},y.prototype.end=function(x){return x&&x.length&&this._parser.write(x.toString()),this._parser.end(),!0},y.prototype.on=function(x,u){var _=this;return!_._parser["on"+x]&&n.indexOf(x)!==-1&&(_._parser["on"+x]=function(){var O=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);O.splice(0,0,x),_.emit.apply(_,O)}),l.prototype.on.call(_,x,u)},y.prototype.destroy=function(){f(this._parser),this.emit("close")};function m(x,u,_){t.INFO&&console.log("-- emit",u,_),x[u]&&x[u](_)}function d(x,u,_){b(x),m(x,u,_)}function b(x,u){x.textNode=v(x.opt,x.textNode),x.textNode!==void 0&&m(x,u||"onvalue",x.textNode),x.textNode=void 0}function L(x){x.numberNode&&m(x,"onvalue",parseFloat(x.numberNode)),x.numberNode=""}function v(x,u){return u===void 0||(x.trim&&(u=u.trim()),x.normalize&&(u=u.replace(/\s+/g," "))),u}function E(x,u){return b(x),u+=`
Line: `+x.line+`
Column: `+x.column+`
Char: `+x.c,u=new Error(u),x.error=u,m(x,"onerror",u),x}function w(x){return(x.state!==i.VALUE||x.depth!==0)&&E(x,"Unexpected end"),b(x),x.c="",x.closed=!0,m(x,"onend"),s.call(x,x.opt),x}function N(x){return x===o.carriageReturn||x===o.lineFeed||x===o.space||x===o.tab}function S(x){var u=this;if(this.error)throw this.error;if(u.closed)return E(u,"Cannot write after close. Assign an onready handler.");if(x===null)return w(u);var _=0,O=x.charCodeAt(0),P=u.p,U=!1;for(t.DEBUG&&console.log("write -> ["+x+"]");O&&(P=O,u.c=O=x.charCodeAt(_++),P!==O?u.p=P:P=u.p,!!O);)switch(t.DEBUG&&console.log(_,O,t.STATE[u.state]),U?U=!1:(u.position++,O===o.lineFeed?(u.line++,u.column=0):u.column++),u.state){case i.BEGIN:O===o.openBrace?u.state=i.OPEN_OBJECT:O===o.openBracket?u.state=i.OPEN_ARRAY:N(O)||E(u,"Non-whitespace before {[.");continue;case i.OPEN_KEY:case i.OPEN_OBJECT:if(N(O))continue;if(u.state===i.OPEN_KEY)u.stack.push(i.CLOSE_KEY);else if(O===o.closeBrace){m(u,"onopenobject"),this.depth++,m(u,"oncloseobject"),this.depth--,u.state=u.stack.pop()||i.VALUE;continue}else u.stack.push(i.CLOSE_OBJECT);O===o.doubleQuote?u.state=i.STRING:E(u,'Malformed object key should start with "');continue;case i.CLOSE_KEY:case i.CLOSE_OBJECT:if(N(O))continue;var J=u.state===i.CLOSE_KEY?"key":"object";O===o.colon?(u.state===i.CLOSE_OBJECT?(u.stack.push(i.CLOSE_OBJECT),b(u,"onopenobject"),this.depth++):b(u,"onkey"),u.state=i.VALUE):O===o.closeBrace?(d(u,"oncloseobject"),this.depth--,u.state=u.stack.pop()||i.VALUE):O===o.comma?(u.state===i.CLOSE_OBJECT&&u.stack.push(i.CLOSE_OBJECT),b(u),u.state=i.OPEN_KEY):E(u,"Bad object");continue;case i.OPEN_ARRAY:case i.VALUE:if(N(O))continue;if(u.state===i.OPEN_ARRAY)if(m(u,"onopenarray"),this.depth++,u.state=i.VALUE,O===o.closeBracket){m(u,"onclosearray"),this.depth--,u.state=u.stack.pop()||i.VALUE;continue}else u.stack.push(i.CLOSE_ARRAY);O===o.doubleQuote?u.state=i.STRING:O===o.openBrace?u.state=i.OPEN_OBJECT:O===o.openBracket?u.state=i.OPEN_ARRAY:O===o.t?u.state=i.TRUE:O===o.f?u.state=i.FALSE:O===o.n?u.state=i.NULL:O===o.minus?u.numberNode+="-":o._0<=O&&O<=o._9?(u.numberNode+=String.fromCharCode(O),u.state=i.NUMBER_DIGIT):E(u,"Bad value");continue;case i.CLOSE_ARRAY:if(O===o.comma)u.stack.push(i.CLOSE_ARRAY),b(u,"onvalue"),u.state=i.VALUE;else if(O===o.closeBracket)d(u,"onclosearray"),this.depth--,u.state=u.stack.pop()||i.VALUE;else{if(N(O))continue;E(u,"Bad array")}continue;case i.STRING:u.textNode===void 0&&(u.textNode="");var F=_-1,X=u.slashed,V=u.unicodeI;e:for(;;){for(t.DEBUG&&console.log(_,O,t.STATE[u.state],X);V>0;)if(u.unicodeS+=String.fromCharCode(O),O=x.charCodeAt(_++),u.position++,V===4?(u.textNode+=String.fromCharCode(parseInt(u.unicodeS,16)),V=0,F=_-1):V++,!O)break e;if(O===o.doubleQuote&&!X){u.state=u.stack.pop()||i.VALUE,u.textNode+=x.substring(F,_-1),u.position+=_-1-F;break}if(O===o.backslash&&!X&&(X=!0,u.textNode+=x.substring(F,_-1),u.position+=_-1-F,O=x.charCodeAt(_++),u.position++,!O))break;if(X){if(X=!1,O===o.n?u.textNode+=`
`:O===o.r?u.textNode+="\r":O===o.t?u.textNode+="	":O===o.f?u.textNode+="\f":O===o.b?u.textNode+="\b":O===o.u?(V=1,u.unicodeS=""):u.textNode+=String.fromCharCode(O),O=x.charCodeAt(_++),u.position++,F=_-1,O)continue;break}p.lastIndex=_;var te=p.exec(x);if(te===null){_=x.length+1,u.textNode+=x.substring(F,_-1),u.position+=_-1-F;break}if(_=te.index+1,O=x.charCodeAt(te.index),!O){u.textNode+=x.substring(F,_-1),u.position+=_-1-F;break}}u.slashed=X,u.unicodeI=V;continue;case i.TRUE:O===o.r?u.state=i.TRUE2:E(u,"Invalid true started with t"+O);continue;case i.TRUE2:O===o.u?u.state=i.TRUE3:E(u,"Invalid true started with tr"+O);continue;case i.TRUE3:O===o.e?(m(u,"onvalue",!0),u.state=u.stack.pop()||i.VALUE):E(u,"Invalid true started with tru"+O);continue;case i.FALSE:O===o.a?u.state=i.FALSE2:E(u,"Invalid false started with f"+O);continue;case i.FALSE2:O===o.l?u.state=i.FALSE3:E(u,"Invalid false started with fa"+O);continue;case i.FALSE3:O===o.s?u.state=i.FALSE4:E(u,"Invalid false started with fal"+O);continue;case i.FALSE4:O===o.e?(m(u,"onvalue",!1),u.state=u.stack.pop()||i.VALUE):E(u,"Invalid false started with fals"+O);continue;case i.NULL:O===o.u?u.state=i.NULL2:E(u,"Invalid null started with n"+O);continue;case i.NULL2:O===o.l?u.state=i.NULL3:E(u,"Invalid null started with nu"+O);continue;case i.NULL3:O===o.l?(m(u,"onvalue",null),u.state=u.stack.pop()||i.VALUE):E(u,"Invalid null started with nul"+O);continue;case i.NUMBER_DECIMAL_POINT:O===o.period?(u.numberNode+=".",u.state=i.NUMBER_DIGIT):E(u,"Leading zero not followed by .");continue;case i.NUMBER_DIGIT:o._0<=O&&O<=o._9?u.numberNode+=String.fromCharCode(O):O===o.period?(u.numberNode.indexOf(".")!==-1&&E(u,"Invalid number has two dots"),u.numberNode+="."):O===o.e||O===o.E?((u.numberNode.indexOf("e")!==-1||u.numberNode.indexOf("E")!==-1)&&E(u,"Invalid number has two exponential"),u.numberNode+="e"):O===o.plus||O===o.minus?(P===o.e||P===o.E||E(u,"Invalid symbol in number"),u.numberNode+=String.fromCharCode(O)):(L(u),_--,U=!0,u.state=u.stack.pop()||i.VALUE);continue;default:E(u,"Unknown state: "+u.state)}return u.position>=u.bufferCheckPosition&&c(u),u}})(typeof At>"u"?clarinet={}:At)});var cn=M(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.stringify=Oe.parse=void 0;var ll=(sn(),Zi(on)),al=ll.__importDefault(un());function ol(t){let e=Dt(),r,n;function i(a){try{let o=e.next(a);o.done&&(r=o.value)}catch(o){n=o}}let l=al.default.parser();if(l.onopenobject=a=>i({type:"openobject",key:a}),l.onopenarray=()=>i({type:"openarray"}),l.onkey=a=>i({type:"key",key:a}),l.onvalue=a=>i({type:"value",value:a}),l.oncloseobject=()=>i({type:"closeobject"}),l.onclosearray=()=>i({type:"closearray"}),l.onerror=a=>i({type:"error",err:a}),e.next(),l.write(t).close(),n)throw n;return r}Oe.parse=ol;function Ct(t){return Array.isArray(t)?`[${t.map(Ct).join(",")}]`:t instanceof Map?`{${[...t].map(([e,r])=>JSON.stringify(e)+":"+Ct(r)).join(",")}}`:JSON.stringify(t)}Oe.stringify=Ct;var fn=Symbol();function*Dt(){let t=yield;switch(t.type){case"value":return t.value;case"openobject":let e=new Map,r=t.key;for(r===void 0&&(yield);r!==void 0;)e.set(r,yield*Dt()),r=(yield).key;return e;case"openarray":let n=[],i;for(;;){if(i=yield*Dt(),i===fn)return n;n.push(i)}case"closearray":return fn;case"error":throw t.err;default:throw Error(`Unexpected ParseEvent ${t.type}`)}}});var dn=M((Pt,Rt)=>{(function(t,e){typeof Pt=="object"&&typeof Rt<"u"?Rt.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis<"u"?globalThis:t||self,t.DOMPurify=e())})(Pt,function(){"use strict";let{entries:t,setPrototypeOf:e,isFrozen:r,getPrototypeOf:n,getOwnPropertyDescriptor:i}=Object,{freeze:l,seal:a,create:o}=Object,{apply:c,construct:f}=typeof Reflect<"u"&&Reflect;l||(l=function(C){return C}),a||(a=function(C){return C}),c||(c=function(C,H,R){return C.apply(H,R)}),f||(f=function(C,H){return new C(...H)});let p=S(Array.prototype.forEach),s=S(Array.prototype.pop),g=S(Array.prototype.push),y=S(String.prototype.toLowerCase),m=S(String.prototype.toString),d=S(String.prototype.match),b=S(String.prototype.replace),L=S(String.prototype.indexOf),v=S(String.prototype.trim),E=S(Object.prototype.hasOwnProperty),w=S(RegExp.prototype.test),N=x(TypeError);function S(I){return function(C){for(var H=arguments.length,R=new Array(H>1?H-1:0),Y=1;Y<H;Y++)R[Y-1]=arguments[Y];return c(I,C,R)}}function x(I){return function(){for(var C=arguments.length,H=new Array(C),R=0;R<C;R++)H[R]=arguments[R];return f(I,H)}}function u(I,C){let H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y;e&&e(I,null);let R=C.length;for(;R--;){let Y=C[R];if(typeof Y=="string"){let ae=H(Y);ae!==Y&&(r(C)||(C[R]=ae),Y=ae)}I[Y]=!0}return I}function _(I){for(let C=0;C<I.length;C++)E(I,C)||(I[C]=null);return I}function O(I){let C=o(null);for(let[H,R]of t(I))E(I,H)&&(Array.isArray(R)?C[H]=_(R):R&&typeof R=="object"&&R.constructor===Object?C[H]=O(R):C[H]=R);return C}function P(I,C){for(;I!==null;){let R=i(I,C);if(R){if(R.get)return S(R.get);if(typeof R.value=="function")return S(R.value)}I=n(I)}function H(){return null}return H}let U=l(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),J=l(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),F=l(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),X=l(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),V=l(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),te=l(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),re=l(["#text"]),pe=l(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Te=l(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),tr=l(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ze=l(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ui=a(/\{\{[\w\W]*|[\w\W]*\}\}/gm),fi=a(/<%[\w\W]*|[\w\W]*%>/gm),ci=a(/\${[\w\W]*}/gm),di=a(/^data-[\-\w.\u00B7-\uFFFF]/),pi=a(/^aria-[\-\w]+$/),rr=a(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),hi=a(/^(?:\w+script|data):/i),mi=a(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),nr=a(/^html$/i),gi=a(/^[a-z][.\w]*(-[.\w]+)+$/i);var ir=Object.freeze({__proto__:null,MUSTACHE_EXPR:ui,ERB_EXPR:fi,TMPLIT_EXPR:ci,DATA_ATTR:di,ARIA_ATTR:pi,IS_ALLOWED_URI:rr,IS_SCRIPT_OR_DATA:hi,ATTR_WHITESPACE:mi,DOCTYPE_NAME:nr,CUSTOM_ELEMENT:gi});let Ae={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},yi=function(){return typeof window>"u"?null:window},Ei=function(C,H){if(typeof C!="object"||typeof C.createPolicy!="function")return null;let R=null,Y="data-tt-policy-suffix";H&&H.hasAttribute(Y)&&(R=H.getAttribute(Y));let ae="dompurify"+(R?"#"+R:"");try{return C.createPolicy(ae,{createHTML(he){return he},createScriptURL(he){return he}})}catch{return console.warn("TrustedTypes policy "+ae+" could not be created."),null}};function lr(){let I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:yi(),C=D=>lr(D);if(C.version="3.1.6",C.removed=[],!I||!I.document||I.document.nodeType!==Ae.document)return C.isSupported=!1,C;let{document:H}=I,R=H,Y=R.currentScript,{DocumentFragment:ae,HTMLTemplateElement:he,Node:ct,Element:ar,NodeFilter:Ce,NamedNodeMap:wi=I.NamedNodeMap||I.MozNamedAttrMap,HTMLFormElement:vi,DOMParser:Oi,trustedTypes:qe}=I,De=ar.prototype,bi=P(De,"cloneNode"),Li=P(De,"remove"),Ni=P(De,"nextSibling"),Si=P(De,"childNodes"),We=P(De,"parentNode");if(typeof he=="function"){let D=H.createElement("template");D.content&&D.content.ownerDocument&&(H=D.content.ownerDocument)}let Z,Pe="",{implementation:dt,createNodeIterator:_i,createDocumentFragment:Ti,getElementsByTagName:Ai}=H,{importNode:Ci}=R,ne={};C.isSupported=typeof t=="function"&&typeof We=="function"&&dt&&dt.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:pt,ERB_EXPR:ht,TMPLIT_EXPR:mt,DATA_ATTR:Di,ARIA_ATTR:Pi,IS_SCRIPT_OR_DATA:Ri,ATTR_WHITESPACE:or,CUSTOM_ELEMENT:Ii}=ir,{IS_ALLOWED_URI:sr}=ir,z=null,ur=u({},[...U,...J,...F,...V,...re]),q=null,fr=u({},[...pe,...Te,...tr,...ze]),B=Object.seal(o(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Re=null,gt=null,cr=!0,yt=!0,dr=!1,pr=!0,me=!1,Et=!0,fe=!1,xt=!1,wt=!1,ge=!1,Ge=!1,Ve=!1,hr=!0,mr=!1,Fi="user-content-",vt=!0,Ie=!1,ye={},Ee=null,gr=u({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),yr=null,Er=u({},["audio","video","img","source","image","track"]),Ot=null,xr=u({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ye="http://www.w3.org/1998/Math/MathML",Ke="http://www.w3.org/2000/svg",oe="http://www.w3.org/1999/xhtml",xe=oe,bt=!1,Lt=null,Hi=u({},[Ye,Ke,oe],m),Fe=null,Mi=["application/xhtml+xml","text/html"],$i="text/html",W=null,we=null,ki=H.createElement("form"),wr=function(h){return h instanceof RegExp||h instanceof Function},Nt=function(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(we&&we===h)){if((!h||typeof h!="object")&&(h={}),h=O(h),Fe=Mi.indexOf(h.PARSER_MEDIA_TYPE)===-1?$i:h.PARSER_MEDIA_TYPE,W=Fe==="application/xhtml+xml"?m:y,z=E(h,"ALLOWED_TAGS")?u({},h.ALLOWED_TAGS,W):ur,q=E(h,"ALLOWED_ATTR")?u({},h.ALLOWED_ATTR,W):fr,Lt=E(h,"ALLOWED_NAMESPACES")?u({},h.ALLOWED_NAMESPACES,m):Hi,Ot=E(h,"ADD_URI_SAFE_ATTR")?u(O(xr),h.ADD_URI_SAFE_ATTR,W):xr,yr=E(h,"ADD_DATA_URI_TAGS")?u(O(Er),h.ADD_DATA_URI_TAGS,W):Er,Ee=E(h,"FORBID_CONTENTS")?u({},h.FORBID_CONTENTS,W):gr,Re=E(h,"FORBID_TAGS")?u({},h.FORBID_TAGS,W):{},gt=E(h,"FORBID_ATTR")?u({},h.FORBID_ATTR,W):{},ye=E(h,"USE_PROFILES")?h.USE_PROFILES:!1,cr=h.ALLOW_ARIA_ATTR!==!1,yt=h.ALLOW_DATA_ATTR!==!1,dr=h.ALLOW_UNKNOWN_PROTOCOLS||!1,pr=h.ALLOW_SELF_CLOSE_IN_ATTR!==!1,me=h.SAFE_FOR_TEMPLATES||!1,Et=h.SAFE_FOR_XML!==!1,fe=h.WHOLE_DOCUMENT||!1,ge=h.RETURN_DOM||!1,Ge=h.RETURN_DOM_FRAGMENT||!1,Ve=h.RETURN_TRUSTED_TYPE||!1,wt=h.FORCE_BODY||!1,hr=h.SANITIZE_DOM!==!1,mr=h.SANITIZE_NAMED_PROPS||!1,vt=h.KEEP_CONTENT!==!1,Ie=h.IN_PLACE||!1,sr=h.ALLOWED_URI_REGEXP||rr,xe=h.NAMESPACE||oe,B=h.CUSTOM_ELEMENT_HANDLING||{},h.CUSTOM_ELEMENT_HANDLING&&wr(h.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(B.tagNameCheck=h.CUSTOM_ELEMENT_HANDLING.tagNameCheck),h.CUSTOM_ELEMENT_HANDLING&&wr(h.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(B.attributeNameCheck=h.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),h.CUSTOM_ELEMENT_HANDLING&&typeof h.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(B.allowCustomizedBuiltInElements=h.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),me&&(yt=!1),Ge&&(ge=!0),ye&&(z=u({},re),q=[],ye.html===!0&&(u(z,U),u(q,pe)),ye.svg===!0&&(u(z,J),u(q,Te),u(q,ze)),ye.svgFilters===!0&&(u(z,F),u(q,Te),u(q,ze)),ye.mathMl===!0&&(u(z,V),u(q,tr),u(q,ze))),h.ADD_TAGS&&(z===ur&&(z=O(z)),u(z,h.ADD_TAGS,W)),h.ADD_ATTR&&(q===fr&&(q=O(q)),u(q,h.ADD_ATTR,W)),h.ADD_URI_SAFE_ATTR&&u(Ot,h.ADD_URI_SAFE_ATTR,W),h.FORBID_CONTENTS&&(Ee===gr&&(Ee=O(Ee)),u(Ee,h.FORBID_CONTENTS,W)),vt&&(z["#text"]=!0),fe&&u(z,["html","head","body"]),z.table&&(u(z,["tbody"]),delete Re.tbody),h.TRUSTED_TYPES_POLICY){if(typeof h.TRUSTED_TYPES_POLICY.createHTML!="function")throw N('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof h.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw N('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Z=h.TRUSTED_TYPES_POLICY,Pe=Z.createHTML("")}else Z===void 0&&(Z=Ei(qe,Y)),Z!==null&&typeof Pe=="string"&&(Pe=Z.createHTML(""));l&&l(h),we=h}},vr=u({},["mi","mo","mn","ms","mtext"]),Or=u({},["foreignobject","annotation-xml"]),Bi=u({},["title","style","font","a","script"]),br=u({},[...J,...F,...X]),Lr=u({},[...V,...te]),Ui=function(h){let T=We(h);(!T||!T.tagName)&&(T={namespaceURI:xe,tagName:"template"});let A=y(h.tagName),$=y(T.tagName);return Lt[h.namespaceURI]?h.namespaceURI===Ke?T.namespaceURI===oe?A==="svg":T.namespaceURI===Ye?A==="svg"&&($==="annotation-xml"||vr[$]):!!br[A]:h.namespaceURI===Ye?T.namespaceURI===oe?A==="math":T.namespaceURI===Ke?A==="math"&&Or[$]:!!Lr[A]:h.namespaceURI===oe?T.namespaceURI===Ke&&!Or[$]||T.namespaceURI===Ye&&!vr[$]?!1:!Lr[A]&&(Bi[A]||!br[A]):!!(Fe==="application/xhtml+xml"&&Lt[h.namespaceURI]):!1},ie=function(h){g(C.removed,{element:h});try{We(h).removeChild(h)}catch{Li(h)}},Xe=function(h,T){try{g(C.removed,{attribute:T.getAttributeNode(h),from:T})}catch{g(C.removed,{attribute:null,from:T})}if(T.removeAttribute(h),h==="is"&&!q[h])if(ge||Ge)try{ie(T)}catch{}else try{T.setAttribute(h,"")}catch{}},Nr=function(h){let T=null,A=null;if(wt)h="<remove></remove>"+h;else{let G=d(h,/^[\r\n\t ]+/);A=G&&G[0]}Fe==="application/xhtml+xml"&&xe===oe&&(h='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+h+"</body></html>");let $=Z?Z.createHTML(h):h;if(xe===oe)try{T=new Oi().parseFromString($,Fe)}catch{}if(!T||!T.documentElement){T=dt.createDocument(xe,"template",null);try{T.documentElement.innerHTML=bt?Pe:$}catch{}}let K=T.body||T.documentElement;return h&&A&&K.insertBefore(H.createTextNode(A),K.childNodes[0]||null),xe===oe?Ai.call(T,fe?"html":"body")[0]:fe?T.documentElement:K},Sr=function(h){return _i.call(h.ownerDocument||h,h,Ce.SHOW_ELEMENT|Ce.SHOW_COMMENT|Ce.SHOW_TEXT|Ce.SHOW_PROCESSING_INSTRUCTION|Ce.SHOW_CDATA_SECTION,null)},_r=function(h){return h instanceof vi&&(typeof h.nodeName!="string"||typeof h.textContent!="string"||typeof h.removeChild!="function"||!(h.attributes instanceof wi)||typeof h.removeAttribute!="function"||typeof h.setAttribute!="function"||typeof h.namespaceURI!="string"||typeof h.insertBefore!="function"||typeof h.hasChildNodes!="function")},Tr=function(h){return typeof ct=="function"&&h instanceof ct},se=function(h,T,A){ne[h]&&p(ne[h],$=>{$.call(C,T,A,we)})},Ar=function(h){let T=null;if(se("beforeSanitizeElements",h,null),_r(h))return ie(h),!0;let A=W(h.nodeName);if(se("uponSanitizeElement",h,{tagName:A,allowedTags:z}),h.hasChildNodes()&&!Tr(h.firstElementChild)&&w(/<[/\w]/g,h.innerHTML)&&w(/<[/\w]/g,h.textContent)||h.nodeType===Ae.progressingInstruction||Et&&h.nodeType===Ae.comment&&w(/<[/\w]/g,h.data))return ie(h),!0;if(!z[A]||Re[A]){if(!Re[A]&&Dr(A)&&(B.tagNameCheck instanceof RegExp&&w(B.tagNameCheck,A)||B.tagNameCheck instanceof Function&&B.tagNameCheck(A)))return!1;if(vt&&!Ee[A]){let $=We(h)||h.parentNode,K=Si(h)||h.childNodes;if(K&&$){let G=K.length;for(let ee=G-1;ee>=0;--ee){let le=bi(K[ee],!0);le.__removalCount=(h.__removalCount||0)+1,$.insertBefore(le,Ni(h))}}}return ie(h),!0}return h instanceof ar&&!Ui(h)||(A==="noscript"||A==="noembed"||A==="noframes")&&w(/<\/no(script|embed|frames)/i,h.innerHTML)?(ie(h),!0):(me&&h.nodeType===Ae.text&&(T=h.textContent,p([pt,ht,mt],$=>{T=b(T,$," ")}),h.textContent!==T&&(g(C.removed,{element:h.cloneNode()}),h.textContent=T)),se("afterSanitizeElements",h,null),!1)},Cr=function(h,T,A){if(hr&&(T==="id"||T==="name")&&(A in H||A in ki))return!1;if(!(yt&&!gt[T]&&w(Di,T))){if(!(cr&&w(Pi,T))){if(!q[T]||gt[T]){if(!(Dr(h)&&(B.tagNameCheck instanceof RegExp&&w(B.tagNameCheck,h)||B.tagNameCheck instanceof Function&&B.tagNameCheck(h))&&(B.attributeNameCheck instanceof RegExp&&w(B.attributeNameCheck,T)||B.attributeNameCheck instanceof Function&&B.attributeNameCheck(T))||T==="is"&&B.allowCustomizedBuiltInElements&&(B.tagNameCheck instanceof RegExp&&w(B.tagNameCheck,A)||B.tagNameCheck instanceof Function&&B.tagNameCheck(A))))return!1}else if(!Ot[T]){if(!w(sr,b(A,or,""))){if(!((T==="src"||T==="xlink:href"||T==="href")&&h!=="script"&&L(A,"data:")===0&&yr[h])){if(!(dr&&!w(Ri,b(A,or,"")))){if(A)return!1}}}}}}return!0},Dr=function(h){return h!=="annotation-xml"&&d(h,Ii)},Pr=function(h){se("beforeSanitizeAttributes",h,null);let{attributes:T}=h;if(!T)return;let A={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:q},$=T.length;for(;$--;){let K=T[$],{name:G,namespaceURI:ee,value:le}=K,He=W(G),Q=G==="value"?le:v(le);if(A.attrName=He,A.attrValue=Q,A.keepAttr=!0,A.forceKeepAttr=void 0,se("uponSanitizeAttribute",h,A),Q=A.attrValue,Et&&w(/((--!?|])>)|<\/(style|title)/i,Q)){Xe(G,h);continue}if(A.forceKeepAttr||(Xe(G,h),!A.keepAttr))continue;if(!pr&&w(/\/>/i,Q)){Xe(G,h);continue}me&&p([pt,ht,mt],Ir=>{Q=b(Q,Ir," ")});let Rr=W(h.nodeName);if(Cr(Rr,He,Q)){if(mr&&(He==="id"||He==="name")&&(Xe(G,h),Q=Fi+Q),Z&&typeof qe=="object"&&typeof qe.getAttributeType=="function"&&!ee)switch(qe.getAttributeType(Rr,He)){case"TrustedHTML":{Q=Z.createHTML(Q);break}case"TrustedScriptURL":{Q=Z.createScriptURL(Q);break}}try{ee?h.setAttributeNS(ee,G,Q):h.setAttribute(G,Q),_r(h)?ie(h):s(C.removed)}catch{}}}se("afterSanitizeAttributes",h,null)},Ji=function D(h){let T=null,A=Sr(h);for(se("beforeSanitizeShadowDOM",h,null);T=A.nextNode();)se("uponSanitizeShadowNode",T,null),!Ar(T)&&(T.content instanceof ae&&D(T.content),Pr(T));se("afterSanitizeShadowDOM",h,null)};return C.sanitize=function(D){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},T=null,A=null,$=null,K=null;if(bt=!D,bt&&(D="<!-->"),typeof D!="string"&&!Tr(D))if(typeof D.toString=="function"){if(D=D.toString(),typeof D!="string")throw N("dirty is not a string, aborting")}else throw N("toString is not a function");if(!C.isSupported)return D;if(xt||Nt(h),C.removed=[],typeof D=="string"&&(Ie=!1),Ie){if(D.nodeName){let le=W(D.nodeName);if(!z[le]||Re[le])throw N("root node is forbidden and cannot be sanitized in-place")}}else if(D instanceof ct)T=Nr("<!---->"),A=T.ownerDocument.importNode(D,!0),A.nodeType===Ae.element&&A.nodeName==="BODY"||A.nodeName==="HTML"?T=A:T.appendChild(A);else{if(!ge&&!me&&!fe&&D.indexOf("<")===-1)return Z&&Ve?Z.createHTML(D):D;if(T=Nr(D),!T)return ge?null:Ve?Pe:""}T&&wt&&ie(T.firstChild);let G=Sr(Ie?D:T);for(;$=G.nextNode();)Ar($)||($.content instanceof ae&&Ji($.content),Pr($));if(Ie)return D;if(ge){if(Ge)for(K=Ti.call(T.ownerDocument);T.firstChild;)K.appendChild(T.firstChild);else K=T;return(q.shadowroot||q.shadowrootmode)&&(K=Ci.call(R,K,!0)),K}let ee=fe?T.outerHTML:T.innerHTML;return fe&&z["!doctype"]&&T.ownerDocument&&T.ownerDocument.doctype&&T.ownerDocument.doctype.name&&w(nr,T.ownerDocument.doctype.name)&&(ee="<!DOCTYPE "+T.ownerDocument.doctype.name+`>
`+ee),me&&p([pt,ht,mt],le=>{ee=b(ee,le," ")}),Z&&Ve?Z.createHTML(ee):ee},C.setConfig=function(){let D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Nt(D),xt=!0},C.clearConfig=function(){we=null,xt=!1},C.isValidAttribute=function(D,h,T){we||Nt({});let A=W(D),$=W(h);return Cr(A,$,T)},C.addHook=function(D,h){typeof h=="function"&&(ne[D]=ne[D]||[],g(ne[D],h))},C.removeHook=function(D){if(ne[D])return s(ne[D])},C.removeHooks=function(D){ne[D]&&(ne[D]=[])},C.removeAllHooks=function(){ne={}},C}var xi=lr();return xi})});var hn=M((_a,pn)=>{var j=St(dn());pn.exports=class{constructor(e){let r=this;r.parentContext=e}escape(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}mapToHtmlList(e,r=!1,n=void 0){let i=this;try{i.parentContext.mapToJSON(e)}catch(f){throw console.log(f),new Error("Provided map value doesn't passes JSON.parse()")}var l=0,a=document.createElement("ul"),o;return n!==void 0&&(o=JSON.parse(n)),a.className="DAMON-List",c(e,a),a;function c(f,p){if(typeof p!="object"||p==null||Array.isArray(p))throw new Error("Error List Item number "+l+": @param { {} } list");if(typeof f=="object"&&f!==null&&!Array.isArray(f)&&f instanceof Map&&f.constructor===Map){if(p.tagName=="UL")for(let[y,m]of f){let d=document.createElement("ul"),b=document.createElement("code"),L=document.createElement("span"),v=document.createElement("li");if(L.className="type-key",/^https?:\/\//.test(y)){let E=j.sanitize(`<a href="${y}">${y}</a>`);L.innerHTML=E}else n!==void 0&&y in o["@context"]?L.innerHTML=j.sanitize(`<a href="${o["@context"][y]["@id"]}">${y}</a>`):L.textContent=y;if(typeof m=="object"&&m!==null)if(Array.isArray(m))if(f.inlineArrays!==void 0&&f.inlineArrays.indexOf(y)>-1){b.innerHTML=L.outerHTML+": [";for(let E=0,w=m.length;E<w;E++){let N=document.createElement("span"),S=m[E];S===!0?(N.textContent="true",N.className="type-boolean"):S===!1?(N.textContent="false",N.className="type-boolean"):S===null?(N.textContent="null",N.className="type-null"):Number.isFinite(S)&&!Number.isNaN(S)?(N.textContent=S+"",N.className="type-number"):(r?/^https?:\/\//.test(S)?N.innerHTML=j.sanitize(`<a href="${S}">"${S}"</a>`):N.innerHTML=`"${S}"`:/^https?:\/\//.test(S)?N.innerHTML=j.sanitize(`<a href="${S}">"${S}"</a>`):N.textContent=`"${S}"`,N.className="type-string"),E!==0&&(b.innerHTML+=", "),b.appendChild(N)}b.innerHTML+="]",v.appendChild(b),v.appendChild(d),p.appendChild(v)}else b.innerHTML=L.outerHTML+": []",v.appendChild(b),v.appendChild(d),p.appendChild(v),c(m,d);else f.implicitMaps!==void 0&&f.implicitMaps.indexOf(y)>-1?b.innerHTML=L.outerHTML:b.innerHTML=L.outerHTML+": {}",v.appendChild(b),v.appendChild(d),p.appendChild(v),c(m,d);else{l++,b.innerHTML=L.outerHTML+": ";let E=document.createElement("span"),w=m;w===!0?(E.textContent="true",E.className="type-boolean"):w===!1?(E.textContent="false",E.className="type-boolean"):w===null?(E.textContent="null",E.className="type-null"):Number.isFinite(w)&&!Number.isNaN(w)?(E.textContent=w+"",E.className="type-number"):(r?/^https?:\/\//.test(w)?E.innerHTML=j.sanitize(`<a href="${w}">"${w}"</a>`):E.innerHTML=`"${w}"`:/^https?:\/\//.test(w)?E.innerHTML=j.sanitize(`<a href="${w}">"${w}"</a>`):E.textContent=`"${w}"`,E.className="type-string"),f.implicitNulls===void 0||f.implicitNulls.indexOf(y)==-1?b.appendChild(E):b.innerHTML=b.innerHTML.slice(0,-2),v.appendChild(b),p.appendChild(v)}}}else if(Array.isArray(f))for(var s=0,g=f.length;s<g;s++){let y=document.createElement("ul"),m=document.createElement("code"),d=document.createElement("li");if(typeof f[s]=="object"&&f[s]!==null)if(Array.isArray(f[s]))if(f.inlineArrays!==void 0&&f.inlineArrays.indexOf(s)>-1){m.innerHTML+="[";for(let b=0,L=f[s].length;b<L;b++){let v=document.createElement("span"),E=f[s][b];E===!0?(v.textContent="true",v.className="type-boolean"):E===!1?(v.textContent="false",v.className="type-boolean"):E===null?(v.textContent="null",v.className="type-null"):Number.isFinite(E)&&!Number.isNaN(E)?(v.textContent=E+"",v.className="type-number"):(r?/^https?:\/\//.test(E)?v.innerHTML=j.sanitize(`<a href="${E}">"${E}"</a>`):v.innerHTML=`"${E}"`:/^https?:\/\//.test(E)?v.innerHTML=j.sanitize(`<a href="${E}">"${E}"</a>`):v.textContent=`"${E}"`,v.className="type-string"),b!==0&&(m.innerHTML+=", "),m.appendChild(v)}m.innerHTML+="]",d.appendChild(m),d.appendChild(y),p.appendChild(d)}else m.textContent="[]",d.appendChild(m),d.appendChild(y),p.appendChild(d),c(f[s],y);else m.textContent="{}",d.appendChild(m),d.appendChild(y),p.appendChild(d),c(f[s],y);else{l++;let b=f[s];b===!0?(m.textContent="true",m.className="type-boolean"):b===!1?(m.textContent="false",m.className="type-boolean"):b===null?(m.textContent="null",m.className="type-null"):Number.isFinite(b)&&!Number.isNaN(b)?(m.textContent=b+"",m.className="type-number"):(r?/^https?:\/\//.test(b)?m.innerHTML=j.sanitize(`<a href="${b}">"${b}"</a>`):m.innerHTML=`"${b}"`:/^https?:\/\//.test(b)?m.innerHTML=j.sanitize(`<a href="${b}">"${b}"</a>`):m.textContent=`"${b}"`,m.className="type-string"),d.appendChild(m),d.appendChild(y),p.appendChild(d)}}}}mapToHtmlTable(e,r=!1){let n=this;try{n.parentContext.mapToJSON(e)}catch{throw new Error("Provided map value doesn't passes JSON.parse()")}var i=0,l=document.createElement("table"),a=document.createElement("thead"),o=document.createElement("tbody"),c=!1,f=0;if(l.className="DAMON-Table",typeof e!="object"||e==null||Array.isArray(e)||!(e instanceof Map)||e.constructor!==Map)throw new Error("Error List Item number "+i+": @param { {} } list");for(let[p,s]of e){if(typeof s=="object"&&s!==null&&!Array.isArray(s)&&s instanceof Map&&s.constructor===Map)if(p=="0"&&!c){let g=document.createElement("tr");f=s.length;for(let[y,m]of s)if(m===null){let d=document.createElement("th");r?/^https?:\/\//.test(y)?d.innerHTML=j.sanitize(`<a href="${y}">${y}</a>`):d.innerHTML=`${y}`:/^https?:\/\//.test(y)?d.innerHTML=j.sanitize(`<a href="${y}">${y}</a>`):d.textContent=`${y}`,g.appendChild(d)}else throw new Error("Expected implicit null property, saw otherwise");a.appendChild(g),c=!0}else{if(f==0&&(f=s.length),s.length!=f)throw new Error("Error List Item number "+i+": @param { {} } list");let g=document.createElement("tr");for(let[y,m]of s)if(m===null){let d=document.createElement("td");r?/^https?:\/\//.test(y)?d.innerHTML=j.sanitize(`<a href="${y}">${y}</a>`):d.innerHTML=`${y}`:/^https?:\/\//.test(y)?d.innerHTML=j.sanitize(`<a href="${y}">${y}</a>`):d.textContent=`${y}`,g.appendChild(d)}else throw new Error("Expected implicit null property, saw otherwise");o.appendChild(g)}else if(typeof s!="object"&&p=="00"){let g=document.createElement("caption");r?g.innerHTML=s:g.textContent=s,l.appendChild(g)}else throw new Error("Error List Item number "+i+": @param { {} } list");i++}return c&&l.appendChild(a),l.appendChild(o),l}mapTreeLeavesToHtmlTable(e,r=!1){let n=this;try{n.parentContext.mapToJSON(e)}catch{throw new Error("Provided map value doesn't passes JSON.parse()")}var i=0,l=0,a=document.createElement("table"),o=document.createElement("thead"),c=document.createElement("tbody"),f=!1;if(a.className="DAMON-LeavesToTable",typeof e!="object"||e==null||Array.isArray(e)||!(e instanceof Map)||e.constructor!==Map)throw new Error("Error List Item number "+i+": @param { {} } list");for(let[s,g]of e){if(typeof g=="object"&&!Array.isArray(g)){if(s=="head"&&!f){try{p(g,o)}catch{return}f=!0}else if(s=="body")try{p(g,c)}catch{return}}else if(typeof g!="object"&&s=="caption"){let y=document.createElement("caption");r?y.innerHTML=g:y.textContent=g,a.appendChild(y)}else throw new Error("Error List Item number "+i+": @param { {} } list");i++}return f&&a.appendChild(o),a.appendChild(c),a;function p(s,g,y=0,m=[]){if(typeof g!="object"||g==null)throw new Error("Error List Item number "+i+": @param { {} } list");if(typeof s=="object"&&s!==null&&!Array.isArray(s)&&s instanceof Map&&s.constructor===Map){if(g.tagName=="THEAD")if(Array.from(s.keys()).length==1)if(typeof s.get(Array.from(s.keys())[0])=="object"&&s.get(Array.from(s.keys())[0])!==null)i++,p(s.get(Array.from(s.keys())[0]),g,y+1,m.concat([Array.from(s.keys())[0]]));else throw new Error("Error List Item number "+i+": @param { {} } list");else throw new Error("Error List Item number "+i+": @param { {} } list");else if(g.tagName=="TBODY"){if(Array.from(s.keys()).length==0)throw new Error("Error List Item number "+i+": @param { {} } list");for(let[d,b]of s)if(typeof b=="object"&&b!==null)i++,p(b,g,y+1,m.concat([d]));else throw new Error("Error List Item number "+i+": @param { {} } list")}}else if(Array.isArray(s)){if(g.tagName=="THEAD")if(s.length==1){i++,l=y;let d=document.createElement("tr");m.push(s[0]);for(let b=0,L=m.length;b<L;b++){let v=document.createElement("th");r?v.innerHTML=m[b]:v.textContent=m[b],d.appendChild(v)}g.appendChild(d)}else throw new Error("Error List Item number "+i+": @param { {} } list");else if(g.tagName=="TBODY")if(y==l){if(s.length==0)throw new Error("Error List Item number "+i+": @param { {} } list");for(let d=0,b=s.length;d<b;d++){i++;let L=document.createElement("tr");for(let E=0,w=m.length;E<w;E++){let N=document.createElement("td");r?N.innerHTML=m[E]:N.textContent=m[E],L.appendChild(N)}let v=document.createElement("td");r?v.innerHTML=s[d]:v.textContent=s[d],v.textContent=s[d],L.appendChild(v),g.appendChild(L)}}else throw new Error("Error List Item number "+i+": @param { {} } list")}}}htmlToJSON(e){let r=this;var n=0;if(e.firstElementChild.textContent=="{}")return r._mapToJSON(i(tree,new Map));if(e.firstElementChild.textContent=="[]")return r._mapToJSON(i(tree,[]));function i(l,a){if(typeof l!="object"||l==null||Array.isArray(l))throw new Error("Error List Item number "+n+": @param { {} } list");if(typeof a=="object"&&a!==null&&!Array.isArray(a)&&a instanceof Map&&a.constructor===Map){for(let o=0,c=l.children.length;o<c;o++)if(n++,l.children[o].tagName=="LI")if(l.children[o].firstElementChild.tagName=="CODE")if(l.children[o].firstElementChild.innerHTML.length){let f=l.children[o].firstElementChild.innerHTML.trim();if(f[f.length-1]==":"&&f.length>1){let p=l.children[o].children[1];if(p.tagName=="UL"&&p.firstElementChild.tagName=="LI"&&p.children.length==1&&p.firstElementChild.firstElementChild.tagName=="CODE"){n++;let s=p.firstElementChild.firstElementChild.textContent.trim();s=="true"?a.set(f.slice(0,-1),!0):s=="false"?a.set(f.slice(0,-1),!1):s=="null"?a.set(f.slice(0,-1),null):isFinite(s)&&!isNaN(parseFloat(s))?a.set(f.slice(0,-1),s*1):a.set(f.slice(0,-1),s)}else throw new Error("Error List Item number "+n+": not DAMON-compliant.")}else if(f[f.length-4]==":"&&f.length>4){if(f.slice(-3)==" []")if(a.set(f.slice(0,-4),[]),l.children[o].children[1].tagName=="UL")i(l.children[o].children[1],a.get(f.slice(0,-4)));else throw new Error("Error List Item number "+n+": not DAMON-compliant.");else if(f.slice(-3)==" {}")if(a.set(f.slice(0,-4),new Map),l.children[o].children[1].tagName=="UL")i(l.children[o].children[1],a.get(f.slice(0,-4)));else throw new Error("Error List Item number "+n+": not DAMON-compliant.")}else throw new Error("Error List Item number "+n+": map items need a key")}else throw new Error("Error List Item number "+n+": empty node.");else throw new Error("Error List Item number "+n+": not DAMON-compliant.")}else if(Array.isArray(a)){for(let o=0,c=l.children.length;o<c;o++)if(n++,l.children[o].tagName=="LI")if(l.children[o].firstElementChild.tagName=="CODE")if(l.children[o].firstElementChild.innerHTML.length){let f=l.children[o].firstElementChild.innerHTML.trim();if(f[f.length-1]==":"&&f.length>1)throw new Error("Error List Item number "+n+": lists can't have keys.");if(f[f.length-4]==":"&&f.length>4)throw new Error("Error List Item number "+n+": not DAMON-compliant.");if(f=="[]")if(a.push([]),l.children[o].children[1]&&l.children[o].children[1].tagName=="UL")i(l.children[o].children[1],a[a.length-1]);else throw new Error("Error List Item number "+n+": not DAMON-compliant.");else if(f=="{}")if(a.push({}),l.children[o].children[1]&&l.children[o].children[1].tagName=="UL")i(l.children[o].children[1],a[a.length-1]);else throw new Error("Error List Item number "+n+": not DAMON-compliant.");else f=="true"?a.push(!0):f=="false"?a.push(!1):f=="null"?a.push(null):isFinite(f)&&!isNaN(parseFloat(f))?a.push(f*1):a.push(f)}else throw new Error("Error List Item number "+n+": empty node.");else throw new Error("Error List Item number "+n+": not DAMON-compliant.")}else throw new Error("Error List Item number "+n+": @param { {} | [] } jsonMap");return a}}mapsDiff(e,r){let n=this;try{n.parentContext.mapToJSON(e),n.parentContext.mapToJSON(r)}catch{throw new Error("Provided map value doesn't passes JSON.parse()")}var i="";return Array.isArray(jsonMap)?i+=`- []
`:i+=`- {}
`,l(jsonMap),i.slice(0,-1);function l(a,o=1){if(typeof a=="object"&&a!==null&&!Array.isArray(a)&&a instanceof Map&&a.constructor===Map)for(let[p,s]of a)if(typeof s=="object"&&s!==null)if(Array.isArray(s)){let g=0,y=s.filter(function(m){return m===!0||m===!1?!0:m===null?(g++,!0):typeof m=="string"?!0:!!(isFinite(m)&&!isNaN(parseFloat(m))&&Number.isFinite(m*1)&&!Number.isNaN(m*1))});if(s.length==y.length&&o*4+2+s.join(", ").length+g*4<=80){let m="["+s.map(d=>JSON.stringify(d)).join(", ")+"]";i+="    ".repeat(o)+"- "+JSON.stringify(p).slice(1,-1)+": "+m+`
`}else i+="    ".repeat(o)+"- "+JSON.stringify(p).slice(1,-1)+`: []
`,l(s,o+1)}else i+="    ".repeat(o)+"- "+JSON.stringify(p).slice(1,-1)+`: {}
`,l(s,o+1);else i+="    ".repeat(o)+"- "+JSON.stringify(p).slice(1,-1)+": ",s===!0?i+=`true
`:s===!1?i+=`false
`:s===null?i+=`null
`:Number.isFinite(s)&&!Number.isNaN(s)?i+=s+`
`:i+=`${JSON.stringify(s)}
`;else if(Array.isArray(a))for(var c=0,f=a.length;c<f;c++)if(typeof a[c]=="object"&&a[c]!==null)if(Array.isArray(a[c])){let p=0,s=a[c].filter(function(g){return g===!0||g===!1?!0:g===null?(p++,!0):typeof g=="string"?!0:!!(isFinite(g)&&!isNaN(parseFloat(g))&&Number.isFinite(g*1)&&!Number.isNaN(g*1))});if(a[c].length==s.length&&o*4+2+a[c].join(", ").length+p*4<=80){let g="["+a[c].map(y=>JSON.stringify(y)).join(", ")+"]";i+="    ".repeat(o)+"- "+g+`
`}else i+="    ".repeat(o)+`- []
`,l(a[c],o+1)}else i+="    ".repeat(o)+`- {}
`,l(a[c],o+1);else a[c]===!0?i+="    ".repeat(o)+`- true
`:a[c]===!1?i+="    ".repeat(o)+`- false
`:a[c]===null?i+="    ".repeat(o)+`- null
`:Number.isFinite(a[c])&&!Number.isNaN(a[c])?i+="    ".repeat(o)+"- "+a[c]+`
`:i+="    ".repeat(o)+`- ${JSON.stringify(a[c])}
`}}}});var gn=M((Aa,mn)=>{var It=St(cn()),sl=hn();mn.exports=class{constructor(e=!1){let r=this;if(this.indentation=4,[!0,!1,void 0].indexOf(e)==-1)throw new Error("@param {Boolean} pedantic");this.pedantic=e,this.damonOriginalLinesMapping=[],this.utils=new sl(this)}template(e){let r=this;var n=e[0];for(let l=1;l<e.length;l++)typeof arguments[l]=="string"?n+='"'+arguments[l]+'"':n+=arguments[l],n+=e[l];return r._treeToMap(r._damonToTree(n))}damonToMap(e){let r=this,n=r._damonToTree(e);return n===!0||n===!1||n===null||typeof n=="string"||typeof n=="number"?n:r._treeToMap(r._damonToTree(e))}damonToJSON(e){let r=this;return r.mapToJSON(r.damonToMap(e))}damonToSExpression(e){let r=this;return r.implicitMapToSExpression(r.damonToMap(e))}jsonToDamon(e){let r=this;return r.mapToDamon(r.jsonToMap(e))}jsonToMap(e){let r=this;var n=/\r\n/.test(e)?`\r
`:`
`,i=e.split(n);if(i=i.filter(l=>!/^ *\/\//.test(l)),i=i.filter(l=>l!=""),i=i.filter(l=>!/^[ \t]+$/.test(l)),i.length==1){if(["true","false","null"].indexOf(i[0].trim())>-1)return JSON.parse(i[0]);if(/^".*"$/.test(i[0].trim()))try{return JSON.parse(i[0].trim())}catch(l){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),l.line=1,l.language="JSON",l.type="string",l}else if(isFinite(i[0])&&!isNaN(parseFloat(i[0]))&&Number.isFinite(i[0]*1)&&!Number.isNaN(i[0]*1)){if(i[0].indexOf(0)==0&&i[0].length>1&&i[0].indexOf(".")!==1)throw new Error("Error line number 1: leading 0",{line:1,language:"DAMON"});try{return JSON.parse(i[0]*1)}catch(l){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),l.line=1,l.language="JSON",l.type="number",l}}else if(i[0]*1===1/0)try{JSON.parse(i[0]*1)}catch(l){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),l.line=1,l.language="JSON",l.type="infinity",l}else return(0,It.parse)(e)}else return(0,It.parse)(e)}_damonToTree(e){let r=this;if(e==="")throw new Error("Error line 1: empty string",{line:1,language:"DAMON"});if(/[\s]/.test(e)&&e.match(new RegExp(/[\s]/))[0].length==e.length)throw new Error("Error line 1: string only contains whitespace",{line:1,language:"DAMON"});var n=/\r\n/.test(e)?`\r
`:`
`,i=e.split(n),l=i.slice(0);if(i=i.filter(d=>!/^ *\/\//.test(d)),i=i.filter(d=>d!=""),i=i.filter(d=>!/^[ \t]+$/.test(d)),i.length==1){if(["true","false","null"].indexOf(i[0].trim())>-1)return JSON.parse(i[0]);if(/^".*"$/.test(i[0].trim()))try{return JSON.parse(i[0].trim())}catch(d){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),d.line=1,d.language="JSON",d.type="string",d}else if(isFinite(i[0])&&!isNaN(parseFloat(i[0]))&&Number.isFinite(i[0]*1)&&!Number.isNaN(i[0]*1)){if(i[0].indexOf(0)==0&&i[0].length>1&&i[0].indexOf(".")!==1)throw new Error("Error line number 1: leading 0",{line:1,language:"DAMON"});try{return JSON.parse(i[0]*1)}catch(d){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),d.line=1,d.language="JSON",d.type="number",d}}else if(i[0]*1===1/0)try{JSON.parse(i[0]*1)}catch(d){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),d.line=1,d.language="JSON",d.type="infinity",d}}let a=0;r.damonOriginalLinesMapping=[];for(let d=0,b=l.length;d<b;d++)i.slice(a).indexOf(l[d])>-1?r.damonOriginalLinesMapping[d]=i.slice(a).indexOf(l[d]):r.damonOriginalLinesMapping[d]=null;let o=new RegExp("^(	)+");for(let d=0,b=i.length;d<b;d++){if(o.test(i[d])){let L=i[d].match(o)[0].length;for(let v=0,E=L;v<E;v++)i[d]=i[d].replace("	"," ".repeat(r.indentation))}if(!/^ *- $/.test(i[d])&&/[ \t]+$/.test(i[d]))throw new Error("Error line "+(r.damonOriginalLinesMapping.indexOf(d)+1)+": trailing whitespace",{line:r.damonOriginalLinesMapping.indexOf(d)+1,language:"DAMON"})}let c=new RegExp("^("+" ".repeat(r.indentation)+")+");if(c.test(i[0])){let d=i[0].match(c)[0].length,b=!0;for(let L=0,v=i.length;L<v;L++)c.test(i[L])&&i[L].match(c)[0].length>=d?i[L]=i[L].slice(d):b=!1;if(!b)throw new Error("Error line 1: bad formatting",{line:1,language:"DAMON"})}else if(c.test(i[1])&&i[1].match(c)[0].length>r.indentation){let d=i[1].match(c)[0].length-r.indentation,b=!0;for(let L=1,v=i.length;L<v;L++)c.test(i[L])&&i[L].match(c)[0].length>=d?i[L]=i[L].slice(d):b=!1;if(!b)throw new Error("Error line 2: bad formatting",{line:2,language:"DAMON"})}let f=!1;if(i.length>1)for(let d=0,b=i.length;d<b;d++)d!==0&&/^- /.test(i[d])&&(f=!0);if(!/^- \{\}$/.test(i[0])&&!/^- \[\]$/.test(i[0])&&(f=!0),f){for(let d=0,b=i.length;d<b;d++)i[d]=" ".repeat(r.indentation)+i[d];i.unshift("- {}")}var p={content:i[0],level:0,id:0,children:[],headless:f},s=p;if(!/^- /.test(i[0].trimStart())||/^ +/.test(i[0])&&(i[0].match(/^ +/)[0].length%r.indentation!=0||i[0].match(/^ +/)[0].length!=r.indentation))throw new Error("Error line "+(f*1+1)+": bad formatting",{line:f*1+1,language:"DAMON"});i.shift();for(let d=0,b=i.length;d<b;d++){if(!/^- /.test(i[d].trimStart())||/^ +/.test(i[d])&&(i[d].match(/^ +/)[0].length%r.indentation!=0||d==0&&i[d].match(/^ +/)[0].length!=r.indentation||d!=0&&/^- /.test(i[d-1])&&i[d].match(/^ +/)[0].length!=r.indentation||d!=0&&!/^- /.test(i[d-1])&&i[d].match(/^ +/)[0].length>i[d-1].match(/^ +/)[0].length+r.indentation))throw new Error("Error line "+(r.damonOriginalLinesMapping.indexOf(d)+1)+": bad formatting",{line:r.damonOriginalLinesMapping.indexOf(d)+1,language:"DAMON"});let L={content:i[d].trimStart().slice(2),level:1+i[d].match(/^ +/)[0].length/r.indentation,id:"",children:[]};if(s===p)L.id=p.children.length+1,p.children.push(L);else if(s.level===L.level){var g=r._findListItemCommonDirectParent(s,p);g.level==0?L.id=g.children.length+1:L.id=g.id+"-"+(g.children.length+1),g.children.push(L)}else if(s.level>L.level){var y=r._findListItemCommonAncestor(s,p,L.level);y.level==0?L.id=y.children.length+1:L.id=y.id+"-"+(y.children.length+1),y.children.push(L)}else if(s.level<L.level){var m=r._findListItemCommonDirectParent(s,p);let v=m.children.indexOf(s),E=m.children[v].id,w=m.children[v].children.length+1;L.id=E+"-"+w,m.children[v].children.push(L)}s=L}return p}_findListItemCommonDirectParent(e,r){let n=this;if(r.children.indexOf(e)>-1)return r;var i;for(let l=r.children.length-1,a=0;l>=a;l--)if(i=n._findListItemCommonDirectParent(e,r.children[l]),i)return i}_findListItemCommonAncestor(e,r,n){let i=this;var l=i._findListItemCommonDirectParent(e,r);return l.level<n?l:i._findListItemCommonAncestor(l,r,n)}_treeToMap(e){let r=this;var n=0;if(e.content=="- {}")return i(e,new Map);if(e.content=="- []")return i(e,[]);{let o=new Map;return e.headless&&(o.headless=!0),i(e,o)}function i(o,c){if(typeof o!="object"||o==null||Array.isArray(o))throw new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+2)+": @param { {} } tree",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+2,language:"DAMON"});if(typeof c=="object"&&c!==null&&!Array.isArray(c)&&c instanceof Map&&c.constructor===Map)l(o,c);else if(Array.isArray(c))a(o,c);else throw new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+2)+": @param { {} | [] } jsonMap",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+2,language:"DAMON"});return c}function l(o,c){for(let f=0,p=o.children.length;f<p;f++)if(n++,o.children[f].content.length==0){let s;o.children[f].children.length>0?(s="implicit map key",c.set("",new Map),c.implicitMaps===void 0&&(c.implicitMaps=[]),c.implicitMaps.push(""),i(o.children[f],c.get(""))):(s="implicit null key",c.set("",null),c.implicitNulls===void 0&&(c.implicitNulls=[]),c.implicitNulls.push(""))}else{let s=o.children[f].content,g="key";try{if(/^.*: +\[/.test(s)&&s[s.length-1]=="]")if(/: +\[ *\]$/.test(s)){let y=JSON.stringify(JSON.parse(`["${s.slice(0,-1*s.match(/: +\[ *\]$/)[0].length)}"]`)[0]).slice(1,-1);c.set(y,[]),o.children[f].children.length>0&&i(o.children[f],c.get(y))}else{let y=new RegExp(/: +\[/g),m=s.slice(0,-1).split(y),d=s.match(y).concat([""]),b=m.map((w,N)=>w+d[N]),L="",v=[];for(let w=0,N=m.length;w<N;w++)try{let S;if(w==0?S=m[0]:S=b.slice(0,w).join("")+m[w],L=JSON.stringify(JSON.parse(`["${S}"]`)[0]).slice(1,-1),g="list",v=JSON.parse(`[${b.slice(w+1).join("")}]`),Array.isArray(v))break}catch{if(w==N-2)throw new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+2)+": invalid inline list",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+2,language:"DAMON"})}if(v.every(function(w){return w===!0||w===!1?!0:w===null?(nullsCounter++,!0):typeof w=="string"?!0:!!(isFinite(w)&&!isNaN(parseFloat(w))&&Number.isFinite(w*1)&&!Number.isNaN(w*1))}))c.set(L,v),c.inlineArrays===void 0&&(c.inlineArrays=[]),c.inlineArrays.push(L);else throw new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+2)+": no nesting in inline lists",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+2,language:"DAMON"});if(o.children[f].children.length>0)throw new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+3)+": inline lists can't have children",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+3,language:"DAMON"})}else if(/: +\{ *\}$/.test(s)){let y=JSON.stringify(JSON.parse(`["${s.slice(0,-1*s.match(/: +\{ *\}$/)[0].length)}"]`)[0]).slice(1,-1);c.set(y,new Map),i(o.children[f],c.get(y))}else{let y=!1;if(s.split(new RegExp(/: +/))[s.split(new RegExp(/: +/)).length-1]==="true"){let m=s.match(new RegExp(/: +/g))[s.match(new RegExp(/: +/g)).length-1],d=JSON.stringify(JSON.parse(`["${s.slice(0,-1*m.length-4)}"]`)[0]).slice(1,-1);c.set(d,!0)}else if(s.split(new RegExp(/: +/))[s.split(new RegExp(/: +/)).length-1]==="false"){let m=s.match(new RegExp(/: +/g))[s.match(new RegExp(/: +/g)).length-1],d=JSON.stringify(JSON.parse(`["${s.slice(0,-1*m.length-5)}"]`)[0]).slice(1,-1);c.set(d,!1)}else if(s.split(new RegExp(/: +/))[s.split(new RegExp(/: +/)).length-1]=="null"){let m=s.match(new RegExp(/: +/g))[s.match(new RegExp(/: +/g)).length-1],d=JSON.stringify(JSON.parse(`["${s.slice(0,-1*m.length-4)}"]`)[0]).slice(1,-1);c.set(d,null)}else if(/^.*: +"/.test(s)&&s[s.length-1]=='"'){let m=s.match(new RegExp(/: +"/g));if(m.length==1){let d=JSON.stringify(JSON.parse(`["${s.split(m[0])[0]}"]`)[0]).slice(1,-1);g="string";let b=JSON.stringify(JSON.parse(`["${s.split(m[0]).slice(1).join("").slice(0,-1)}"]`)[0]).slice(1,-1);c.set(d,b)}else if(m.length==2&&/: +"$/.test(s)){let d=JSON.stringify(JSON.parse(`["${s.split(m[0])[0]}"]`)[0]).slice(1,-1);g="string";let b=JSON.stringify(JSON.parse(`["${s.split(m[0]).slice(1).join("")+": "}"]`)[0]).slice(1,-1);c.set(d,b)}else throw new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+2)+": unescaped double quote",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+2,language:"DAMON"})}else if(/^.*: /.test(s)&&isFinite(s.split(": ")[s.split(": ").length-1])&&!isNaN(parseFloat(s.split(": ")[s.split(": ").length-1]))&&Number.isFinite(s.split(": ")[s.split(": ").length-1]*1)&&!Number.isNaN(s.split(": ")[s.split(": ").length-1]*1)){let m=JSON.stringify(JSON.parse(`["${s.split(": ").slice(0,-1).join(": ")}"]`)[0]).slice(1,-1);g="number";let d=s.match(new RegExp(/: +/g)),b=d[d.length-1],L=s.split(b)[s.split(b).length-1];if(L.indexOf(0)==0&&L.length>1&&L.indexOf(".")!==1)throw new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+2)+": leading 0",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+2,language:"DAMON"});let v=JSON.stringify(JSON.parse(`[${s.split(": ")[s.split(": ").length-1]*1}]`)[0])*1;c.set(m,v)}else if(/^.*: /.test(s)&&s.split(new RegExp(/: +/))[s.split(new RegExp(/: +/)).length-1]*1===1/0){let m=JSON.stringify(JSON.parse(`["${s.split(": ").slice(0,-1).join(": ")}"]`)[0]).slice(1,-1);g="infinity";let d=JSON.stringify(JSON.parse(`[${s.split(": ")[s.split(": ").length-1]*1}]`))*1}else{let m=!1,d=0;if(/\[ *\]$/.test(s)&&(m=!0,d=s.match(new RegExp(/\[ *\]$/g))[0].length),/\{ *\}$/.test(s)&&(m=!0,d=s.match(new RegExp(/\{ *\}$/g))[0].length),/true$/.test(s)&&(m=!0,d=4),/false$/.test(s)&&(m=!0,d=5),/null$/.test(s)&&(m=!0,d=4),/".*"$/.test(s)&&(m=!0,d=s.match(new RegExp(/".*"$/g))[0].length),!m){let b="";for(let L=s.length-1;L>-1&&(b=s[L].concat(b),isFinite(b)&&!isNaN(parseFloat(b))&&Number.isFinite(b*1)&&!Number.isNaN(b*1));L--){if(!/[ \t]/.test(s[L]))break;m=!0,d=b.length}}if(m){let b=JSON.stringify(JSON.parse(`["${s.slice(0,-1*d)}"]`)[0]).slice(1,-1);if(r.pedantic)throw new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(n))+": missing separator",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(n),language:"DAMON",errorType:"pedantic"});if(/: +$/.test(b))if(y=!0,o.children[f].children.length>0){g="implicit map key";let L=JSON.stringify(JSON.parse(`["${s}"]`)[0]).slice(1,-1);c.set(L,new Map),c.implicitMaps===void 0&&(c.implicitMaps=[]),c.implicitMaps.push(L),i(o.children[f],c.get(L))}else{g="implicit null key";let L=JSON.stringify(JSON.parse(`["${s}"]`)[0]).slice(1,-1);c.set(L,null),c.implicitNulls===void 0&&(c.implicitNulls=[]),c.implicitNulls.push(L)}else throw new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(n))+": missing separator",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(n),language:"DAMON",errorType:"pedantic"})}else{let b=JSON.stringify(JSON.parse(`["${s.slice(0,-1*d)}"]`)[0]).slice(1,-1);if(r.pedantic)throw/: +$/.test(b)?new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+3)+": bad value",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(n),language:"DAMON",errorType:"pedantic"}):new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(n))+": missing separator",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(n),language:"DAMON",errorType:"pedantic"});if(y=!0,o.children[f].children.length>0){g="implicit map key";let L=JSON.stringify(JSON.parse(`["${s}"]`)[0]).slice(1,-1);c.set(L,new Map),c.implicitMaps===void 0&&(c.implicitMaps=[]),c.implicitMaps.push(L),i(o.children[f],c.get(L))}else{g="implicit null key";let L=JSON.stringify(JSON.parse(`["${s}"]`)[0]).slice(1,-1);c.set(L,null),c.implicitNulls===void 0&&(c.implicitNulls=[]),c.implicitNulls.push(L)}}}if(!y&&o.children[f].children.length>0)throw new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+3)+": missing container or excess indentation",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+3,language:"DAMON"})}}catch(y){throw y.language===void 0&&(console.error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+2)+": not JSON-compliant, detailed error follows"),y.line=e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+2,y.language="JSON",y.type=g),y}}}function a(o,c){for(let f=0,p=o.children.length;f<p;f++)if(n++,o.children[f].content.length){let s=o.children[f].content;if(/^[ \t]*\[/.test(s)&&s[s.length-1]=="]")if(/^[ \t]*\[ *\]$/.test(s))c.push([]),i(o.children[f],c[c.length-1]);else{let g;try{g=JSON.parse(s)}catch{throw new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+2)+": invalid inline lists",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+2,language:"JSON",type:"list"})}if(g.every(function(m){return m===!0||m===!1?!0:m===null?(nullsCounter++,!0):typeof m=="string"?!0:!!(isFinite(m)&&!isNaN(parseFloat(m))&&Number.isFinite(m*1)&&!Number.isNaN(m*1))}))c.push(g),c.inlineArrays===void 0&&(c.inlineArrays=[]),c.inlineArrays.push(f);else throw new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+2)+": no nesting in inline lists",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+2,language:"DAMON"});if(o.children[f].children.length>0)throw new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+3)+": inline lists can't have children",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+3,language:"DAMON"})}else if(/^[ \t]*\{\}$/.test(s))c.push(new Map),i(o.children[f],c[c.length-1]);else if(/^[ \t]*true$/.test(s))c.push(!0);else if(/^[ \t]*false$/.test(s))c.push(!1);else if(/^[ \t]*null$/.test(s))c.push(null);else if(/^[ \t]*".*"$/.test(s))try{c.push(JSON.stringify(JSON.parse(`[${s.trimStart()}]`)[0]).slice(1,-1))}catch(g){throw console.error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+2)+": not JSON-compliant, detailed error follows"),g.line=e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+2,g.language="JSON",g.type="string",g}else if(isFinite(s)&&!isNaN(parseFloat(s))&&Number.isFinite(s*1)&&!Number.isNaN(s*1)){if(s.indexOf(0)==0&&s.length>1&&s.indexOf(".")!==1)throw new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+2)+": leading 0",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+2,language:"DAMON"});try{c.push(JSON.stringify(JSON.parse(`[${s*1}]`)[0])*1)}catch(g){throw console.error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+2)+": not JSON-compliant, detailed error follows"),g.line=e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+2,g.language="JSON",g.type="number",g}}else if(s*1===1/0)try{JSON.stringify(JSON.parse(s*1))}catch(g){throw console.error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+2)+": not JSON-compliant, detailed error follows"),g.line=e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+2,g.language="JSON",g.type="infinity",g}else throw new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+2)+": list items can't have a key",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+2,language:"DAMON"})}else throw new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+2)+": empty list node",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(n-1)+2,language:"DAMON"})}}mapToDamon(e){let r=this;var n="";if(Array.isArray(e))n+=`- []
`;else if(typeof e=="object"&&e!==null&&e instanceof Map&&e.constructor===Map)n+=`- {}
`;else return typeof e=="string"&&(e='"'+e+'"'),JSON.parse(e),e;return i(e),r.damonToMap(n.slice(0,-1)),n.slice(0,-1);function i(l,a=1){if(typeof l=="object"&&l!==null&&!Array.isArray(l)&&l instanceof Map&&l.constructor===Map)for(let[f,p]of l)if(typeof p=="object"&&p!==null)if(Array.isArray(p)){let s=0,g=p.filter(function(y){return y===!0||y===!1?!0:y===null?(s++,!0):typeof y=="string"?!0:!!(isFinite(y)&&!isNaN(parseFloat(y))&&Number.isFinite(y*1)&&!Number.isNaN(y*1))});if(p.length==g.length&&a*4+2+p.join(", ").length+s*4<=80){let y="["+p.map(function(m){return typeof m=="string"&&(m='"'+m+'"'),m}).join(", ")+"]";n+="    ".repeat(a)+"- "+f+": "+y+`
`}else n+="    ".repeat(a)+"- "+f+`: []
`,i(p,a+1)}else n+="    ".repeat(a)+"- "+f+`: {}
`,i(p,a+1);else n+="    ".repeat(a)+"- "+f+": ",p===!0?n+=`true
`:p===!1?n+=`false
`:p===null?n+=`null
`:Number.isFinite(p)&&!Number.isNaN(p)?n+=p+`
`:n+=`"${p}"
`;else if(Array.isArray(l))for(var o=0,c=l.length;o<c;o++)if(typeof l[o]=="object"&&l[o]!==null)if(Array.isArray(l[o])){let f=0,p=l[o].filter(function(s){return s===!0||s===!1?!0:s===null?(f++,!0):typeof s=="string"?!0:!!(isFinite(s)&&!isNaN(parseFloat(s))&&Number.isFinite(s*1)&&!Number.isNaN(s*1))});if(l[o].length==p.length&&a*4+2+l[o].join(", ").length+f*4<=80){let s="["+l[o].map(function(g){return typeof g=="string"&&(g='"'+g+'"'),g}).join(", ")+"]";n+="    ".repeat(a)+"- "+s+`
`}else n+="    ".repeat(a)+`- []
`,i(l[o],a+1)}else n+="    ".repeat(a)+`- {}
`,i(l[o],a+1);else l[o]===!0?n+="    ".repeat(a)+`- true
`:l[o]===!1?n+="    ".repeat(a)+`- false
`:l[o]===null?n+="    ".repeat(a)+`- null
`:Number.isFinite(l[o])&&!Number.isNaN(l[o])?n+="    ".repeat(a)+"- "+l[o]+`
`:n+="    ".repeat(a)+`- "${l[o]}"
`}}mapToJSON(e){let r=this;var n="";if(Array.isArray(e))return n+=`[\r
`,i(e),n+="]",JSON.parse(n),n;return typeof e=="object"&&e!==null&&e instanceof Map&&e.constructor===Map?(n+=`{\r
`,i(e),n+="}",JSON.parse(n),n):(typeof e=="string"&&(e='"'+e+'"'),JSON.parse(e),e);function i(l,a=1){if(typeof l=="object"&&l!==null&&!Array.isArray(l)&&l instanceof Map&&l.constructor===Map)for(let[f,p]of l)typeof p=="object"&&p!==null?Array.isArray(p)?p.length>0?(n+="    ".repeat(a)+`"${f}": [\r
`,i(p,a+1),n+="    ".repeat(a)+"]"):n+="    ".repeat(a)+`"${f}": []`:Array.from(p.keys()).length>0?(n+="    ".repeat(a)+`"${f}": {\r
`,i(p,a+1),n+="    ".repeat(a)+"}"):n+="    ".repeat(a)+`"${f}": {}`:p===!0?n+="    ".repeat(a)+`"${f}": true`:p===!1?n+="    ".repeat(a)+`"${f}": false`:p===null?n+="    ".repeat(a)+`"${f}": null`:Number.isFinite(p)&&!Number.isNaN(p)?n+="    ".repeat(a)+`"${f}": `+p:n+="    ".repeat(a)+`"${f}": "${p}"`,f!=Array.from(l.keys())[Array.from(l.keys()).length-1]?n+=`,\r
`:n+=`\r
`;else if(Array.isArray(l))for(var o=0,c=l.length;o<c;o++)typeof l[o]=="object"&&l[o]!==null?Array.isArray(l[o])?l[o].length>0?(n+="    ".repeat(a)+`[\r
`,i(l[o],a+1),n+="    ".repeat(a)+"]"):n+="    ".repeat(a)+"[]":Array.from(l[o].keys()).length>0?(n+="    ".repeat(a)+`{\r
`,i(l[o],a+1),n+="    ".repeat(a)+"}"):n+="    ".repeat(a)+"{}":l[o]===!0?n+="    ".repeat(a)+"true":l[o]===!1?n+="    ".repeat(a)+"false":l[o]===null?n+="    ".repeat(a)+"null":Number.isFinite(l[o])&&!Number.isNaN(l[o])?n+="    ".repeat(a)+l[o]:n+="    ".repeat(a)+`"${l[o]}"`,o!=c-1?n+=`,\r
`:n+=`\r
`}}implicitMapToSExpression(e){let r=this;var n="";if(typeof e=="object"&&e!==null&&e instanceof Map&&e.constructor===Map)return n+=`[\r
`,i(e),n+="]",JSON.parse(n),n;return typeof e=="string"&&(e='"'+e+'"'),JSON.parse(e),e;function i(l,a=1){if(typeof l=="object"&&l!==null&&!Array.isArray(l)&&l instanceof Map&&l.constructor===Map){let f=-1;for(let[p,s]of l){if(f++,typeof s=="object"&&s!==null)if(Array.isArray(s))s.length>0?(n+="    ".repeat(a)+`"${p}", [\r
`,i(s,a+1),n+="    ".repeat(a)+"]"):n+="    ".repeat(a)+`"${p}", []`;else if(Array.from(s.keys()).length>0){if(a==1)if(f==0)n="";else throw new Error("Multiple S-Expression roots");n+="    ".repeat(a)+`["${p}", \r
`,i(s,a+1),a!=1&&(n+="    ".repeat(a)+"]")}else n+="    ".repeat(a)+`"${p}", []`;else{if(s===!0)throw new Error("Booleans require quotes");if(s===!1)throw new Error("Booleans require quotes");s===null?n+="    ".repeat(a)+`"${p}"`:Number.isFinite(s)&&!Number.isNaN(s)?n+="    ".repeat(a)+`"${p}", `+s:n+="    ".repeat(a)+`"${p}", "${s}"`}p!=Array.from(l.keys())[Array.from(l.keys()).length-1]?n+=`,\r
`:n+=`\r
`}}else if(Array.isArray(l))for(var o=0,c=l.length;o<c;o++){if(typeof l[o]=="object"&&l[o]!==null)Array.isArray(l[o])?l[o].length>0?(n+="    ".repeat(a)+`[\r
`,i(l[o],a+1),n+="    ".repeat(a)+"]"):n+="    ".repeat(a)+"[]":Array.from(l[o].keys()).length>0?(n+="    ".repeat(a)+`[\r
`,i(l[o],a+1),n+="    ".repeat(a)+"]"):n+="    ".repeat(a)+"[]";else{if(l[o]===!0)throw new Error("Booleans require quotes");if(l[o]===!1)throw new Error("Booleans require quotes");if(l[o]===null)throw new Error("Array-nulls require quotes");Number.isFinite(l[o])&&!Number.isNaN(l[o])?n+="    ".repeat(a)+l[o]:n+="    ".repeat(a)+`"${l[o]}"`}o!=c-1?n+=`,\r
`:n+=`\r
`}}}}});var Ft=M((Da,yn)=>{yn.exports=class{constructor(e){let r=this;this.parent=e,this.itemHeight=parseFloat(getComputedStyle(this.parent.editor).getPropertyValue("--fontSize"))*parseFloat(getComputedStyle(this.parent.editor).getPropertyValue("--lineHeight")),this.viewportHeight=this.parent.editor.getBoundingClientRect().height,this.viewable=Math.ceil(r.viewportHeight/r.itemHeight),this.maxCounter=this.parent.textarea.value.split(`
`).length,this.buffer=r.viewable*2,this.visibleNodesCount=r.viewable+r.buffer,this.lastScrollTop=void 0,this.lastStart=void 0,this.active=!1}inputHandler(e){let r=this;r.parent.textarea.value.split(`
`).length<=r.visibleNodesCount?(r.parent.gutter.innerHTML="",r.init(0)):(r.parent.gutter.innerHTML="",r.init(r.getStartNode(r.parent.textarea.value.split(`
`).length)))}scrollHandler(){let e=this;e.maxCounter<e.visibleNodesCount?e.lastScrollTop!==e.parent.editor.scrollTop?(e.parent.gutter.innerHTML="",e.parent.editor.style.setProperty("--scrollbarPadding","0px"),e.init(0)):(e.parent.editor.style.setProperty("--scrollbarPadding","0px"),e.parent.gutter.style.transform="translate("+e.parent.editor.scrollLeft+"px, "+0*e.itemHeight+"px)",e.parent.overlay.firstElementChild.style.transform="translate(0px, "+0*e.itemHeight+"px)"):e.lastScrollTop!==e.parent.editor.scrollTop?(e.active=!0,e.parent.editor.style.setProperty("--scrollbarPadding","var(--textareaPadding) * 4"),e.update(e.getStartNode(e.maxCounter))):(e.parent.gutter.style.transform="translate("+e.parent.editor.scrollLeft+"px, "+e.getStartNode(e.maxCounter)*e.itemHeight+"px)",e.parent.overlay.firstElementChild.style.transform="translate(0px, "+e.getStartNode(e.maxCounter)*e.itemHeight+"px)")}init(e){let r=this;r.parent.textarea.style.height=(r.parent.textarea.value.split(`
`).length+1)*r.itemHeight+"px",r.resetProperties(),e>r.maxCounter-r.visibleNodesCount&&(r.maxCounter-r.visibleNodesCount>0?e=r.maxCounter-r.visibleNodesCount:e=0);let n=Math.max(1,Math.min(r.maxCounter-e,r.visibleNodesCount));for(let c=e;c<e+n;c++){let f=document.createElement("div"),p=document.createElement("span"),s=(r.maxCounter+"").length,g=(c+1+"").length,y=s-g;p.textContent=" ".repeat(y)+(c+1),f.appendChild(p),r.parent.gutter.appendChild(f)}r.parent.gutter.style.transform="translate("+r.parent.editor.scrollLeft+"px, "+e*r.itemHeight+"px)",r.parent.overlay.firstElementChild.style.transform="translate(0px, "+e*r.itemHeight+"px)",r.lastStart=e,r.lastScrollTop=r.parent.editor.scrollTop,r.maxCounter>=r.visibleNodesCount&&(r.active=!0),r.setGutterWidth(),r.parent.updateCurrentLine(!0);let i=r.parent.textarea.value.split(`
`);r.parent.textarea.rows=i.length+1,r.parent.textarea.cols=i.map(c=>c.length).reduce(function(c,f){return Math.max(c,f)});let l=r.parent.textarea.value.replaceAll(/&amp;/g,"&").replaceAll(/&lt;/g,"<").replaceAll(/&gt;/g,">"),a=[`<span class="token lf">
</span>`],o=r.parent.lastTextareaValue.split(`
`);l!=""&&(a=r.parent.prism.highlight(l+`
`,r.parent.prism.languages.damon,"damon").replace(/<span>\n<\/span>$/,"").split(`
`).map(c=>c.replace(/^<\/span>/,"")+`
</span>`));for(let c=e,f=e+n;c<f;c++){let p=document.createElement("span"),s=0;p.classList.add("space-line"),p.innerHTML=a[c];for(let g=0,y=p.children.length;g<y&&p.children[g].textContent==" ";g++)s++,s==4&&(s=0,p.children[g-3].classList.add("indent-guide"));(!r.parent.initialized||o[c]==null||o[c]!=i[c]||r.parent.overlay.firstElementChild.children[c-e]!=null&&p.innerHTML!=r.parent.overlay.firstElementChild.children[c-e].innerHTML)&&(o[c]==null||!r.parent.initialized?(r.parent.overlay.firstElementChild.appendChild(p),r.parent.overlay.firstElementChild.children.length>n+1&&r.parent.overlay.firstElementChild.firstElementChild.remove()):r.parent.overlay.firstElementChild.replaceChild(p,r.parent.overlay.firstElementChild.children[c-e]))}if(r.parent.overlay.firstElementChild.children.length>n)for(let c=n,f=r.parent.overlay.firstElementChild.children.length;c<f;c++)r.parent.overlay.firstElementChild.lastElementChild.remove()}getStartNode(e){let r=this,n=Math.floor(r.parent.editor.scrollTop/r.itemHeight)-r.viewable;return n=Math.min(Math.max(0,n),Math.max(0,e-r.buffer)),n}resetProperties(){let e=this;e.viewportHeight=e.parent.editor.getBoundingClientRect().height,e.viewable=Math.ceil(e.viewportHeight/e.itemHeight),e.maxCounter=e.parent.textarea.value.split(`
`).length,e.buffer=e.viewable*2,e.visibleNodesCount=e.viewable+e.buffer,e.active=!1}update(e){let r=this;if(r.resetProperties(),r.parent.gutter.firstElementChild)if(r.lastScrollTop!=r.parent.editor.scrollTop)e>r.maxCounter-r.visibleNodesCount&&(r.maxCounter-r.visibleNodesCount>0?e=r.maxCounter-r.visibleNodesCount:e=0),r.diffItems(e,r.visibleNodesCount),r.parent.gutter.style.transform="translate("+r.parent.editor.scrollLeft+"px, "+e*r.itemHeight+"px)",r.parent.overlay.firstElementChild.style.transform="translate(0px, "+e*r.itemHeight+"px)",r.lastScrollTop=r.parent.editor.scrollTop;else if(/^translate\(.+px, .+px\)$/.test(r.parent.gutter.style.transform))r.parent.gutter.style.transform="translate("+r.parent.editor.scrollLeft+"px, "+r.parent.gutter.style.transform.split(", ")[1];else throw new Error("You need to update this regex.");r.setGutterWidth(),r.parent.updateCurrentLine(!0)}diffItems(e,r){let n=this;if(n.lastStart!=e){if(n.lastStart<e){let i=Math.min(r,Math.abs(e-n.lastStart));for(let f=0,p=i;f<p;f++)n.parent.gutter.firstElementChild.remove();for(let f=e+r-i;f<e+r;f++){let p=document.createElement("div"),s=document.createElement("span"),g=(n.maxCounter+"").length,y=(f+1+"").length,m=g-y;s.textContent=" ".repeat(m)+(f+1),p.appendChild(s),n.parent.gutter.appendChild(p)}let l=n.parent.textarea.value.split(`
`);n.parent.textarea.rows=l.length+1,n.parent.textarea.cols=l.map(f=>f.length).reduce(function(f,p){return Math.max(f,p)});let a=n.parent.textarea.value.replaceAll(/&amp;/g,"&").replaceAll(/&lt;/g,"<").replaceAll(/&gt;/g,">"),o=n.parent.prism.highlight(a+`
`,n.parent.prism.languages.damon,"damon").replace(/<span>\n<\/span>$/,"").split(`
`).map(f=>f.replace(/^<\/span>/,"")+`
</span>`),c=n.parent.lastTextareaValue.split(`
`);for(let f=0,p=i;f<p;f++)n.parent.overlay.firstElementChild.firstElementChild.remove();for(let f=e+r-i;f<e+r;f++){let p=document.createElement("span"),s=0;p.classList.add("space-line"),p.innerHTML=o[f];for(let g=0,y=p.children.length;g<y&&p.children[g].textContent==" ";g++)s++,s==4&&(s=0,p.children[g-3].classList.add("indent-guide"));n.parent.overlay.firstElementChild.appendChild(p)}}else{let i=Math.min(r,Math.abs(n.lastStart-e));for(let s=0,g=i;s<g;s++)n.parent.gutter.lastElementChild.remove();let l=document.createDocumentFragment();for(let s=e;s<e+i;s++){let g=document.createElement("div"),y=document.createElement("span"),m=(n.maxCounter+"").length,d=(s+1+"").length,b=m-d;y.textContent=" ".repeat(b)+(s+1),g.appendChild(y),l.appendChild(g)}n.parent.gutter.insertBefore(l,n.parent.gutter.firstElementChild);let a=n.parent.textarea.value.split(`
`);n.parent.textarea.rows=a.length+1,n.parent.textarea.cols=a.map(s=>s.length).reduce(function(s,g){return Math.max(s,g)});let o=n.parent.textarea.value.replaceAll(/&amp;/g,"&").replaceAll(/&lt;/g,"<").replaceAll(/&gt;/g,">"),c=n.parent.prism.highlight(o+`
`,n.parent.prism.languages.damon,"damon").replace(/<span>\n<\/span>$/,"").split(`
`).map(s=>s.replace(/^<\/span>/,"")+`
</span>`),f=n.parent.lastTextareaValue.split(`
`);for(let s=0,g=i;s<g;s++)n.parent.overlay.firstElementChild.lastElementChild.remove();let p=document.createDocumentFragment();for(let s=e;s<e+i;s++){let g=document.createElement("span"),y=0;g.classList.add("space-line"),g.innerHTML=c[s];for(let m=0,d=g.children.length;m<d&&g.children[m].textContent==" ";m++)y++,y==4&&(y=0,g.children[m-3].classList.add("indent-guide"));p.appendChild(g)}n.parent.overlay.firstElementChild.insertBefore(p,n.parent.overlay.firstElementChild.firstElementChild)}n.lastStart=e}}setGutterWidth(){let e=this,r=e.parent.gutter.children[0].children[0].getBoundingClientRect().width,n=parseFloat(getComputedStyle(e.parent.editor).getPropertyValue("--gutterWidth"));r>n?(e.parent.gutter.style.width=r+"px",e.parent.container.style.left=r+"px"):(e.parent.gutter.style.width="",e.parent.container.style.left="")}}});var ue=M(Ht=>{"use strict";Object.defineProperty(Ht,"__esModule",{value:!0});Ht.default=En;function En(){}En.prototype={diff:function(e,r){var n,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=i.callback;typeof i=="function"&&(l=i,i={}),this.options=i;var a=this;function o(w){return l?(setTimeout(function(){l(void 0,w)},0),!0):w}e=this.castInput(e),r=this.castInput(r),e=this.removeEmpty(this.tokenize(e)),r=this.removeEmpty(this.tokenize(r));var c=r.length,f=e.length,p=1,s=c+f;i.maxEditLength&&(s=Math.min(s,i.maxEditLength));var g=(n=i.timeout)!==null&&n!==void 0?n:1/0,y=Date.now()+g,m=[{oldPos:-1,lastComponent:void 0}],d=this.extractCommon(m[0],r,e,0);if(m[0].oldPos+1>=f&&d+1>=c)return o([{value:this.join(r),count:r.length}]);var b=-1/0,L=1/0;function v(){for(var w=Math.max(b,-p);w<=Math.min(L,p);w+=2){var N=void 0,S=m[w-1],x=m[w+1];S&&(m[w-1]=void 0);var u=!1;if(x){var _=x.oldPos-w;u=x&&0<=_&&_<c}var O=S&&S.oldPos+1<f;if(!u&&!O){m[w]=void 0;continue}if(!O||u&&S.oldPos+1<x.oldPos?N=a.addToPath(x,!0,void 0,0):N=a.addToPath(S,void 0,!0,1),d=a.extractCommon(N,r,e,w),N.oldPos+1>=f&&d+1>=c)return o(ul(a,N.lastComponent,r,e,a.useLongestToken));m[w]=N,N.oldPos+1>=f&&(L=Math.min(L,w-1)),d+1>=c&&(b=Math.max(b,w+1))}p++}if(l)(function w(){setTimeout(function(){if(p>s||Date.now()>y)return l();v()||w()},0)})();else for(;p<=s&&Date.now()<=y;){var E=v();if(E)return E}},addToPath:function(e,r,n,i){var l=e.lastComponent;return l&&l.added===r&&l.removed===n?{oldPos:e.oldPos+i,lastComponent:{count:l.count+1,added:r,removed:n,previousComponent:l.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:r,removed:n,previousComponent:l}}},extractCommon:function(e,r,n,i){for(var l=r.length,a=n.length,o=e.oldPos,c=o-i,f=0;c+1<l&&o+1<a&&this.equals(r[c+1],n[o+1]);)c++,o++,f++;return f&&(e.lastComponent={count:f,previousComponent:e.lastComponent}),e.oldPos=o,c},equals:function(e,r){return this.options.comparator?this.options.comparator(e,r):e===r||this.options.ignoreCase&&e.toLowerCase()===r.toLowerCase()},removeEmpty:function(e){for(var r=[],n=0;n<e.length;n++)e[n]&&r.push(e[n]);return r},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};function ul(t,e,r,n,i){for(var l=[],a;e;)l.push(e),a=e.previousComponent,delete e.previousComponent,e=a;l.reverse();for(var o=0,c=l.length,f=0,p=0;o<c;o++){var s=l[o];if(s.removed){if(s.value=t.join(n.slice(p,p+s.count)),p+=s.count,o&&l[o-1].added){var y=l[o-1];l[o-1]=l[o],l[o]=y}}else{if(!s.added&&i){var g=r.slice(f,f+s.count);g=g.map(function(d,b){var L=n[p+b];return L.length>d.length?L:d}),s.value=t.join(g)}else s.value=t.join(r.slice(f,f+s.count));f+=s.count,s.added||(p+=s.count)}}var m=l[c-1];return c>1&&typeof m.value=="string"&&(m.added||m.removed)&&t.equals("",m.value)&&(l[c-2].value+=m.value,l.pop()),l}});var wn=M(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.diffChars=dl;Me.characterDiff=void 0;var fl=cl(ue());function cl(t){return t&&t.__esModule?t:{default:t}}var xn=new fl.default;Me.characterDiff=xn;function dl(t,e,r){return xn.diff(t,e,r)}});var $t=M(Mt=>{"use strict";Object.defineProperty(Mt,"__esModule",{value:!0});Mt.generateOptions=pl;function pl(t,e){if(typeof t=="function")e.callback=t;else if(t)for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}});var bn=M(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.diffWords=yl;be.diffWordsWithSpace=El;be.wordDiff=void 0;var hl=gl(ue()),ml=$t();function gl(t){return t&&t.__esModule?t:{default:t}}var vn=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,On=/\S/,$e=new hl.default;be.wordDiff=$e;$e.equals=function(t,e){return this.options.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e||this.options.ignoreWhitespace&&!On.test(t)&&!On.test(e)};$e.tokenize=function(t){for(var e=t.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),r=0;r<e.length-1;r++)!e[r+1]&&e[r+2]&&vn.test(e[r])&&vn.test(e[r+2])&&(e[r]+=e[r+2],e.splice(r+1,2),r--);return e};function yl(t,e,r){return r=(0,ml.generateOptions)(r,{ignoreWhitespace:!0}),$e.diff(t,e,r)}function El(t,e,r){return $e.diff(t,e,r)}});var rt=M(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.diffLines=Ol;Le.diffTrimmedLines=bl;Le.lineDiff=void 0;var xl=vl(ue()),wl=$t();function vl(t){return t&&t.__esModule?t:{default:t}}var tt=new xl.default;Le.lineDiff=tt;tt.tokenize=function(t){this.options.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var e=[],r=t.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(var n=0;n<r.length;n++){var i=r[n];n%2&&!this.options.newlineIsToken?e[e.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),e.push(i))}return e};function Ol(t,e,r){return tt.diff(t,e,r)}function bl(t,e,r){var n=(0,wl.generateOptions)(r,{ignoreWhitespace:!0});return tt.diff(t,e,n)}});var Ln=M(ke=>{"use strict";Object.defineProperty(ke,"__esModule",{value:!0});ke.diffSentences=Sl;ke.sentenceDiff=void 0;var Ll=Nl(ue());function Nl(t){return t&&t.__esModule?t:{default:t}}var kt=new Ll.default;ke.sentenceDiff=kt;kt.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};function Sl(t,e,r){return kt.diff(t,e,r)}});var Nn=M(Be=>{"use strict";Object.defineProperty(Be,"__esModule",{value:!0});Be.diffCss=Al;Be.cssDiff=void 0;var _l=Tl(ue());function Tl(t){return t&&t.__esModule?t:{default:t}}var Bt=new _l.default;Be.cssDiff=Bt;Bt.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function Al(t,e,r){return Bt.diff(t,e,r)}});var _n=M(Ne=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0});Ne.diffJson=Rl;Ne.canonicalize=it;Ne.jsonDiff=void 0;var Sn=Dl(ue()),Cl=rt();function Dl(t){return t&&t.__esModule?t:{default:t}}function nt(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?nt=function(r){return typeof r}:nt=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},nt(t)}var Pl=Object.prototype.toString,ce=new Sn.default;Ne.jsonDiff=ce;ce.useLongestToken=!0;ce.tokenize=Cl.lineDiff.tokenize;ce.castInput=function(t){var e=this.options,r=e.undefinedReplacement,n=e.stringifyReplacer,i=n===void 0?function(l,a){return typeof a>"u"?r:a}:n;return typeof t=="string"?t:JSON.stringify(it(t,null,null,i),i,"  ")};ce.equals=function(t,e){return Sn.default.prototype.equals.call(ce,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function Rl(t,e,r){return ce.diff(t,e,r)}function it(t,e,r,n,i){e=e||[],r=r||[],n&&(t=n(i,t));var l;for(l=0;l<e.length;l+=1)if(e[l]===t)return r[l];var a;if(Pl.call(t)==="[object Array]"){for(e.push(t),a=new Array(t.length),r.push(a),l=0;l<t.length;l+=1)a[l]=it(t[l],e,r,n,i);return e.pop(),r.pop(),a}if(t&&t.toJSON&&(t=t.toJSON()),nt(t)==="object"&&t!==null){e.push(t),a={},r.push(a);var o=[],c;for(c in t)t.hasOwnProperty(c)&&o.push(c);for(o.sort(),l=0;l<o.length;l+=1)c=o[l],a[c]=it(t[c],e,r,n,c);e.pop(),r.pop()}else a=t;return a}});var Tn=M(Je=>{"use strict";Object.defineProperty(Je,"__esModule",{value:!0});Je.diffArrays=Hl;Je.arrayDiff=void 0;var Il=Fl(ue());function Fl(t){return t&&t.__esModule?t:{default:t}}var Ue=new Il.default;Je.arrayDiff=Ue;Ue.tokenize=function(t){return t.slice()};Ue.join=Ue.removeEmpty=function(t){return t};function Hl(t,e,r){return Ue.diff(t,e,r)}});var lt=M(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.parsePatch=Ml;function Ml(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.split(/\r\n|[\n\v\f\r\x85]/),n=t.match(/\r\n|[\n\v\f\r\x85]/g)||[],i=[],l=0;function a(){var f={};for(i.push(f);l<r.length;){var p=r[l];if(/^(\-\-\-|\+\+\+|@@)\s/.test(p))break;var s=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(p);s&&(f.index=s[1]),l++}for(o(f),o(f),f.hunks=[];l<r.length;){var g=r[l];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(g))break;if(/^@@/.test(g))f.hunks.push(c());else{if(g&&e.strict)throw new Error("Unknown line "+(l+1)+" "+JSON.stringify(g));l++}}}function o(f){var p=/^(---|\+\+\+)\s+(.*)$/.exec(r[l]);if(p){var s=p[1]==="---"?"old":"new",g=p[2].split("	",2),y=g[0].replace(/\\\\/g,"\\");/^".*"$/.test(y)&&(y=y.substr(1,y.length-2)),f[s+"FileName"]=y,f[s+"Header"]=(g[1]||"").trim(),l++}}function c(){var f=l,p=r[l++],s=p.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),g={oldStart:+s[1],oldLines:typeof s[2]>"u"?1:+s[2],newStart:+s[3],newLines:typeof s[4]>"u"?1:+s[4],lines:[],linedelimiters:[]};g.oldLines===0&&(g.oldStart+=1),g.newLines===0&&(g.newStart+=1);for(var y=0,m=0;l<r.length&&!(r[l].indexOf("--- ")===0&&l+2<r.length&&r[l+1].indexOf("+++ ")===0&&r[l+2].indexOf("@@")===0);l++){var d=r[l].length==0&&l!=r.length-1?" ":r[l][0];if(d==="+"||d==="-"||d===" "||d==="\\")g.lines.push(r[l]),g.linedelimiters.push(n[l]||`
`),d==="+"?y++:d==="-"?m++:d===" "&&(y++,m++);else break}if(!y&&g.newLines===1&&(g.newLines=0),!m&&g.oldLines===1&&(g.oldLines=0),e.strict){if(y!==g.newLines)throw new Error("Added line count did not match for hunk at line "+(f+1));if(m!==g.oldLines)throw new Error("Removed line count did not match for hunk at line "+(f+1))}return g}for(;l<r.length;)a();return i}});var An=M(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.default=$l;function $l(t,e,r){var n=!0,i=!1,l=!1,a=1;return function o(){if(n&&!l){if(i?a++:n=!1,t+a<=r)return a;l=!0}if(!i)return l||(n=!0),e<=t-a?-a++:(i=!0,o())}}});var Pn=M(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.applyPatch=Dn;at.applyPatches=Ul;var Cn=lt(),kl=Bl(An());function Bl(t){return t&&t.__esModule?t:{default:t}}function Dn(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string"&&(e=(0,Cn.parsePatch)(e)),Array.isArray(e)){if(e.length>1)throw new Error("applyPatch only works with a single input.");e=e[0]}var n=t.split(/\r\n|[\n\v\f\r\x85]/),i=t.match(/\r\n|[\n\v\f\r\x85]/g)||[],l=e.hunks,a=r.compareLine||function(X,V,te,re){return V===re},o=0,c=r.fuzzFactor||0,f=0,p=0,s,g;function y(X,V){for(var te=0;te<X.lines.length;te++){var re=X.lines[te],pe=re.length>0?re[0]:" ",Te=re.length>0?re.substr(1):re;if(pe===" "||pe==="-"){if(!a(V+1,n[V],pe,Te)&&(o++,o>c))return!1;V++}}return!0}for(var m=0;m<l.length;m++){for(var d=l[m],b=n.length-d.oldLines,L=0,v=p+d.oldStart-1,E=(0,kl.default)(v,f,b);L!==void 0;L=E())if(y(d,v+L)){d.offset=p+=L;break}if(L===void 0)return!1;f=d.offset+d.oldStart+d.oldLines}for(var w=0,N=0;N<l.length;N++){var S=l[N],x=S.oldStart+S.offset+w-1;w+=S.newLines-S.oldLines;for(var u=0;u<S.lines.length;u++){var _=S.lines[u],O=_.length>0?_[0]:" ",P=_.length>0?_.substr(1):_,U=S.linedelimiters&&S.linedelimiters[u]||`
`;if(O===" ")x++;else if(O==="-")n.splice(x,1),i.splice(x,1);else if(O==="+")n.splice(x,0,P),i.splice(x,0,U),x++;else if(O==="\\"){var J=S.lines[u-1]?S.lines[u-1][0]:null;J==="+"?s=!0:J==="-"&&(g=!0)}}}if(s)for(;!n[n.length-1];)n.pop(),i.pop();else g&&(n.push(""),i.push(`
`));for(var F=0;F<n.length-1;F++)n[F]=n[F]+i[F];return n.join("")}function Ul(t,e){typeof t=="string"&&(t=(0,Cn.parsePatch)(t));var r=0;function n(){var i=t[r++];if(!i)return e.complete();e.loadFile(i,function(l,a){if(l)return e.complete(l);var o=Dn(a,i,e);e.patched(i,o,function(c){if(c)return e.complete(c);n()})})}n()}});var Gt=M(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.structuredPatch=Rn;Se.formatPatch=Wt;Se.createTwoFilesPatch=In;Se.createPatch=Vl;var Jl=rt();function zt(t){return Gl(t)||Wl(t)||ql(t)||zl()}function zl(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ql(t,e){if(t){if(typeof t=="string")return qt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qt(t,e)}}function Wl(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Gl(t){if(Array.isArray(t))return qt(t)}function qt(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Rn(t,e,r,n,i,l,a){a||(a={}),typeof a.context>"u"&&(a.context=4);var o=(0,Jl.diffLines)(r,n,a);if(!o)return;o.push({value:"",lines:[]});function c(L){return L.map(function(v){return" "+v})}for(var f=[],p=0,s=0,g=[],y=1,m=1,d=function(v){var E=o[v],w=E.lines||E.value.replace(/\n$/,"").split(`
`);if(E.lines=w,E.added||E.removed){var N;if(!p){var S=o[v-1];p=y,s=m,S&&(g=a.context>0?c(S.lines.slice(-a.context)):[],p-=g.length,s-=g.length)}(N=g).push.apply(N,zt(w.map(function(F){return(E.added?"+":"-")+F}))),E.added?m+=w.length:y+=w.length}else{if(p)if(w.length<=a.context*2&&v<o.length-2){var x;(x=g).push.apply(x,zt(c(w)))}else{var u,_=Math.min(w.length,a.context);(u=g).push.apply(u,zt(c(w.slice(0,_))));var O={oldStart:p,oldLines:y-p+_,newStart:s,newLines:m-s+_,lines:g};if(v>=o.length-2&&w.length<=a.context){var P=/\n$/.test(r),U=/\n$/.test(n),J=w.length==0&&g.length>O.oldLines;!P&&J&&r.length>0&&g.splice(O.oldLines,0,"\\ No newline at end of file"),(!P&&!J||!U)&&g.push("\\ No newline at end of file")}f.push(O),p=0,s=0,g=[]}y+=w.length,m+=w.length}},b=0;b<o.length;b++)d(b);return{oldFileName:t,newFileName:e,oldHeader:i,newHeader:l,hunks:f}}function Wt(t){if(Array.isArray(t))return t.map(Wt).join(`
`);var e=[];t.oldFileName==t.newFileName&&e.push("Index: "+t.oldFileName),e.push("==================================================================="),e.push("--- "+t.oldFileName+(typeof t.oldHeader>"u"?"":"	"+t.oldHeader)),e.push("+++ "+t.newFileName+(typeof t.newHeader>"u"?"":"	"+t.newHeader));for(var r=0;r<t.hunks.length;r++){var n=t.hunks[r];n.oldLines===0&&(n.oldStart-=1),n.newLines===0&&(n.newStart-=1),e.push("@@ -"+n.oldStart+","+n.oldLines+" +"+n.newStart+","+n.newLines+" @@"),e.push.apply(e,n.lines)}return e.join(`
`)+`
`}function In(t,e,r,n,i,l,a){return Wt(Rn(t,e,r,n,i,l,a))}function Vl(t,e,r,n,i,l){return In(t,t,e,r,n,i,l)}});var Hn=M(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.arrayEqual=Yl;ot.arrayStartsWith=Fn;function Yl(t,e){return t.length!==e.length?!1:Fn(t,e)}function Fn(t,e){if(e.length>t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}});var Vn=M(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.calcLineCount=Gn;ut.merge=ta;var Kl=Gt(),Xl=lt(),Vt=Hn();function _e(t){return ea(t)||jl(t)||Ql(t)||Zl()}function Zl(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ql(t,e){if(t){if(typeof t=="string")return Yt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yt(t,e)}}function jl(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function ea(t){if(Array.isArray(t))return Yt(t)}function Yt(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Gn(t){var e=Kt(t.lines),r=e.oldLines,n=e.newLines;r!==void 0?t.oldLines=r:delete t.oldLines,n!==void 0?t.newLines=n:delete t.newLines}function ta(t,e,r){t=Mn(t,r),e=Mn(e,r);var n={};(t.index||e.index)&&(n.index=t.index||e.index),(t.newFileName||e.newFileName)&&($n(t)?$n(e)?(n.oldFileName=st(n,t.oldFileName,e.oldFileName),n.newFileName=st(n,t.newFileName,e.newFileName),n.oldHeader=st(n,t.oldHeader,e.oldHeader),n.newHeader=st(n,t.newHeader,e.newHeader)):(n.oldFileName=t.oldFileName,n.newFileName=t.newFileName,n.oldHeader=t.oldHeader,n.newHeader=t.newHeader):(n.oldFileName=e.oldFileName||t.oldFileName,n.newFileName=e.newFileName||t.newFileName,n.oldHeader=e.oldHeader||t.oldHeader,n.newHeader=e.newHeader||t.newHeader)),n.hunks=[];for(var i=0,l=0,a=0,o=0;i<t.hunks.length||l<e.hunks.length;){var c=t.hunks[i]||{oldStart:1/0},f=e.hunks[l]||{oldStart:1/0};if(kn(c,f))n.hunks.push(Bn(c,a)),i++,o+=c.newLines-c.oldLines;else if(kn(f,c))n.hunks.push(Bn(f,o)),l++,a+=f.newLines-f.oldLines;else{var p={oldStart:Math.min(c.oldStart,f.oldStart),oldLines:0,newStart:Math.min(c.newStart+a,f.oldStart+o),newLines:0,lines:[]};ra(p,c.oldStart,c.lines,f.oldStart,f.lines),l++,i++,n.hunks.push(p)}}return n}function Mn(t,e){if(typeof t=="string"){if(/^@@/m.test(t)||/^Index:/m.test(t))return(0,Xl.parsePatch)(t)[0];if(!e)throw new Error("Must provide a base reference or pass in a patch");return(0,Kl.structuredPatch)(void 0,void 0,e,t)}return t}function $n(t){return t.newFileName&&t.newFileName!==t.oldFileName}function st(t,e,r){return e===r?e:(t.conflict=!0,{mine:e,theirs:r})}function kn(t,e){return t.oldStart<e.oldStart&&t.oldStart+t.oldLines<e.oldStart}function Bn(t,e){return{oldStart:t.oldStart,oldLines:t.oldLines,newStart:t.newStart+e,newLines:t.newLines,lines:t.lines}}function ra(t,e,r,n,i){var l={offset:e,lines:r,index:0},a={offset:n,lines:i,index:0};for(Jn(t,l,a),Jn(t,a,l);l.index<l.lines.length&&a.index<a.lines.length;){var o=l.lines[l.index],c=a.lines[a.index];if((o[0]==="-"||o[0]==="+")&&(c[0]==="-"||c[0]==="+"))na(t,l,a);else if(o[0]==="+"&&c[0]===" "){var f;(f=t.lines).push.apply(f,_e(de(l)))}else if(c[0]==="+"&&o[0]===" "){var p;(p=t.lines).push.apply(p,_e(de(a)))}else o[0]==="-"&&c[0]===" "?Un(t,l,a):c[0]==="-"&&o[0]===" "?Un(t,a,l,!0):o===c?(t.lines.push(o),l.index++,a.index++):Xt(t,de(l),de(a))}zn(t,l),zn(t,a),Gn(t)}function na(t,e,r){var n=de(e),i=de(r);if(qn(n)&&qn(i)){if((0,Vt.arrayStartsWith)(n,i)&&Wn(r,n,n.length-i.length)){var l;(l=t.lines).push.apply(l,_e(n));return}else if((0,Vt.arrayStartsWith)(i,n)&&Wn(e,i,i.length-n.length)){var a;(a=t.lines).push.apply(a,_e(i));return}}else if((0,Vt.arrayEqual)(n,i)){var o;(o=t.lines).push.apply(o,_e(n));return}Xt(t,n,i)}function Un(t,e,r,n){var i=de(e),l=ia(r,i);if(l.merged){var a;(a=t.lines).push.apply(a,_e(l.merged))}else Xt(t,n?l:i,n?i:l)}function Xt(t,e,r){t.conflict=!0,t.lines.push({conflict:!0,mine:e,theirs:r})}function Jn(t,e,r){for(;e.offset<r.offset&&e.index<e.lines.length;){var n=e.lines[e.index++];t.lines.push(n),e.offset++}}function zn(t,e){for(;e.index<e.lines.length;){var r=e.lines[e.index++];t.lines.push(r)}}function de(t){for(var e=[],r=t.lines[t.index][0];t.index<t.lines.length;){var n=t.lines[t.index];if(r==="-"&&n[0]==="+"&&(r="+"),r===n[0])e.push(n),t.index++;else break}return e}function ia(t,e){for(var r=[],n=[],i=0,l=!1,a=!1;i<e.length&&t.index<t.lines.length;){var o=t.lines[t.index],c=e[i];if(c[0]==="+")break;if(l=l||o[0]!==" ",n.push(c),i++,o[0]==="+")for(a=!0;o[0]==="+";)r.push(o),o=t.lines[++t.index];c.substr(1)===o.substr(1)?(r.push(o),t.index++):a=!0}if((e[i]||"")[0]==="+"&&l&&(a=!0),a)return r;for(;i<e.length;)n.push(e[i++]);return{merged:n,changes:r}}function qn(t){return t.reduce(function(e,r){return e&&r[0]==="-"},!0)}function Wn(t,e,r){for(var n=0;n<r;n++){var i=e[e.length-r+n].substr(1);if(t.lines[t.index+n]!==" "+i)return!1}return t.index+=r,!0}function Kt(t){var e=0,r=0;return t.forEach(function(n){if(typeof n!="string"){var i=Kt(n.mine),l=Kt(n.theirs);e!==void 0&&(i.oldLines===l.oldLines?e+=i.oldLines:e=void 0),r!==void 0&&(i.newLines===l.newLines?r+=i.newLines:r=void 0)}else r!==void 0&&(n[0]==="+"||n[0]===" ")&&r++,e!==void 0&&(n[0]==="-"||n[0]===" ")&&e++}),{oldLines:e,newLines:r}}});var Zn=M(Zt=>{"use strict";Object.defineProperty(Zt,"__esModule",{value:!0});Zt.reversePatch=Xn;function Yn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Kn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Yn(Object(r),!0).forEach(function(n){la(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Yn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function la(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Xn(t){return Array.isArray(t)?t.map(Xn).reverse():Kn(Kn({},t),{},{oldFileName:t.newFileName,oldHeader:t.newHeader,newFileName:t.oldFileName,newHeader:t.oldHeader,hunks:t.hunks.map(function(e){return{oldLines:e.newLines,oldStart:e.newStart,newLines:e.oldLines,newStart:e.oldStart,linedelimiters:e.linedelimiters,lines:e.lines.map(function(r){return r.startsWith("-")?"+".concat(r.slice(1)):r.startsWith("+")?"-".concat(r.slice(1)):r})}})})}});var Qn=M(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.convertChangesToDMP=aa;function aa(t){for(var e=[],r,n,i=0;i<t.length;i++)r=t[i],r.added?n=1:r.removed?n=-1:n=0,e.push([n,r.value]);return e}});var jn=M(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});jt.convertChangesToXML=oa;function oa(t){for(var e=[],r=0;r<t.length;r++){var n=t[r];n.added?e.push("<ins>"):n.removed&&e.push("<del>"),e.push(sa(n.value)),n.added?e.push("</ins>"):n.removed&&e.push("</del>")}return e.join("")}function sa(t){var e=t;return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/"/g,"&quot;"),e}});var ii=M(k=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});Object.defineProperty(k,"Diff",{enumerable:!0,get:function(){return ua.default}});Object.defineProperty(k,"diffChars",{enumerable:!0,get:function(){return fa.diffChars}});Object.defineProperty(k,"diffWords",{enumerable:!0,get:function(){return ei.diffWords}});Object.defineProperty(k,"diffWordsWithSpace",{enumerable:!0,get:function(){return ei.diffWordsWithSpace}});Object.defineProperty(k,"diffLines",{enumerable:!0,get:function(){return ti.diffLines}});Object.defineProperty(k,"diffTrimmedLines",{enumerable:!0,get:function(){return ti.diffTrimmedLines}});Object.defineProperty(k,"diffSentences",{enumerable:!0,get:function(){return ca.diffSentences}});Object.defineProperty(k,"diffCss",{enumerable:!0,get:function(){return da.diffCss}});Object.defineProperty(k,"diffJson",{enumerable:!0,get:function(){return ri.diffJson}});Object.defineProperty(k,"canonicalize",{enumerable:!0,get:function(){return ri.canonicalize}});Object.defineProperty(k,"diffArrays",{enumerable:!0,get:function(){return pa.diffArrays}});Object.defineProperty(k,"applyPatch",{enumerable:!0,get:function(){return ni.applyPatch}});Object.defineProperty(k,"applyPatches",{enumerable:!0,get:function(){return ni.applyPatches}});Object.defineProperty(k,"parsePatch",{enumerable:!0,get:function(){return ha.parsePatch}});Object.defineProperty(k,"merge",{enumerable:!0,get:function(){return ma.merge}});Object.defineProperty(k,"reversePatch",{enumerable:!0,get:function(){return ga.reversePatch}});Object.defineProperty(k,"structuredPatch",{enumerable:!0,get:function(){return ft.structuredPatch}});Object.defineProperty(k,"createTwoFilesPatch",{enumerable:!0,get:function(){return ft.createTwoFilesPatch}});Object.defineProperty(k,"createPatch",{enumerable:!0,get:function(){return ft.createPatch}});Object.defineProperty(k,"formatPatch",{enumerable:!0,get:function(){return ft.formatPatch}});Object.defineProperty(k,"convertChangesToDMP",{enumerable:!0,get:function(){return ya.convertChangesToDMP}});Object.defineProperty(k,"convertChangesToXML",{enumerable:!0,get:function(){return Ea.convertChangesToXML}});var ua=xa(ue()),fa=wn(),ei=bn(),ti=rt(),ca=Ln(),da=Nn(),ri=_n(),pa=Tn(),ni=Pn(),ha=lt(),ma=Vn(),ga=Zn(),ft=Gt(),ya=Qn(),Ea=jn();function xa(t){return t&&t.__esModule?t:{default:t}}});var ai=M((ja,li)=>{var Za=St(Ft());li.exports=function(t){t.update(),t.historyUpdate(),window.addEventListener("load",e),t.editor.addEventListener("focusin",r),t.editor.addEventListener("focusout",n),t.gutter.addEventListener("click",i),document.addEventListener("mousedown",a),document.addEventListener("mousemove",o),document.addEventListener("mouseup",c),document.addEventListener("selectionchange",f),t.textarea.addEventListener("beforeinput",p),t.textarea.addEventListener("keydown",s),t.textarea.addEventListener("cut",g),t.textarea.addEventListener("copy",y),t.textarea.addEventListener("paste",m);function e(v){t.overlay.firstElementChild.innerHTML="",t.gutter.innerHTML="",t.update(),t.updateCurrentLine(),t.initialized=!0}function r(v){t.utils.addDataState(t.editor,"focused")}function n(v){t.editor.contains(v.target)||t.utils.removeDataState(t.editor,"focused")}function i(v){(Array.from(t.gutter.children).indexOf(v.target)>-1||Array.from(t.gutter.children).indexOf(v.target.parentNode)>-1)&&t.setCarretAt(parseInt(v.target.textContent.trim())-1)}var l;function a(v){if(v.target==t.container){l=v.target,v.preventDefault();let E=t.gutter.children,w="0";for(let N=0,S=E.length;N<S;N++)v.clientY>E[N].getBoundingClientRect().y&&(w=E[N].textContent.trim());w-1<0&&(w=1),t.setCarretAt(w-1),t.textarea.focus()}}function o(v){if(l==t.container&&v.buttons==1){let E=t.gutter.children,w="0";for(let N=0,S=E.length;N<S;N++)v.clientY>E[N].getBoundingClientRect().y&&(w=E[N].textContent.trim());t.textarea.focus(),t.textarea.setSelectionRange(t.textarea.value.split(`
`).slice(0,w).join().length,t.textarea.value.length,"backward")}}function c(v){l==t.container&&v.target==t.textarea&&(t.textarea.selectionEnd=t.textarea.value.length,t.textarea.selectionStart=t.textarea.value.length,t.textarea.focus()),l=void 0}function f(v){document.activeElement===t.textarea&&(t.updateCaret(),t.updateCurrentLine(),t.updateHorizontalScroll(),t.lastSelection=t.getTextareaSelection())}function p(v){t.lastTextareaValue=t.textarea.value}function s(v){if(!v.ctrlKey&&!v.shiftKey&&!v.altKey){if(v.key==" "&&t.textarea.selectionStart==t.textarea.selectionEnd&&(!/\n/.test(t.textarea.value.slice(0,t.textarea.selectionStart))&&(/ +$/.test(t.textarea.value.slice(0,t.textarea.selectionStart))||t.textarea.selectionStart===0)||/\n +$/.test(t.textarea.value.slice(0,t.textarea.selectionStart))||t.textarea.selectionStart<t.textarea.value.length&&(/\n +\n$/.test(t.textarea.value.slice(0,t.textarea.selectionStart+1))||/\n$/.test(t.textarea.value.slice(0,t.textarea.selectionStart)))||t.textarea.value.length==t.textarea.selectionStart&&(/\n +$/.test(t.textarea.value)||/\n$/.test(t.textarea.value)))){v.preventDefault();let E=t.textarea.selectionStart+4,w=t.textarea.value.slice(0,t.textarea.selectionStart)+"    "+t.textarea.value.slice(t.textarea.selectionEnd);t.setTextarea(w,E),d()}if(v.key=="Enter"){let E=t.textarea.value,w=E.split(`
`),N=t.getSelectionStartCoordinates(),S=N[0],x=N[1],u=w[S];if(/^    /.test(u)){if(v.preventDefault(),x%4!==0&&x<u.match(/^(    )+/)[0].length){for(let J=x;0<=J;J--)if(J%4==0){t.textarea.selectionStart==t.textarea.selectionEnd&&(t.textarea.selectionEnd=w.slice(0,S).join().length+J),t.textarea.selectionStart=w.slice(0,S).join().length+J,x=J;break}}let _=0;x>0&&(_=u.slice(0,x).match(/^(    )+/)[0].length);let O=t.textarea.selectionStart,P=t.textarea.value.slice(t.textarea.selectionEnd);P.split(`
`)[0].trim()==""&&(P=`
`+P.split(`
`).slice(1).join(`
`));let U=t.textarea.value.slice(0,t.textarea.selectionStart)+`
`+" ".repeat(_)+P;t.setTextarea(U,O+_+1),d()}}}else if(!v.ctrlKey&&v.shiftKey&&!v.altKey)v.key==" "&&t.textarea.selectionStart==t.textarea.selectionEnd;else if(v.ctrlKey&&!v.shiftKey&&!v.altKey){if(v.key=="Backspace"){let E=t.textarea.value.split(`
`),w=t.getSelectionStartCoordinates(),N=E[w[0]],S=N.slice(0,w[1]);if(t.textarea.selectionEnd==t.textarea.selectionStart&&/^ +$/.test(S)){v.preventDefault();let x=0;S.length%4==0?(E[w[0]]=N.slice(4),x=4):(E[w[0]]=N.slice(S.length%4),x=S.length%4),t.setTextarea(E.join(`
`)),d(),t.setCarretAt(w[0],w[1]-x)}}if(v.key==" "){let E=t.textarea.value.slice(0,t.textarea.selectionStart)+"	"+t.textarea.value.slice(t.textarea.selectionEnd);t.setTextarea(t.formatIndentation(E),t.textarea.selectionEnd+1),d()}if(v.key=="]"){v.preventDefault();let E=t.textarea.value.split(`
`),w=t.textarea.value.slice(0,t.textarea.selectionStart).split(`
`).length-1,N=t.textarea.value.slice(0,t.textarea.selectionEnd).split(`
`).length-1,S=t.textarea.selectionStart+4,x=t.textarea.selectionEnd+4*(N-w+1);for(let u=0,_=E.length;u<_;u++)u>=w&&u<=N&&(E[u]="    "+E[u]);t.setTextarea(E.join(`
`),S,x),d()}if(v.key=="["){let E=t.textarea.value,w=t.textarea.value.split(`
`),N=t.textarea.value.slice(0,t.textarea.selectionStart).split(`
`).length-1,S=t.textarea.value.slice(0,t.textarea.selectionEnd).split(`
`).length-1,x=t.textarea.selectionStart,u=t.textarea.selectionEnd;for(let _=0,O=w.length;_<O;_++)_>=N&&_<=S&&w[_].startsWith("    ")&&(_==N&&(x-=4),u-=4,w[_]=w[_].slice(4));t.setTextarea(w.join(`
`),x,u),d()}if(v.key=="Enter"){let E=t.textarea.value.split(`
`),w=t.getCurrentLine();w==E.length-1?t.setTextarea(E.join(`
`)+`
`):t.setTextarea(E.slice(0,w+1).join(`
`)+`

`+E.slice(w+1).join(`
`)),d(),t.setCarretAt(w+1)}v.key=="z"&&(v.preventDefault(),t.historyPosition>1&&(t.historyPosition-=1,t.setTextarea(t.history[t.historyPosition-1][0],t.history[t.historyPosition-1][1]),t.update(),t.virtualScroller.inputHandler(!0),t.textarea.blur(),t.textarea.focus())),v.key=="y"&&(v.preventDefault(),t.historyPosition<t.history.length&&(t.historyPosition+=1,t.setTextarea(t.history[t.historyPosition-1][0],t.history[t.historyPosition-1][1]),t.update(),t.virtualScroller.inputHandler(!0),t.textarea.blur(),t.textarea.focus()))}else if(!v.ctrlKey&&v.shiftKey&&v.altKey)v.key=="f"&&t.setTextarea(t.formatIndentation(t.textarea.value),t.textarea.selectionEnd);else if(!v.ctrlKey&&!v.shiftKey&&v.altKey){if(v.key=="ArrowDown")if(t.getSelectionStartCoordinates()[0]==t.getSelectionEndCoordinates()[0]){let E=t.textarea.value.split(`
`),w=t.getCurrentLine(),N=E[t.getCurrentLine()].slice();if(t.getCurrentLine()!==E.length){let S=E[t.getCurrentLine()+1].slice();E[t.getCurrentLine()]=S,E[t.getCurrentLine()+1]=N,t.setTextarea(E.join(`
`)),d(),t.setCarretAt(w+1)}}else{let E=t.textarea.value.split(`
`),w=t.getSelectionStartCoordinates()[0],N=t.getSelectionEndCoordinates()[0];if(N<w&&(w=t.getSelectionEndCoordinates()[0],N=t.getSelectionStartCoordinates()[0]),N!=E.length){let S=E.slice(w,N+1),x=E[N+1].slice();E[w]=x;for(let u=w,_=u+S.length;u<_;u++)E[u+1]=S[u-w];N<w?t.setTextarea(E.join(`
`),t.textarea.selectionEnd+x.length+1,t.textarea.selectionStart+x.length+1):t.setTextarea(E.join(`
`),t.textarea.selectionStart+x.length+1,t.textarea.selectionEnd+x.length+1),d()}}else if(v.key=="ArrowUp")if(t.getSelectionStartCoordinates()[0]==t.getSelectionEndCoordinates()[0]){let E=t.textarea.value.split(`
`),w=t.getCurrentLine(),N=E[t.getCurrentLine()].slice();if(t.getCurrentLine()!==0){let S=E[t.getCurrentLine()-1].slice();E[t.getCurrentLine()]=S,E[t.getCurrentLine()-1]=N,t.setTextarea(E.join(`
`)),d(),t.setCarretAt(w-1)}}else{let E=t.textarea.value.split(`
`),w=t.getSelectionStartCoordinates()[0],N=t.getSelectionEndCoordinates()[0];if(N<w&&(w=t.getSelectionEndCoordinates()[0],N=t.getSelectionStartCoordinates()[0]),w!=0){let S=E.slice(w,N+1),x=E[w-1].slice();E[N]=x;for(let u=w,_=u+S.length;u<_;u++)E[u-1]=S[u-w];N<w?t.setTextarea(E.join(`
`),t.textarea.selectionEnd-x.length-1,t.textarea.selectionStart-x.length-1):t.setTextarea(E.join(`
`),t.textarea.selectionStart-x.length-1,t.textarea.selectionEnd-x.length-1),d()}}}t.debounceLint()}function g(v){if(t.textarea.selectionStart==t.textarea.selectionEnd){v.preventDefault();let E=t.textarea.value.split(`
`),w=t.getCurrentLine(),N=E.slice(0,w).join(`
`).length,S=N+E[w].length+1;t.textarea.setSelectionRange(N,S),t.lastTextareaValue=t.textarea.value,document.execCommand("cut"),t.updateCaret()}}function y(v){if(t.textarea.selectionStart==t.textarea.selectionEnd){v.preventDefault();let E=t.textarea.value.split(`
`),w=t.getCurrentLine(),N=E.slice(0,w).join(`
`).length,S=N+E[w].length+1;t.textarea.setSelectionRange(N,S),document.execCommand("copy")}}function m(v){v.preventDefault();let E=v.clipboardData.getData("text").replace(new RegExp(/\r/g),""),w=t.textarea.value.slice(0,t.textarea.selectionStart),N=t.textarea.value.slice(t.textarea.selectionEnd),S=w+E+N,x=t.textarea.selectionStart+E.length;try{JSON.parse(S),t.setTextarea(t.damon.jsonToDamon(S)),d(),t.updateCaret(),t.debounceLint();return}catch{}let u=S.split(`
`),_=x,O=0,P=0;for(let F=0,X=u.length;F<X;F++)if(O+u[F].length+F<_)O+=u[F].length;else{O+=F,P=F;break}let U=[P,x-O],J=u[P].slice(0);if(S=t.formatIndentation(S),u=S.split(`
`),t.textarea.value!==S){let F=u.slice(0,P+1).join(`
`).length-J.length+U[1];t.setTextarea(S,F),d()}t.updateCaret(),t.debounceLint()}t.textarea.addEventListener("input",d),t.editor.addEventListener("scroll",b);function d(){document.activeElement==t.textarea&&(t.update(),t.debounceHistoryUpdate(),t.updateCurrentLine(),t.updateHorizontalScroll(),t.updateCaret(),t.debounceLint())}function b(v){t.virtualScroller.scrollHandler()}window.spaceResizeTimeout=null;function L(v){spaceResizeTimeout&&clearTimeout(spaceResizeTimeout),window.spaceResizeTimeout=setTimeout(function(){let E=t.editor.scrollTop;t.gutter.innerHTML="",t.overlay.firstElementChild.innerHTML="",t.initialized=!1,t.virtualScroller.inputHandler(),t.initialized=!0,t.editor.scrollTop=E},100)}}});var si=M((ro,oi)=>{var er=Mr(),wa=gn(),va=Ft(),eo=ii();oi.exports=class{constructor(e,r,n){let i=this;i.dom=e,i.innerHTML="",i.editor={},i.gutter={},i.container={},i.overlay={},i.textarea={},i.caretPadding={},i.caret={},i.statusBar={},i.copyButton={},i.diffButton={},i.prism=r,i.indentation="    ",i.currentLine=0,i.history=[],i.historyPosition=0,i.historyUpdateTimeoutId,i.lintTimeoutId,i.lastTextareaValue="",i.lastSelection="",i.initialized=!1,i.virtualScroller={},i.damon=new wa,i.utils=er}init(){let e=this;e.statusBarHTML=er.html`
<div>
    Spaces: <a href="https://github.com/adrianturcev/space/blob/master/bindings.md"><kbd>SPACE</kbd></a>
</div>
<a href="https://github.com/adrianturcev/damon/blob/master/language_reference.md">
    DAMON 
    <svg
    viewBox="0 0 24 24"
    xmlns="http://www.w3.org/2000/svg">
        <title>help-circle</title>
        <circle
            style="fill:#FEFEFE;stroke-width:1.04312;fill-opacity:1"
            cx="12"
            cy="12"
            r="9.6854191" />
        <path
            fill="#FEFEFE"
            d="M15.07,11.25L14.17,12.17C13.45,12.89 13,13.5 13,15H11V14.5C11,13.39 11.45,12.39 12.17,11.67L13.41,10.41C13.78,10.05 14,9.55 14,9C14,7.89 13.1,7 12,7A2,2 0 0,0 10,9H8A4,4 0 0,1 12,5A4,4 0 0,1 16,9C16,9.88 15.64,10.67 15.07,11.25M13,19H11V17H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z"
            style="fill:#4169e1;fill-opacity:1" />
    </svg>
</a>
<button class="space-copyButton">
    JSON
    <svg
        viewBox="0 0 24 24"
        xmlns="http://www.w3.org/2000/svg">
        <title>content-copy</title>
        <path
            fill="#FEFEFE"
            d="M 4,21 H 15 V 7 H 4 M 4,5 h 11 a -2,2 0 0 1 2,2 v 14 a -2,2 0 0 1 -2,2 H 4 A -2,2 0 0 1 2,21 V 7 A -2,2 0 0 1 4,5 M 7,1 h 12 a -2,2 0 0 1 2,2 V 17 H 19 V 3 H 7 Z"/>
    </svg>
</button>
<button class="space-diffButton">
    Diff
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <title>set-left-right</title>
        <path
            fill="#FEFEFE"
            d="M9,5C10.04,5 11.06,5.24 12,5.68C12.94,5.24 13.96,5 15,5A7,7 0 0,1 22,12A7,7 0 0,1 15,19C13.96,19 12.94,18.76 12,18.32C11.06,18.76 10.04,19 9,19A7,7 0 0,1 2,12A7,7 0 0,1 9,5M9,12C9,14.22 10.21,16.16 12,17.2C13.79,16.16 15,14.22 15,12C15,9.78 13.79,7.84 12,6.8C10.21,7.84 9,9.78 9,12Z" />
    </svg>
</button>`,e.innerHTML=er.html`
<div class="space-editor" data-state="js-off">
    <div class="space-gutter"></div>
    <div class="space-container">
<pre class="space-dummyTextarea"><span class="space-caretPadding"></span><span class="space-caret">&nbsp;</span></pre>
        <pre class="space-overlay" aria-hidden="true" tabindex="-1">
            <code class="language-damon"></code>
        </pre>
        <textarea
            class="space-textarea"
            placeholder="Paste JSON or type DAMON"
            spellcheck="false"
            aria-labelledby=""
            aria-controls="space-statusBar0"
            maxlength="500000">
        </textarea>
        <ul class="space-suggestions"></ul>
    </div>
</div>
<div class="space-statusBar" id="space-statusBar0" role="log" aria-live="polite">${e.statusBarHTML}</div>
        `;let r="";e.dom.innerHTML!==e.innerHTML&&(e.dom.getElementsByTagName("textarea")[0]!==void 0&&(r=e.dom.getElementsByTagName("textarea")[0].innerHTML),e.dom.innerHTML=e.innerHTML),e.editor=e.dom.getElementsByClassName("space-editor")[0],e.gutter=e.dom.getElementsByClassName("space-gutter")[0],e.container=e.dom.getElementsByClassName("space-container")[0],e.overlay=e.dom.getElementsByClassName("space-overlay")[0],e.textarea=e.dom.getElementsByClassName("space-textarea")[0],e.textarea.innerHTML=r,e.caretPadding=e.dom.getElementsByClassName("space-caretPadding")[0],e.caret=e.dom.getElementsByClassName("space-caret")[0],e.statusBar=e.dom.getElementsByClassName("space-statusBar")[0],e.copyButton=e.dom.getElementsByClassName("space-copyButton")[0],e.diffButton=e.dom.getElementsByClassName("space-copyButton")[0],e.virtualScroller=new va(this),e.editor.dataset.state="",e.textarea.value=e.formatIndentation(e.textarea.value.replaceAll(/\r/g,"")),e.routes=ai()(this),e.lint()}update(){let e=this;e.initialized&&e.lastTextareaValue==e.textarea.value||(e.gutter.children.length==0?e.virtualScroller.init(0):e.virtualScroller.inputHandler(),e.initialized&&(e.lastTextareaValue=e.textarea.value))}updateHorizontalScroll(){let e=this;if(document.activeElement==e.textarea){let r=e.textarea.value.split(`
`),n=0,i=e.gutter.children[0].children[0].getBoundingClientRect().width;for(let l=0,a=r.length;l<a&&n+r[l].length<e.textarea.selectionEnd;l++)n+=r[l].length+1;(e.textarea.selectionEnd-n)*i-e.gutter.clientWidth<=e.editor.scrollLeft&&(e.editor.scrollLeft=0)}}getCurrentLine(){let e=this,r=e.textarea.value.split(`
`),n=0,i=0,l=0;(e.textarea.selectionDirection=="forward"||e.textarea.selectionStart==e.textarea.selectionEnd)&&(n=e.textarea.selectionEnd),e.textarea.selectionDirection=="backward"&&(n=e.textarea.selectionStart);for(let a=0,o=r.length;a<o;a++)if(i+r[a].length+a<n)i+=r[a].length;else{l=a;break}return l}getSelectionStartCoordinates(){let e=this,r=e.textarea.value.split(`
`),n=e.textarea.selectionStart,i=0,l=0;for(let a=0,o=r.length;a<o;a++)if(i+r[a].length+a<n)i+=r[a].length;else{i+=a,l=a;break}return[l,e.textarea.selectionStart-i]}getSelectionEndCoordinates(){let e=this,r=e.textarea.value.split(`
`),n=e.textarea.selectionEnd,i=0,l=0;for(let a=0,o=r.length;a<o;a++)if(i+r[a].length+a<n)i+=r[a].length;else{i+=a,l=a;break}return[l,e.textarea.selectionEnd-i]}setCarretAt(e,r){let n=this;if(r==null&&(r=n.textarea.value.split(`
`)[e].length),e==0)n.textarea.selectionStart=r;else{let i=Math.min(r,n.textarea.value.split(`
`)[e].length);n.textarea.selectionStart=n.textarea.value.split(`
`).slice(0,e).reduce(function(l,a){return l+a}).length+e+r}n.textarea.selectionEnd=n.textarea.selectionStart,n.textarea.focus()}getTextareaSelection(){let e=this;return e.textarea.selectionStart<e.textarea.selectionEnd?e.textarea.value.slice(e.textarea.selectionStart,e.textarea.selectionEnd):e.textarea.selectionStart<e.textarea.selectionEnd?e.textarea.value.slice(e.textarea.selectionEnd,e.textarea.selectionStart):void 0}updateCurrentLine(e){let r=this,n=r.currentLine;if(r.currentLine=r.getCurrentLine(),n!=r.currentLine||!r.initialized||e||r.lastSelection!=null&&r.getTextareaSelection()==null){for(let l=0,a=r.gutter.children.length;l<a;l++)r.gutter.children[l].classList.remove("currentLine"),r.gutter.children[l].classList.remove("selectionEnd");r.gutter.children[r.currentLine-r.gutter.children[0].textContent.trim()+1]&&(r.textarea.selectionEnd==r.textarea.selectionStart?r.gutter.children[r.currentLine-r.gutter.children[0].textContent.trim()+1].classList.add("currentLine"):r.gutter.children[r.currentLine-r.gutter.children[0].textContent.trim()+1].classList.add("selectionEnd"))}}historyUpdate(){let e=this;if(e.history.length==0||e.textarea.value!=e.history[e.historyPosition-1][0]){let n=function(i,l){return i+l[0]+l[1]};var r=n;if(e.historyPosition!=e.history.length&&(e.history=e.history.slice(0,e.historyPosition)),e.history.push([e.textarea.value,e.textarea.selectionStart]),e.history.reduce(n,"").length*4>1e8){let i=0;for(;e.history.reduce(n,"").length*4>1e8;)i++,e.history.shift();e.historyPosition-=i}e.historyPosition++}}debounceHistoryUpdate(){var e=this,r=arguments;clearTimeout(this.historyUpdateTimeoutId),this.historyUpdateTimeoutId=setTimeout(function(){e.historyUpdateTimeoutId=null,e.historyUpdate.apply(e,r)},200)}formatIndentation(e){let r=this,n=e.split(`
`);for(let i=0,l=n.length;i<l;i++){if(/^ *(\t)+/.test(n[i])){let a=n[i].match(/^ *(\t)+/)[0].length;for(let o=0,c=a;o<c;o++)n[i]=n[i].replace("	","    ")}if(/^( )+/.test(n[i])&&n[i].match(/^( )+/)[0].length%4!==0){for(let a=n[i].match(/^( )+/)[0].length;0<=a;a--)if(a%4==0){n[i].trimStart(),n[i]=" ".repeat(a)+n[i];break}}}return n.join(`
`)}formatHyphens(e){let r=this,n=e.split(`
`);for(let i=0,l=n.length;i<l;i++)if(!/^ *- /.test(n[i])){let a="";/^ /.test(n[i])&&(a=n[i].match(/^( )+/)[0]),n[i]=a+"- "+n[i].slice(a.length)}return n.join(`
`)}updateCaret(){let e=this;e.textarea.selectionDirection=="forward"||e.textarea.selectionStart==e.textarea.selectionEnd?e.caretPadding.textContent=e.textarea.value.slice(0,e.textarea.selectionEnd):e.caretPadding.textContent=e.textarea.value.slice(0,e.textarea.selectionStart)}setTextarea(e,r,n=r){let i=this;i.lastTextareaValue=i.textarea.value,i.textarea.value=e,r!==null&&i.textarea.setSelectionRange(r,n)}lint(){let e=this;try{e.damon.damonToMap(e.textarea.value),e.statusBar.innerHTML=e.statusBarHTML}catch(r){r.language=="JSON"?e.statusBar.innerHTML="<span>( ! ) Error line number "+r.line+": "+r.type+" not JSON-compliant</span>"+e.statusBarHTML:e.statusBar.innerHTML="<span>( ! ) "+r.message+"</span>"+e.statusBarHTML,console.error(r)}e.copyButton=e.dom.getElementsByClassName("space-copyButton")[0],e.copyButton.addEventListener("click",function(r){let n=document.createElement("textarea");n.style.opacity="0";try{n.value=e.damon.damonToJSON(e.textarea.value)}catch{setTimeout(function(){e.copyButton.classList.remove("error")},1100),e.copyButton.classList.add("error");return}document.body.appendChild(n),n.focus(),n.select();try{document.execCommand("copy")&&(setTimeout(function(){e.copyButton.classList.remove("success")},1100),e.copyButton.classList.add("success"))}catch(i){console.error(i.name,i.message)}document.body.removeChild(n)}),e.diffButton=e.dom.getElementsByClassName("space-diffButton")[0],e.diffButton.addEventListener("click",function(r){let n=document.createElement("textarea");document.body.appendChild(n),n.addEventListener("paste",function(i){let l=e.formatIndentation(i.clipboardData.getData("text").replace(new RegExp(/\r/g),""))})})}debounceLint(){var e=this,r=arguments;clearTimeout(this.lintTimeoutId),this.lintTimeoutId=setTimeout(function(){e.lintTimeoutId=null,e.lint.apply(e,r)},200)}}});(function(){window.Space=si()})();})();
/*! Bundled license information:

dompurify/dist/purify.js:
  (*! @license DOMPurify 3.1.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.6/LICENSE *)
*/
