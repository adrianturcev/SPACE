/* PrismJS 1.28.0
https://prismjs.com/download.html#themes=prism-okaidia&languages=json&plugins=show-invisibles+normalize-whitespace */
var _self="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(e){var n=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,t=0,r={},a={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function e(n){return n instanceof i?new i(n.type,e(n.content),n.alias):Array.isArray(n)?n.map(e):n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++t}),e.__id},clone:function e(n,t){var r,i;switch(t=t||{},a.util.type(n)){case"Object":if(i=a.util.objId(n),t[i])return t[i];for(var l in r={},t[i]=r,n)n.hasOwnProperty(l)&&(r[l]=e(n[l],t));return r;case"Array":return i=a.util.objId(n),t[i]?t[i]:(r=[],t[i]=r,n.forEach((function(n,a){r[a]=e(n,t)})),r);default:return n}},getLanguage:function(e){for(;e;){var t=n.exec(e.className);if(t)return t[1].toLowerCase();e=e.parentElement}return"none"},setLanguage:function(e,t){e.className=e.className.replace(RegExp(n,"gi"),""),e.classList.add("language-"+t)},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(r){var e=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(r.stack)||[])[1];if(e){var n=document.getElementsByTagName("script");for(var t in n)if(n[t].src==e)return n[t]}return null}},isActive:function(e,n,t){for(var r="no-"+n;e;){var a=e.classList;if(a.contains(n))return!0;if(a.contains(r))return!1;e=e.parentElement}return!!t}},languages:{plain:r,plaintext:r,text:r,txt:r,extend:function(e,n){var t=a.util.clone(a.languages[e]);for(var r in n)t[r]=n[r];return t},insertBefore:function(e,n,t,r){var i=(r=r||a.languages)[e],l={};for(var o in i)if(i.hasOwnProperty(o)){if(o==n)for(var s in t)t.hasOwnProperty(s)&&(l[s]=t[s]);t.hasOwnProperty(o)||(l[o]=i[o])}var u=r[e];return r[e]=l,a.languages.DFS(a.languages,(function(n,t){t===u&&n!=e&&(this[n]=l)})),l},DFS:function e(n,t,r,i){i=i||{};var l=a.util.objId;for(var o in n)if(n.hasOwnProperty(o)){t.call(n,o,n[o],r||o);var s=n[o],u=a.util.type(s);"Object"!==u||i[l(s)]?"Array"!==u||i[l(s)]||(i[l(s)]=!0,e(s,t,o,i)):(i[l(s)]=!0,e(s,t,null,i))}}},plugins:{},highlightAll:function(e,n){a.highlightAllUnder(document,e,n)},highlightAllUnder:function(e,n,t){var r={callback:t,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};a.hooks.run("before-highlightall",r),r.elements=Array.prototype.slice.apply(r.container.querySelectorAll(r.selector)),a.hooks.run("before-all-elements-highlight",r);for(var i,l=0;i=r.elements[l++];)a.highlightElement(i,!0===n,r.callback)},highlightElement:function(n,t,r){var i=a.util.getLanguage(n),l=a.languages[i];a.util.setLanguage(n,i);var o=n.parentElement;o&&"pre"===o.nodeName.toLowerCase()&&a.util.setLanguage(o,i);var s={element:n,language:i,grammar:l,code:n.textContent};function u(e){s.highlightedCode=e,a.hooks.run("before-insert",s),s.element.innerHTML=s.highlightedCode,a.hooks.run("after-highlight",s),a.hooks.run("complete",s),r&&r.call(s.element)}if(a.hooks.run("before-sanity-check",s),(o=s.element.parentElement)&&"pre"===o.nodeName.toLowerCase()&&!o.hasAttribute("tabindex")&&o.setAttribute("tabindex","0"),!s.code)return a.hooks.run("complete",s),void(r&&r.call(s.element));if(a.hooks.run("before-highlight",s),s.grammar)if(t&&e.Worker){var c=new Worker(a.filename);c.onmessage=function(e){u(e.data)},c.postMessage(JSON.stringify({language:s.language,code:s.code,immediateClose:!0}))}else u(a.highlight(s.code,s.grammar,s.language));else u(a.util.encode(s.code))},highlight:function(e,n,t){var r={code:e,grammar:n,language:t};if(a.hooks.run("before-tokenize",r),!r.grammar)throw new Error('The language "'+r.language+'" has no grammar.');return r.tokens=a.tokenize(r.code,r.grammar),a.hooks.run("after-tokenize",r),i.stringify(a.util.encode(r.tokens),r.language)},tokenize:function(e,n){var t=n.rest;if(t){for(var r in t)n[r]=t[r];delete n.rest}var a=new s;return u(a,a.head,e),o(e,a,n,a.head,0),function(e){for(var n=[],t=e.head.next;t!==e.tail;)n.push(t.value),t=t.next;return n}(a)},hooks:{all:{},add:function(e,n){var t=a.hooks.all;t[e]=t[e]||[],t[e].push(n)},run:function(e,n){var t=a.hooks.all[e];if(t&&t.length)for(var r,i=0;r=t[i++];)r(n)}},Token:i};function i(e,n,t,r){this.type=e,this.content=n,this.alias=t,this.length=0|(r||"").length}function l(e,n,t,r){e.lastIndex=n;var a=e.exec(t);if(a&&r&&a[1]){var i=a[1].length;a.index+=i,a[0]=a[0].slice(i)}return a}function o(e,n,t,r,s,g){for(var f in t)if(t.hasOwnProperty(f)&&t[f]){var h=t[f];h=Array.isArray(h)?h:[h];for(var d=0;d<h.length;++d){if(g&&g.cause==f+","+d)return;var v=h[d],p=v.inside,m=!!v.lookbehind,y=!!v.greedy,k=v.alias;if(y&&!v.pattern.global){var x=v.pattern.toString().match(/[imsuy]*$/)[0];v.pattern=RegExp(v.pattern.source,x+"g")}for(var b=v.pattern||v,w=r.next,A=s;w!==n.tail&&!(g&&A>=g.reach);A+=w.value.length,w=w.next){var E=w.value;if(n.length>e.length)return;if(!(E instanceof i)){var P,L=1;if(y){if(!(P=l(b,A,e,m))||P.index>=e.length)break;var S=P.index,O=P.index+P[0].length,j=A;for(j+=w.value.length;S>=j;)j+=(w=w.next).value.length;if(A=j-=w.value.length,w.value instanceof i)continue;for(var C=w;C!==n.tail&&(j<O||"string"==typeof C.value);C=C.next)L++,j+=C.value.length;L--,E=e.slice(A,j),P.index-=A}else if(!(P=l(b,0,E,m)))continue;S=P.index;var N=P[0],_=E.slice(0,S),M=E.slice(S+N.length),W=A+E.length;g&&W>g.reach&&(g.reach=W);var z=w.prev;if(_&&(z=u(n,z,_),A+=_.length),c(n,z,L),w=u(n,z,new i(f,p?a.tokenize(N,p):N,k,N)),M&&u(n,w,M),L>1){var I={cause:f+","+d,reach:W};o(e,n,t,w.prev,A,I),g&&I.reach>g.reach&&(g.reach=I.reach)}}}}}}function s(){var e={value:null,prev:null,next:null},n={value:null,prev:e,next:null};e.next=n,this.head=e,this.tail=n,this.length=0}function u(e,n,t){var r=n.next,a={value:t,prev:n,next:r};return n.next=a,r.prev=a,e.length++,a}function c(e,n,t){for(var r=n.next,a=0;a<t&&r!==e.tail;a++)r=r.next;n.next=r,r.prev=n,e.length-=a}if(e.Prism=a,i.stringify=function e(n,t){if("string"==typeof n)return n;if(Array.isArray(n)){var r="";return n.forEach((function(n){r+=e(n,t)})),r}var i={type:n.type,content:e(n.content,t),tag:"span",classes:["token",n.type],attributes:{},language:t},l=n.alias;l&&(Array.isArray(l)?Array.prototype.push.apply(i.classes,l):i.classes.push(l)),a.hooks.run("wrap",i);var o="";for(var s in i.attributes)o+=" "+s+'="'+(i.attributes[s]||"").replace(/"/g,"&quot;")+'"';return"<"+i.tag+' class="'+i.classes.join(" ")+'"'+o+">"+i.content+"</"+i.tag+">"},!e.document)return e.addEventListener?(a.disableWorkerMessageHandler||e.addEventListener("message",(function(n){var t=JSON.parse(n.data),r=t.language,i=t.code,l=t.immediateClose;e.postMessage(a.highlight(i,a.languages[r],r)),l&&e.close()}),!1),a):a;var g=a.util.currentScript();function f(){a.manual||a.highlightAll()}if(g&&(a.filename=g.src,g.hasAttribute("data-manual")&&(a.manual=!0)),!a.manual){var h=document.readyState;"loading"===h||"interactive"===h&&g&&g.defer?document.addEventListener("DOMContentLoaded",f):window.requestAnimationFrame?window.requestAnimationFrame(f):window.setTimeout(f,16)}return a}(_self);"undefined"!=typeof module&&module.exports&&(module.exports=Prism),"undefined"!=typeof global&&(global.Prism=Prism);
Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}},Prism.languages.webmanifest=Prism.languages.json;
!function(){if("undefined"!=typeof Prism){var r={tab:/\t/,crlf:/\r\n/,lf:/\n/,cr:/\r/,space:/ /};Prism.hooks.add("before-highlight",(function(r){i(r.grammar)}))}function e(r,a){var n=r[a];switch(Prism.util.type(n)){case"RegExp":var t={};r[a]={pattern:n,inside:t},i(t);break;case"Array":for(var f=0,s=n.length;f<s;f++)e(n,f);break;default:i(t=n.inside||(n.inside={}))}}function i(a){if(a&&!a.tab){for(var n in r)r.hasOwnProperty(n)&&(a[n]=r[n]);for(var n in a)a.hasOwnProperty(n)&&!r[n]&&("rest"===n?i(a.rest):e(a,n))}}}();
!function(){if("undefined"!=typeof Prism){var e=Object.assign||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},t={"remove-trailing":"boolean","remove-indent":"boolean","left-trim":"boolean","right-trim":"boolean","break-lines":"number",indent:"number","remove-initial-line-feed":"boolean","tabs-to-spaces":"number","spaces-to-tabs":"number"};n.prototype={setDefaults:function(t){this.defaults=e(this.defaults,t)},normalize:function(t,n){for(var r in n=e(this.defaults,n)){var i=r.replace(/-(\w)/g,(function(e,t){return t.toUpperCase()}));"normalize"!==r&&"setDefaults"!==i&&n[r]&&this[i]&&(t=this[i].call(this,t,n[r]))}return t},leftTrim:function(e){return e.replace(/^\s+/,"")},rightTrim:function(e){return e.replace(/\s+$/,"")},tabsToSpaces:function(e,t){return t=0|t||4,e.replace(/\t/g,new Array(++t).join(" "))},spacesToTabs:function(e,t){return t=0|t||4,e.replace(RegExp(" {"+t+"}","g"),"\t")},removeTrailing:function(e){return e.replace(/\s*?$/gm,"")},removeInitialLineFeed:function(e){return e.replace(/^(?:\r?\n|\r)/,"")},removeIndent:function(e){var t=e.match(/^[^\S\n\r]*(?=\S)/gm);return t&&t[0].length?(t.sort((function(e,t){return e.length-t.length})),t[0].length?e.replace(RegExp("^"+t[0],"gm"),""):e):e},indent:function(e,t){return e.replace(/^[^\S\n\r]*(?=\S)/gm,new Array(++t).join("\t")+"$&")},breakLines:function(e,t){t=!0===t?80:0|t||80;for(var n=e.split("\n"),i=0;i<n.length;++i)if(!(r(n[i])<=t)){for(var o=n[i].split(/(\s+)/g),a=0,l=0;l<o.length;++l){var s=r(o[l]);(a+=s)>t&&(o[l]="\n"+o[l],a=s)}n[i]=o.join("")}return n.join("\n")}},"undefined"!=typeof module&&module.exports&&(module.exports=n),Prism.plugins.NormalizeWhitespace=new n({"remove-trailing":!0,"remove-indent":!0,"left-trim":!0,"right-trim":!0}),Prism.hooks.add("before-sanity-check",(function(e){var n=Prism.plugins.NormalizeWhitespace;if((!e.settings||!1!==e.settings["whitespace-normalization"])&&Prism.util.isActive(e.element,"whitespace-normalization",!0))if(e.element&&e.element.parentNode||!e.code){var r=e.element.parentNode;if(e.code&&r&&"pre"===r.nodeName.toLowerCase()){for(var i in null==e.settings&&(e.settings={}),t)if(Object.hasOwnProperty.call(t,i)){var o=t[i];if(r.hasAttribute("data-"+i))try{var a=JSON.parse(r.getAttribute("data-"+i)||"true");typeof a===o&&(e.settings[i]=a)}catch(e){}}for(var l=r.childNodes,s="",c="",u=!1,m=0;m<l.length;++m){var f=l[m];f==e.element?u=!0:"#text"===f.nodeName&&(u?c+=f.nodeValue:s+=f.nodeValue,r.removeChild(f),--m)}if(e.element.children.length&&Prism.plugins.KeepMarkup){var d=s+e.element.innerHTML+c;e.element.innerHTML=n.normalize(d,e.settings),e.code=e.element.textContent}else e.code=s+e.code+c,e.code=n.normalize(e.code,e.settings)}}else e.code=n.normalize(e.code,e.settings)}))}function n(t){this.defaults=e({},t)}function r(e){for(var t=0,n=0;n<e.length;++n)e.charCodeAt(n)=="\t".charCodeAt(0)&&(t+=3);return e.length+t}}();
;
Prism.languages.damon = {
	'list-hyphen': {
		pattern: /(^\s*)(?:[*-]|\d+\.)/m,
		lookbehind: true,
		greedy: true
	},
	'string': {
		pattern: /(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,
		lookbehind: true,
		greedy: true
	},
	'comment': {
		pattern: /\/\/.*|\/\*[\s\S]*?(?:\*\/|$)\n/,
		greedy: true
	},
	'number': /-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b\n/i,
	'operator': /:/,
	'boolean': /\b(?:false|true)\b\n/,
	'null': {
		pattern: /\bnull\b\n/,
		alias: 'keyword'
	},
	'map': {
		pattern: /(\{\})\n/,
	},
	'list': {
		pattern: /(\[\])\n/,
	},
	'punctuation': /[\{\}\[\]]/,
};

Prism.languages.webmanifest = Prism.languages.damon;;
(()=>{var Pe=Object.create;var D=Object.defineProperty;var Be=Object.getOwnPropertyDescriptor;var Je=Object.getOwnPropertyNames;var De=Object.getPrototypeOf,ke=Object.prototype.hasOwnProperty;var Fe=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var He=(t,e)=>()=>(t&&(e=t(t=0)),e);var R=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Ie=(t,e)=>{for(var r in e)D(t,r,{get:e[r],enumerable:!0})},W=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Je(e))!ke.call(t,n)&&n!==r&&D(t,n,{get:()=>e[n],enumerable:!(i=Be(e,n))||i.enumerable});return t};var X=(t,e,r)=>(r=t!=null?Pe(De(t)):{},W(e||!t||!t.__esModule?D(r,"default",{value:t,enumerable:!0}):r,t)),Ue=t=>W(D({},"__esModule",{value:!0}),t);var Z=R((tt,Q)=>{Q.exports={nil(t){return t===null||typeof t>"u"},hack(t,e,r){return t.slice(e,r+1)},pick(t,e){return t.filter(e)},prune(t,e){return t.filter(function(r){return!e(r)})},check(t,e){return t.every(e)},escape(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},html(t){let e=t[0],r=Math.max(t.length,arguments.length-1);for(let i=1;i<t.length;i++)e+=arguments[i],e+=t[i];return e},addDataState(t,e){let r=[];t.dataset.state&&t.dataset.state.indexOf(" ")>-1?r=t.dataset.state.split(" "):r=[t.dataset.state],r.indexOf(e)===-1&&(r.push(e),t.dataset.state=r.join(" "))},removeDataState(t,e){let r=[];t.dataset.state&&t.dataset.state.indexOf(" ")>-1?r=t.dataset.state.split(" "):r=[t.dataset.state],t.dataset.state=r.filter(i=>i!==e).join(" ")},replaceDataState(t,e,r){this.removeDataState(t,e),this.addDataState(t,r)},toggleDataState(t,e){t.dataset.state.split(" ").indexOf(e)==-1?this.addDataState(t,e):this.removeDataState(t,e)},ajaxGet(t,e,r,i){var n=new XMLHttpRequest;n.open("GET",t),n.addEventListener("load",function(){if(n.status>=200&&n.status<400)if(r){var l={};try{l=JSON.parse(n.responseText)}catch{console.error("Get request returned invalid JSON.")}i===void 0?e(l):e.apply(i,[l])}else i===void 0?e(n.responseText):e.apply(i,[n.responseText]);else console.error(n.status+" "+n.statusText+" "+t)}),n.addEventListener("error",function(){console.error("Network error trying to access: "+t)}),n.send(null)},ajaxPost(t,e,r,i,n,l,u){var s=new XMLHttpRequest;s.open("POST",t),s.addEventListener("load",function(){s.status>=200&&s.status<400?l===void 0?r(s):r.apply(l,[s]):(u===void 0?i(s):i.apply(u,[s]),console.error(s.status+" "+s.statusText+" "+t))}),s.addEventListener("error",function(){console.error("Network error trying to access: "+t)}),n&&(s.setRequestHeader("Content-Type","application/json"),e=JSON.stringify(e)),s.send(e)}}});var Oe={};Ie(Oe,{__addDisposableResource:()=>Ee,__assign:()=>k,__asyncDelegator:()=>ce,__asyncGenerator:()=>fe,__asyncValues:()=>de,__await:()=>B,__awaiter:()=>ie,__classPrivateFieldGet:()=>me,__classPrivateFieldIn:()=>xe,__classPrivateFieldSet:()=>ye,__createBinding:()=>H,__decorate:()=>te,__disposeResources:()=>Se,__esDecorate:()=>Me,__exportStar:()=>ae,__extends:()=>j,__generator:()=>le,__importDefault:()=>pe,__importStar:()=>ge,__makeTemplateObject:()=>he,__metadata:()=>ne,__param:()=>re,__propKey:()=>qe,__read:()=>M,__rest:()=>ee,__runInitializers:()=>Ve,__setFunctionName:()=>Ge,__spread:()=>se,__spreadArray:()=>ue,__spreadArrays:()=>oe,__values:()=>F,default:()=>Ye});function j(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");U(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function ee(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}function te(t,e,r,i){var n=arguments.length,l=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,r):i,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(t,e,r,i);else for(var s=t.length-1;s>=0;s--)(u=t[s])&&(l=(n<3?u(l):n>3?u(e,r,l):u(e,r))||l);return n>3&&l&&Object.defineProperty(e,r,l),l}function re(t,e){return function(r,i){e(r,i,t)}}function Me(t,e,r,i,n,l){function u(b){if(b!==void 0&&typeof b!="function")throw new TypeError("Function expected");return b}for(var s=i.kind,c=s==="getter"?"get":s==="setter"?"set":"value",h=!e&&t?i.static?t:t.prototype:null,g=e||(h?Object.getOwnPropertyDescriptor(h,i.name):{}),o,O=!1,y=r.length-1;y>=0;y--){var x={};for(var d in i)x[d]=d==="access"?{}:i[d];for(var d in i.access)x.access[d]=i.access[d];x.addInitializer=function(b){if(O)throw new TypeError("Cannot add initializers after decoration has completed");l.push(u(b||null))};var v=(0,r[y])(s==="accessor"?{get:g.get,set:g.set}:g[c],x);if(s==="accessor"){if(v===void 0)continue;if(v===null||typeof v!="object")throw new TypeError("Object expected");(o=u(v.get))&&(g.get=o),(o=u(v.set))&&(g.set=o),(o=u(v.init))&&n.unshift(o)}else(o=u(v))&&(s==="field"?n.unshift(o):g[c]=o)}h&&Object.defineProperty(h,i.name,g),O=!0}function Ve(t,e,r){for(var i=arguments.length>2,n=0;n<e.length;n++)r=i?e[n].call(t,r):e[n].call(t);return i?r:void 0}function qe(t){return typeof t=="symbol"?t:"".concat(t)}function Ge(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function ne(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function ie(t,e,r,i){function n(l){return l instanceof r?l:new r(function(u){u(l)})}return new(r||(r=Promise))(function(l,u){function s(g){try{h(i.next(g))}catch(o){u(o)}}function c(g){try{h(i.throw(g))}catch(o){u(o)}}function h(g){g.done?l(g.value):n(g.value).then(s,c)}h((i=i.apply(t,e||[])).next())})}function le(t,e){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,n,l,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=s(0),u.throw=s(1),u.return=s(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function s(h){return function(g){return c([h,g])}}function c(h){if(i)throw new TypeError("Generator is already executing.");for(;u&&(u=0,h[0]&&(r=0)),r;)try{if(i=1,n&&(l=h[0]&2?n.return:h[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,h[1])).done)return l;switch(n=0,l&&(h=[h[0]&2,l.value]),h[0]){case 0:case 1:l=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,n=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!l||h[1]>l[0]&&h[1]<l[3])){r.label=h[1];break}if(h[0]===6&&r.label<l[1]){r.label=l[1],l=h;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(h);break}l[2]&&r.ops.pop(),r.trys.pop();continue}h=e.call(t,r)}catch(g){h=[6,g],n=0}finally{i=l=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function ae(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&H(e,t,r)}function F(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function M(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var i=r.call(t),n,l=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)l.push(n.value)}catch(s){u={error:s}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(u)throw u.error}}return l}function se(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(M(arguments[e]));return t}function oe(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),n=0,e=0;e<r;e++)for(var l=arguments[e],u=0,s=l.length;u<s;u++,n++)i[n]=l[u];return i}function ue(t,e,r){if(r||arguments.length===2)for(var i=0,n=e.length,l;i<n;i++)(l||!(i in e))&&(l||(l=Array.prototype.slice.call(e,0,i)),l[i]=e[i]);return t.concat(l||Array.prototype.slice.call(e))}function B(t){return this instanceof B?(this.v=t,this):new B(t)}function fe(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(t,e||[]),n,l=[];return n=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",u),n[Symbol.asyncIterator]=function(){return this},n;function u(y){return function(x){return Promise.resolve(x).then(y,o)}}function s(y,x){i[y]&&(n[y]=function(d){return new Promise(function(v,b){l.push([y,d,v,b])>1||c(y,d)})},x&&(n[y]=x(n[y])))}function c(y,x){try{h(i[y](x))}catch(d){O(l[0][3],d)}}function h(y){y.value instanceof B?Promise.resolve(y.value.v).then(g,o):O(l[0][2],y)}function g(y){c("next",y)}function o(y){c("throw",y)}function O(y,x){y(x),l.shift(),l.length&&c(l[0][0],l[0][1])}}function ce(t){var e,r;return e={},i("next"),i("throw",function(n){throw n}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(n,l){e[n]=t[n]?function(u){return(r=!r)?{value:B(t[n](u)),done:!1}:l?l(u):u}:l}}function de(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof F=="function"?F(t):t[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(l){r[l]=t[l]&&function(u){return new Promise(function(s,c){u=t[l](u),n(s,c,u.done,u.value)})}}function n(l,u,s,c){Promise.resolve(c).then(function(h){l({value:h,done:s})},u)}}function he(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function ge(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&H(e,t,r);return ze(e,t),e}function pe(t){return t&&t.__esModule?t:{default:t}}function me(t,e,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(t):i?i.value:e.get(t)}function ye(t,e,r,i,n){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?n.call(t,r):n?n.value=r:e.set(t,r),r}function xe(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Ee(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var i,n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=e[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=e[Symbol.dispose],r&&(n=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");n&&(i=function(){try{n.call(this)}catch(l){return Promise.reject(l)}}),t.stack.push({value:e,dispose:i,async:r})}else r&&t.stack.push({async:!0});return e}function Se(t){function e(l){t.error=t.hasError?new Ke(l,t.error,"An error was suppressed during disposal."):l,t.hasError=!0}var r,i=0;function n(){for(;r=t.stack.pop();)try{if(!r.async&&i===1)return i=0,t.stack.push(r),Promise.resolve().then(n);if(r.dispose){var l=r.dispose.call(r.value);if(r.async)return i|=2,Promise.resolve(l).then(n,function(u){return e(u),n()})}else i|=1}catch(u){e(u)}if(i===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return n()}var U,k,H,ze,Ke,Ye,we=He(()=>{U=function(t,e){return U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])},U(t,e)};k=function(){return k=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e},k.apply(this,arguments)};H=Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]};ze=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};Ke=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var i=new Error(r);return i.name="SuppressedError",i.error=t,i.suppressed=e,i};Ye={__extends:j,__assign:k,__rest:ee,__decorate:te,__param:re,__metadata:ne,__awaiter:ie,__generator:le,__createBinding:H,__exportStar:ae,__values:F,__read:M,__spread:se,__spreadArrays:oe,__spreadArray:ue,__await:B,__asyncGenerator:fe,__asyncDelegator:ce,__asyncValues:de,__makeTemplateObject:he,__importStar:ge,__importDefault:pe,__classPrivateFieldGet:me,__classPrivateFieldSet:ye,__classPrivateFieldIn:xe,__addDisposableResource:Ee,__disposeResources:Se}});var be=R(V=>{(function(t){"use strict";var e=typeof process=="object"&&process.env?process.env:self;t.parser=function(f){return new o(f)},t.CParser=o,t.CStream=y,t.createStream=O,t.MAX_BUFFER_LENGTH=64*1024,t.DEBUG=e.CDEBUG==="debug",t.INFO=e.CDEBUG==="debug"||e.CDEBUG==="info",t.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var r={textNode:void 0,numberNode:""},i=t.EVENTS.filter(function(f){return f!=="error"&&f!=="end"}),n=0,l;t.STATE={BEGIN:n++,VALUE:n++,OPEN_OBJECT:n++,CLOSE_OBJECT:n++,OPEN_ARRAY:n++,CLOSE_ARRAY:n++,TEXT_ESCAPE:n++,STRING:n++,BACKSLASH:n++,END:n++,OPEN_KEY:n++,CLOSE_KEY:n++,TRUE:n++,TRUE2:n++,TRUE3:n++,FALSE:n++,FALSE2:n++,FALSE3:n++,FALSE4:n++,NULL:n++,NULL2:n++,NULL3:n++,NUMBER_DECIMAL_POINT:n++,NUMBER_DIGIT:n++};for(var u in t.STATE)t.STATE[t.STATE[u]]=u;n=t.STATE;let s={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(f){function a(){this.__proto__=f}return a.prototype=f,new a}),Object.getPrototypeOf||(Object.getPrototypeOf=function(f){return f.__proto__}),Object.keys||(Object.keys=function(f){var a=[];for(var w in f)f.hasOwnProperty(w)&&a.push(w);return a});function c(f){var a=Math.max(t.MAX_BUFFER_LENGTH,10),w=0;for(var p in r){var C=f[p]===void 0?0:f[p].length;if(C>a)switch(p){case"text":closeText(f);break;default:m(f,"Max buffer length exceeded: "+p)}w=Math.max(w,C)}f.bufferCheckPosition=t.MAX_BUFFER_LENGTH-w+f.position}function h(f){for(var a in r)f[a]=r[a]}var g=/[\\"\n]/g;function o(f){if(!(this instanceof o))return new o(f);var a=this;h(a),a.bufferCheckPosition=t.MAX_BUFFER_LENGTH,a.q=a.c=a.p="",a.opt=f||{},a.closed=a.closedRoot=a.sawRoot=!1,a.tag=a.error=null,a.state=n.BEGIN,a.stack=new Array,a.position=a.column=0,a.line=1,a.slashed=!1,a.unicodeI=0,a.unicodeS=null,a.depth=0,x(a,"onready")}o.prototype={end:function(){E(this)},write:L,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{l=Fe("stream").Stream}catch{l=function(){}}function O(f){return new y(f)}function y(f){if(!(this instanceof y))return new y(f);this._parser=new o(f),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var a=this;l.apply(a),this._parser.onend=function(){a.emit("end")},this._parser.onerror=function(w){a.emit("error",w),a._parser.error=null},i.forEach(function(w){Object.defineProperty(a,"on"+w,{get:function(){return a._parser["on"+w]},set:function(p){if(!p)return a.removeAllListeners(w),a._parser["on"+w]=p,p;a.on(w,p)},enumerable:!0,configurable:!1})})}y.prototype=Object.create(l.prototype,{constructor:{value:y}}),y.prototype.write=function(f){f=new Buffer(f);for(var a=0;a<f.length;a++){var w=f[a];if(this.bytes_remaining>0){for(var p=0;p<this.bytes_remaining;p++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+p]=f[p];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,a=a+p-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&w>=128)if(w>=194&&w<=223&&(this.bytes_in_sequence=2),w>=224&&w<=239&&(this.bytes_in_sequence=3),w>=240&&w<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+a>f.length){for(var C=0;C<=f.length-1-a;C++)this.temp_buffs[this.bytes_in_sequence][C]=f[a+C];return this.bytes_remaining=a+this.bytes_in_sequence-f.length,!0}else{this.string=f.slice(a,a+this.bytes_in_sequence).toString(),a=a+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var A=a;A<f.length&&!(f[A]>=128);A++);this.string=f.slice(a,A).toString(),this._parser.write(this.string),this.emit("data",this.string),a=A-1}},y.prototype.end=function(f){return f&&f.length&&this._parser.write(f.toString()),this._parser.end(),!0},y.prototype.on=function(f,a){var w=this;return!w._parser["on"+f]&&i.indexOf(f)!==-1&&(w._parser["on"+f]=function(){var p=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);p.splice(0,0,f),w.emit.apply(w,p)}),l.prototype.on.call(w,f,a)},y.prototype.destroy=function(){h(this._parser),this.emit("close")};function x(f,a,w){t.INFO&&console.log("-- emit",a,w),f[a]&&f[a](w)}function d(f,a,w){v(f),x(f,a,w)}function v(f,a){f.textNode=S(f.opt,f.textNode),f.textNode!==void 0&&x(f,a||"onvalue",f.textNode),f.textNode=void 0}function b(f){f.numberNode&&x(f,"onvalue",parseFloat(f.numberNode)),f.numberNode=""}function S(f,a){return a===void 0||(f.trim&&(a=a.trim()),f.normalize&&(a=a.replace(/\s+/g," "))),a}function m(f,a){return v(f),a+=`
Line: `+f.line+`
Column: `+f.column+`
Char: `+f.c,a=new Error(a),f.error=a,x(f,"onerror",a),f}function E(f){return(f.state!==n.VALUE||f.depth!==0)&&m(f,"Unexpected end"),v(f),f.c="",f.closed=!0,x(f,"onend"),o.call(f,f.opt),f}function N(f){return f===s.carriageReturn||f===s.lineFeed||f===s.space||f===s.tab}function L(f){var a=this;if(this.error)throw this.error;if(a.closed)return m(a,"Cannot write after close. Assign an onready handler.");if(f===null)return E(a);var w=0,p=f.charCodeAt(0),C=a.p,A=!1;for(t.DEBUG&&console.log("write -> ["+f+"]");p&&(C=p,a.c=p=f.charCodeAt(w++),C!==p?a.p=C:C=a.p,!!p);)switch(t.DEBUG&&console.log(w,p,t.STATE[a.state]),A?A=!1:(a.position++,p===s.lineFeed?(a.line++,a.column=0):a.column++),a.state){case n.BEGIN:p===s.openBrace?a.state=n.OPEN_OBJECT:p===s.openBracket?a.state=n.OPEN_ARRAY:N(p)||m(a,"Non-whitespace before {[.");continue;case n.OPEN_KEY:case n.OPEN_OBJECT:if(N(p))continue;if(a.state===n.OPEN_KEY)a.stack.push(n.CLOSE_KEY);else if(p===s.closeBrace){x(a,"onopenobject"),this.depth++,x(a,"oncloseobject"),this.depth--,a.state=a.stack.pop()||n.VALUE;continue}else a.stack.push(n.CLOSE_OBJECT);p===s.doubleQuote?a.state=n.STRING:m(a,'Malformed object key should start with "');continue;case n.CLOSE_KEY:case n.CLOSE_OBJECT:if(N(p))continue;var T=a.state===n.CLOSE_KEY?"key":"object";p===s.colon?(a.state===n.CLOSE_OBJECT?(a.stack.push(n.CLOSE_OBJECT),v(a,"onopenobject"),this.depth++):v(a,"onkey"),a.state=n.VALUE):p===s.closeBrace?(d(a,"oncloseobject"),this.depth--,a.state=a.stack.pop()||n.VALUE):p===s.comma?(a.state===n.CLOSE_OBJECT&&a.stack.push(n.CLOSE_OBJECT),v(a),a.state=n.OPEN_KEY):m(a,"Bad object");continue;case n.OPEN_ARRAY:case n.VALUE:if(N(p))continue;if(a.state===n.OPEN_ARRAY)if(x(a,"onopenarray"),this.depth++,a.state=n.VALUE,p===s.closeBracket){x(a,"onclosearray"),this.depth--,a.state=a.stack.pop()||n.VALUE;continue}else a.stack.push(n.CLOSE_ARRAY);p===s.doubleQuote?a.state=n.STRING:p===s.openBrace?a.state=n.OPEN_OBJECT:p===s.openBracket?a.state=n.OPEN_ARRAY:p===s.t?a.state=n.TRUE:p===s.f?a.state=n.FALSE:p===s.n?a.state=n.NULL:p===s.minus?a.numberNode+="-":s._0<=p&&p<=s._9?(a.numberNode+=String.fromCharCode(p),a.state=n.NUMBER_DIGIT):m(a,"Bad value");continue;case n.CLOSE_ARRAY:if(p===s.comma)a.stack.push(n.CLOSE_ARRAY),v(a,"onvalue"),a.state=n.VALUE;else if(p===s.closeBracket)d(a,"onclosearray"),this.depth--,a.state=a.stack.pop()||n.VALUE;else{if(N(p))continue;m(a,"Bad array")}continue;case n.STRING:a.textNode===void 0&&(a.textNode="");var _=w-1,$=a.slashed,P=a.unicodeI;e:for(;;){for(t.DEBUG&&console.log(w,p,t.STATE[a.state],$);P>0;)if(a.unicodeS+=String.fromCharCode(p),p=f.charCodeAt(w++),a.position++,P===4?(a.textNode+=String.fromCharCode(parseInt(a.unicodeS,16)),P=0,_=w-1):P++,!p)break e;if(p===s.doubleQuote&&!$){a.state=a.stack.pop()||n.VALUE,a.textNode+=f.substring(_,w-1),a.position+=w-1-_;break}if(p===s.backslash&&!$&&($=!0,a.textNode+=f.substring(_,w-1),a.position+=w-1-_,p=f.charCodeAt(w++),a.position++,!p))break;if($){if($=!1,p===s.n?a.textNode+=`
`:p===s.r?a.textNode+="\r":p===s.t?a.textNode+="	":p===s.f?a.textNode+="\f":p===s.b?a.textNode+="\b":p===s.u?(P=1,a.unicodeS=""):a.textNode+=String.fromCharCode(p),p=f.charCodeAt(w++),a.position++,_=w-1,p)continue;break}g.lastIndex=w;var I=g.exec(f);if(I===null){w=f.length+1,a.textNode+=f.substring(_,w-1),a.position+=w-1-_;break}if(w=I.index+1,p=f.charCodeAt(I.index),!p){a.textNode+=f.substring(_,w-1),a.position+=w-1-_;break}}a.slashed=$,a.unicodeI=P;continue;case n.TRUE:p===s.r?a.state=n.TRUE2:m(a,"Invalid true started with t"+p);continue;case n.TRUE2:p===s.u?a.state=n.TRUE3:m(a,"Invalid true started with tr"+p);continue;case n.TRUE3:p===s.e?(x(a,"onvalue",!0),a.state=a.stack.pop()||n.VALUE):m(a,"Invalid true started with tru"+p);continue;case n.FALSE:p===s.a?a.state=n.FALSE2:m(a,"Invalid false started with f"+p);continue;case n.FALSE2:p===s.l?a.state=n.FALSE3:m(a,"Invalid false started with fa"+p);continue;case n.FALSE3:p===s.s?a.state=n.FALSE4:m(a,"Invalid false started with fal"+p);continue;case n.FALSE4:p===s.e?(x(a,"onvalue",!1),a.state=a.stack.pop()||n.VALUE):m(a,"Invalid false started with fals"+p);continue;case n.NULL:p===s.u?a.state=n.NULL2:m(a,"Invalid null started with n"+p);continue;case n.NULL2:p===s.l?a.state=n.NULL3:m(a,"Invalid null started with nu"+p);continue;case n.NULL3:p===s.l?(x(a,"onvalue",null),a.state=a.stack.pop()||n.VALUE):m(a,"Invalid null started with nul"+p);continue;case n.NUMBER_DECIMAL_POINT:p===s.period?(a.numberNode+=".",a.state=n.NUMBER_DIGIT):m(a,"Leading zero not followed by .");continue;case n.NUMBER_DIGIT:s._0<=p&&p<=s._9?a.numberNode+=String.fromCharCode(p):p===s.period?(a.numberNode.indexOf(".")!==-1&&m(a,"Invalid number has two dots"),a.numberNode+="."):p===s.e||p===s.E?((a.numberNode.indexOf("e")!==-1||a.numberNode.indexOf("E")!==-1)&&m(a,"Invalid number has two exponential"),a.numberNode+="e"):p===s.plus||p===s.minus?(C===s.e||C===s.E||m(a,"Invalid symbol in number"),a.numberNode+=String.fromCharCode(p)):(b(a),w--,A=!0,a.state=a.stack.pop()||n.VALUE);continue;default:m(a,"Unknown state: "+a.state)}return a.position>=a.bufferCheckPosition&&c(a),a}})(typeof V>"u"?clarinet={}:V)});var Ne=R(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.stringify=J.parse=void 0;var We=(we(),Ue(Oe)),Xe=We.__importDefault(be());function Qe(t){let e=G(),r,i;function n(u){try{let s=e.next(u);s.done&&(r=s.value)}catch(s){i=s}}let l=Xe.default.parser();if(l.onopenobject=u=>n({type:"openobject",key:u}),l.onopenarray=()=>n({type:"openarray"}),l.onkey=u=>n({type:"key",key:u}),l.onvalue=u=>n({type:"value",value:u}),l.oncloseobject=()=>n({type:"closeobject"}),l.onclosearray=()=>n({type:"closearray"}),l.onerror=u=>n({type:"error",err:u}),e.next(),l.write(t).close(),i)throw i;return r}J.parse=Qe;function q(t){return Array.isArray(t)?`[${t.map(q).join(",")}]`:t instanceof Map?`{${[...t].map(([e,r])=>JSON.stringify(e)+":"+q(r)).join(",")}}`:JSON.stringify(t)}J.stringify=q;var ve=Symbol();function*G(){let t=yield;switch(t.type){case"value":return t.value;case"openobject":let e=new Map,r=t.key;for(r===void 0&&(yield);r!==void 0;)e.set(r,yield*G()),r=(yield).key;return e;case"openarray":let i=[],n;for(;;){if(n=yield*G(),n===ve)return i;i.push(n)}case"closearray":return ve;case"error":throw t.err;default:throw Error(`Unexpected ParseEvent ${t.type}`)}}});var Ce=R((lt,Le)=>{var z=X(Ne());Le.exports=class{constructor(e=!1){let r=this;if(this.indentation=4,[!0,!1,void 0].indexOf(e)==-1)throw new Error("@param {Boolean} pedantic");this.pedantic=e,this.damonOriginalLinesMapping=[],this.utils=new DamonUtils}template(e){let r=this;var i=e[0];for(let l=1;l<e.length;l++)typeof arguments[l]=="string"?i+='"'+arguments[l]+'"':i+=arguments[l],i+=e[l];return r._treeToMap(r._damonToTree(i))}damonToMap(e){let r=this,i=r._damonToTree(e);return i===!0||i===!1||i===null||typeof i=="string"||typeof i=="number"?i:r._treeToMap(r._damonToTree(e))}damonToJSON(e){let r=this;return r.mapToJSON(r.damonToMap(e))}damonToSExpression(e){let r=this;return r.implicitMapToSExpression(r.damonToMap(e))}jsonToDamon(e){let r=this;return r.mapToDamon(r.jsonToMap(e))}jsonToMap(e){let r=this;var i=/\r\n/.test(e)?`\r
`:`
`,n=e.split(i);if(n=n.filter(l=>!/^ *\/\//.test(l)),n=n.filter(l=>l!=""),n=n.filter(l=>!/^[ \t]+$/.test(l)),n.length==1){if(["true","false","null"].indexOf(n[0].trim())>-1)return JSON.parse(n[0]);if(/^".*"$/.test(n[0].trim()))try{return JSON.parse(n[0].trim())}catch(l){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),l.line=1,l.language="JSON",l.type="string",l}else if(isFinite(n[0])&&!isNaN(parseFloat(n[0]))&&Number.isFinite(n[0]*1)&&!Number.isNaN(n[0]*1)){if(n[0].indexOf(0)==0&&n[0].length>1&&n[0].indexOf(".")!==1)throw new Error("Error line number 1: leading 0",{line:1,language:"DAMON"});try{return JSON.parse(n[0]*1)}catch(l){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),l.line=1,l.language="JSON",l.type="number",l}}else if(n[0]*1===1/0)try{JSON.parse(n[0]*1)}catch(l){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),l.line=1,l.language="JSON",l.type="infinity",l}else return(0,z.parse)(e)}else return(0,z.parse)(e)}_damonToTree(e){let r=this;if(e==="")throw new Error("Error line 1: empty string",{line:1,language:"DAMON"});if(/[\s]/.test(e)&&e.match(new RegExp(/[\s]/))[0].length==e.length)throw new Error("Error line 1: string only contains whitespace",{line:1,language:"DAMON"});var i=/\r\n/.test(e)?`\r
`:`
`,n=e.split(i),l=n.slice(0);if(n=n.filter(d=>!/^ *\/\//.test(d)),n=n.filter(d=>d!=""),n=n.filter(d=>!/^[ \t]+$/.test(d)),n.length==1){if(["true","false","null"].indexOf(n[0].trim())>-1)return JSON.parse(n[0]);if(/^".*"$/.test(n[0].trim()))try{return JSON.parse(n[0].trim())}catch(d){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),d.line=1,d.language="JSON",d.type="string",d}else if(isFinite(n[0])&&!isNaN(parseFloat(n[0]))&&Number.isFinite(n[0]*1)&&!Number.isNaN(n[0]*1)){if(n[0].indexOf(0)==0&&n[0].length>1&&n[0].indexOf(".")!==1)throw new Error("Error line number 1: leading 0",{line:1,language:"DAMON"});try{return JSON.parse(n[0]*1)}catch(d){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),d.line=1,d.language="JSON",d.type="number",d}}else if(n[0]*1===1/0)try{JSON.parse(n[0]*1)}catch(d){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),d.line=1,d.language="JSON",d.type="infinity",d}}let u=0;r.damonOriginalLinesMapping=[];for(let d=0,v=l.length;d<v;d++)n.slice(u).indexOf(l[d])>-1?r.damonOriginalLinesMapping[d]=n.slice(u).indexOf(l[d]):r.damonOriginalLinesMapping[d]=null;let s=new RegExp("^(	)+");for(let d=0,v=n.length;d<v;d++){if(s.test(n[d])){let b=n[d].match(s)[0].length;for(let S=0,m=b;S<m;S++)n[d]=n[d].replace("	"," ".repeat(r.indentation))}if(!/^ *- $/.test(n[d])&&/[ \t]+$/.test(n[d]))throw new Error("Error line "+(r.damonOriginalLinesMapping.indexOf(d)+1)+": trailing whitespace",{line:r.damonOriginalLinesMapping.indexOf(d)+1,language:"DAMON"})}let c=new RegExp("^("+" ".repeat(r.indentation)+")+");if(c.test(n[0])){let d=n[0].match(c)[0].length,v=!0;for(let b=0,S=n.length;b<S;b++)c.test(n[b])&&n[b].match(c)[0].length>=d?n[b]=n[b].slice(d):v=!1;if(!v)throw new Error("Error line 1: bad formatting",{line:1,language:"DAMON"})}else if(c.test(n[1])&&n[1].match(c)[0].length>r.indentation){let d=n[1].match(c)[0].length-r.indentation,v=!0;for(let b=1,S=n.length;b<S;b++)c.test(n[b])&&n[b].match(c)[0].length>=d?n[b]=n[b].slice(d):v=!1;if(!v)throw new Error("Error line 2: bad formatting",{line:2,language:"DAMON"})}let h=!1;if(n.length>1)for(let d=0,v=n.length;d<v;d++)d!==0&&/^- /.test(n[d])&&(h=!0);if(!/^- \{\}$/.test(n[0])&&!/^- \[\]$/.test(n[0])&&(h=!0),h){for(let d=0,v=n.length;d<v;d++)n[d]=" ".repeat(r.indentation)+n[d];n.unshift("- {}")}var g={content:n[0],level:0,id:0,children:[],headless:h},o=g;if(!/^- /.test(n[0].trimStart())||/^ +/.test(n[0])&&(n[0].match(/^ +/)[0].length%r.indentation!=0||n[0].match(/^ +/)[0].length!=r.indentation))throw new Error("Error line "+(h*1+1)+": bad formatting",{line:h*1+1,language:"DAMON"});n.shift();for(let d=0,v=n.length;d<v;d++){if(!/^- /.test(n[d].trimStart())||/^ +/.test(n[d])&&(n[d].match(/^ +/)[0].length%r.indentation!=0||d==0&&n[d].match(/^ +/)[0].length!=r.indentation||d!=0&&/^- /.test(n[d-1])&&n[d].match(/^ +/)[0].length!=r.indentation||d!=0&&!/^- /.test(n[d-1])&&n[d].match(/^ +/)[0].length>n[d-1].match(/^ +/)[0].length+r.indentation))throw new Error("Error line "+(r.damonOriginalLinesMapping.indexOf(d)+1)+": bad formatting",{line:r.damonOriginalLinesMapping.indexOf(d)+1,language:"DAMON"});let b={content:n[d].trimStart().slice(2),level:1+n[d].match(/^ +/)[0].length/r.indentation,id:"",children:[]};if(o===g)b.id=g.children.length+1,g.children.push(b);else if(o.level===b.level){var O=r._findListItemCommonDirectParent(o,g);O.level==0?b.id=O.children.length+1:b.id=O.id+"-"+(O.children.length+1),O.children.push(b)}else if(o.level>b.level){var y=r._findListItemCommonAncestor(o,g,b.level);y.level==0?b.id=y.children.length+1:b.id=y.id+"-"+(y.children.length+1),y.children.push(b)}else if(o.level<b.level){var x=r._findListItemCommonDirectParent(o,g);let S=x.children.indexOf(o),m=x.children[S].id,E=x.children[S].children.length+1;b.id=m+"-"+E,x.children[S].children.push(b)}o=b}return g}_findListItemCommonDirectParent(e,r){let i=this;if(r.children.indexOf(e)>-1)return r;var n;for(let l=r.children.length-1,u=0;l>=u;l--)if(n=i._findListItemCommonDirectParent(e,r.children[l]),n)return n}_findListItemCommonAncestor(e,r,i){let n=this;var l=n._findListItemCommonDirectParent(e,r);return l.level<i?l:n._findListItemCommonAncestor(l,r,i)}_treeToMap(e){let r=this;var i=0;if(e.content=="- {}")return n(e,new Map);if(e.content=="- []")return n(e,[]);{let s=new Map;return e.headless&&(s.headless=!0),n(e,s)}function n(s,c){if(typeof s!="object"||s==null||Array.isArray(s))throw new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+2)+": @param { {} } tree",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+2,language:"DAMON"});if(typeof c=="object"&&c!==null&&!Array.isArray(c)&&c instanceof Map&&c.constructor===Map)l(s,c);else if(Array.isArray(c))u(s,c);else throw new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+2)+": @param { {} | [] } jsonMap",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+2,language:"DAMON"});return c}function l(s,c){for(let h=0,g=s.children.length;h<g;h++)if(i++,s.children[h].content.length==0){let o;s.children[h].children.length>0?(o="implicit map key",c.set("",new Map),c.implicitMaps===void 0&&(c.implicitMaps=[]),c.implicitMaps.push(""),n(s.children[h],c.get(""))):(o="implicit null key",c.set("",null),c.implicitNulls===void 0&&(c.implicitNulls=[]),c.implicitNulls.push(""))}else{let o=s.children[h].content,O="key";try{if(/^.*: +\[/.test(o)&&o[o.length-1]=="]")if(/: +\[ *\]$/.test(o)){let y=JSON.stringify(JSON.parse(`["${o.slice(0,-1*o.match(/: +\[ *\]$/)[0].length)}"]`)[0]).slice(1,-1);c.set(y,[]),s.children[h].children.length>0&&n(s.children[h],c.get(y))}else{let y=new RegExp(/: +\[/g),x=o.slice(0,-1).split(y),d=o.match(y).concat([""]),v=x.map((E,N)=>E+d[N]),b="",S=[];for(let E=0,N=x.length;E<N;E++)try{let L;if(E==0?L=x[0]:L=v.slice(0,E).join("")+x[E],b=JSON.stringify(JSON.parse(`["${L}"]`)[0]).slice(1,-1),O="list",S=JSON.parse(`[${v.slice(E+1).join("")}]`),Array.isArray(S))break}catch{if(E==N-2)throw new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+2)+": invalid inline list",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+2,language:"DAMON"})}if(S.every(function(E){return E===!0||E===!1?!0:E===null?(nullsCounter++,!0):typeof E=="string"?!0:!!(isFinite(E)&&!isNaN(parseFloat(E))&&Number.isFinite(E*1)&&!Number.isNaN(E*1))}))c.set(b,S),c.inlineArrays===void 0&&(c.inlineArrays=[]),c.inlineArrays.push(b);else throw new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+2)+": no nesting in inline lists",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+2,language:"DAMON"});if(s.children[h].children.length>0)throw new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+3)+": inline lists can't have children",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+3,language:"DAMON"})}else if(/: +\{ *\}$/.test(o)){let y=JSON.stringify(JSON.parse(`["${o.slice(0,-1*o.match(/: +\{ *\}$/)[0].length)}"]`)[0]).slice(1,-1);c.set(y,new Map),n(s.children[h],c.get(y))}else{let y=!1;if(o.split(new RegExp(/: +/))[o.split(new RegExp(/: +/)).length-1]==="true"){let x=o.match(new RegExp(/: +/g))[o.match(new RegExp(/: +/g)).length-1],d=JSON.stringify(JSON.parse(`["${o.slice(0,-1*x.length-4)}"]`)[0]).slice(1,-1);c.set(d,!0)}else if(o.split(new RegExp(/: +/))[o.split(new RegExp(/: +/)).length-1]==="false"){let x=o.match(new RegExp(/: +/g))[o.match(new RegExp(/: +/g)).length-1],d=JSON.stringify(JSON.parse(`["${o.slice(0,-1*x.length-5)}"]`)[0]).slice(1,-1);c.set(d,!1)}else if(o.split(new RegExp(/: +/))[o.split(new RegExp(/: +/)).length-1]=="null"){let x=o.match(new RegExp(/: +/g))[o.match(new RegExp(/: +/g)).length-1],d=JSON.stringify(JSON.parse(`["${o.slice(0,-1*x.length-4)}"]`)[0]).slice(1,-1);c.set(d,null)}else if(/^.*: +"/.test(o)&&o[o.length-1]=='"'){let x=o.match(new RegExp(/: +"/g));if(x.length==1){let d=JSON.stringify(JSON.parse(`["${o.split(x[0])[0]}"]`)[0]).slice(1,-1);O="string";let v=JSON.stringify(JSON.parse(`["${o.split(x[0]).slice(1).join("").slice(0,-1)}"]`)[0]).slice(1,-1);c.set(d,v)}else if(x.length==2&&/: +"$/.test(o)){let d=JSON.stringify(JSON.parse(`["${o.split(x[0])[0]}"]`)[0]).slice(1,-1);O="string";let v=JSON.stringify(JSON.parse(`["${o.split(x[0]).slice(1).join("")+": "}"]`)[0]).slice(1,-1);c.set(d,v)}else throw new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+2)+": unescaped double quote",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+2,language:"DAMON"})}else if(/^.*: /.test(o)&&isFinite(o.split(": ")[o.split(": ").length-1])&&!isNaN(parseFloat(o.split(": ")[o.split(": ").length-1]))&&Number.isFinite(o.split(": ")[o.split(": ").length-1]*1)&&!Number.isNaN(o.split(": ")[o.split(": ").length-1]*1)){let x=JSON.stringify(JSON.parse(`["${o.split(": ").slice(0,-1).join(": ")}"]`)[0]).slice(1,-1);O="number";let d=o.match(new RegExp(/: +/g)),v=d[d.length-1],b=o.split(v)[o.split(v).length-1];if(b.indexOf(0)==0&&b.length>1&&b.indexOf(".")!==1)throw new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+2)+": leading 0",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+2,language:"DAMON"});let S=JSON.stringify(JSON.parse(`[${o.split(": ")[o.split(": ").length-1]*1}]`)[0])*1;c.set(x,S)}else if(/^.*: /.test(o)&&o.split(new RegExp(/: +/))[o.split(new RegExp(/: +/)).length-1]*1===1/0){let x=JSON.stringify(JSON.parse(`["${o.split(": ").slice(0,-1).join(": ")}"]`)[0]).slice(1,-1);O="infinity";let d=JSON.stringify(JSON.parse(`[${o.split(": ")[o.split(": ").length-1]*1}]`))*1}else{let x=!1,d=0;if(/\[ *\]$/.test(o)&&(x=!0,d=o.match(new RegExp(/\[ *\]$/g))[0].length),/\{ *\}$/.test(o)&&(x=!0,d=o.match(new RegExp(/\{ *\}$/g))[0].length),/true$/.test(o)&&(x=!0,d=4),/false$/.test(o)&&(x=!0,d=5),/null$/.test(o)&&(x=!0,d=4),/".*"$/.test(o)&&(x=!0,d=o.match(new RegExp(/".*"$/g))[0].length),!x){let v="";for(let b=o.length-1;b>-1&&(v=o[b].concat(v),isFinite(v)&&!isNaN(parseFloat(v))&&Number.isFinite(v*1)&&!Number.isNaN(v*1));b--){if(!/[ \t]/.test(o[b]))break;x=!0,d=v.length}}if(x){let v=JSON.stringify(JSON.parse(`["${o.slice(0,-1*d)}"]`)[0]).slice(1,-1);if(r.pedantic)throw new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(i))+": missing separator",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(i),language:"DAMON",errorType:"pedantic"});if(/: +$/.test(v))if(y=!0,s.children[h].children.length>0){O="implicit map key";let b=JSON.stringify(JSON.parse(`["${o}"]`)[0]).slice(1,-1);c.set(b,new Map),c.implicitMaps===void 0&&(c.implicitMaps=[]),c.implicitMaps.push(b),n(s.children[h],c.get(b))}else{O="implicit null key";let b=JSON.stringify(JSON.parse(`["${o}"]`)[0]).slice(1,-1);c.set(b,null),c.implicitNulls===void 0&&(c.implicitNulls=[]),c.implicitNulls.push(b)}else throw new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(i))+": missing separator",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(i),language:"DAMON",errorType:"pedantic"})}else{let v=JSON.stringify(JSON.parse(`["${o.slice(0,-1*d)}"]`)[0]).slice(1,-1);if(r.pedantic)throw/: +$/.test(v)?new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+3)+": bad value",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(i),language:"DAMON",errorType:"pedantic"}):new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(i))+": missing separator",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(i),language:"DAMON",errorType:"pedantic"});if(y=!0,s.children[h].children.length>0){O="implicit map key";let b=JSON.stringify(JSON.parse(`["${o}"]`)[0]).slice(1,-1);c.set(b,new Map),c.implicitMaps===void 0&&(c.implicitMaps=[]),c.implicitMaps.push(b),n(s.children[h],c.get(b))}else{O="implicit null key";let b=JSON.stringify(JSON.parse(`["${o}"]`)[0]).slice(1,-1);c.set(b,null),c.implicitNulls===void 0&&(c.implicitNulls=[]),c.implicitNulls.push(b)}}}if(!y&&s.children[h].children.length>0)throw new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+3)+": missing container or excess indentation",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+3,language:"DAMON"})}}catch(y){throw y.language===void 0&&(console.error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+2)+": not JSON-compliant, detailed error follows"),y.line=e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+2,y.language="JSON",y.type=O),y}}}function u(s,c){for(let h=0,g=s.children.length;h<g;h++)if(i++,s.children[h].content.length){let o=s.children[h].content;if(/^[ \t]*\[/.test(o)&&o[o.length-1]=="]")if(/^[ \t]*\[ *\]$/.test(o))c.push([]),n(s.children[h],c[c.length-1]);else{let O;try{O=JSON.parse(o)}catch{throw new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+2)+": invalid inline lists",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+2,language:"JSON",type:"list"})}if(O.every(function(x){return x===!0||x===!1?!0:x===null?(nullsCounter++,!0):typeof x=="string"?!0:!!(isFinite(x)&&!isNaN(parseFloat(x))&&Number.isFinite(x*1)&&!Number.isNaN(x*1))}))c.push(O),c.inlineArrays===void 0&&(c.inlineArrays=[]),c.inlineArrays.push(h);else throw new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+2)+": no nesting in inline lists",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+2,language:"DAMON"});if(s.children[h].children.length>0)throw new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+3)+": inline lists can't have children",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+3,language:"DAMON"})}else if(/^[ \t]*\{\}$/.test(o))c.push(new Map),n(s.children[h],c[c.length-1]);else if(/^[ \t]*true$/.test(o))c.push(!0);else if(/^[ \t]*false$/.test(o))c.push(!1);else if(/^[ \t]*null$/.test(o))c.push(null);else if(/^[ \t]*".*"$/.test(o))try{c.push(JSON.stringify(JSON.parse(`[${o.trimStart()}]`)[0]).slice(1,-1))}catch(O){throw console.error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+2)+": not JSON-compliant, detailed error follows"),O.line=e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+2,O.language="JSON",O.type="string",O}else if(isFinite(o)&&!isNaN(parseFloat(o))&&Number.isFinite(o*1)&&!Number.isNaN(o*1)){if(o.indexOf(0)==0&&o.length>1&&o.indexOf(".")!==1)throw new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+2)+": leading 0",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+2,language:"DAMON"});try{c.push(JSON.stringify(JSON.parse(`[${o*1}]`)[0])*1)}catch(O){throw console.error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+2)+": not JSON-compliant, detailed error follows"),O.line=e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+2,O.language="JSON",O.type="number",O}}else if(o*1===1/0)try{JSON.stringify(JSON.parse(o*1))}catch(O){throw console.error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+2)+": not JSON-compliant, detailed error follows"),O.line=e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+2,O.language="JSON",O.type="infinity",O}else throw new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+2)+": list items can't have a key",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+2,language:"DAMON"})}else throw new Error("Error line number "+(e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+2)+": empty list node",{line:e.headless*-1+r.damonOriginalLinesMapping.indexOf(i-1)+2,language:"DAMON"})}}mapToDamon(e){let r=this;var i="";if(Array.isArray(e))i+=`- []
`;else if(typeof e=="object"&&e!==null&&e instanceof Map&&e.constructor===Map)i+=`- {}
`;else return typeof e=="string"&&(e='"'+e+'"'),JSON.parse(e),e;return n(e),r.damonToMap(i.slice(0,-1)),i.slice(0,-1);function n(l,u=1){if(typeof l=="object"&&l!==null&&!Array.isArray(l)&&l instanceof Map&&l.constructor===Map)for(let[h,g]of l)if(typeof g=="object"&&g!==null)if(Array.isArray(g)){let o=0,O=g.filter(function(y){return y===!0||y===!1?!0:y===null?(o++,!0):typeof y=="string"?!0:!!(isFinite(y)&&!isNaN(parseFloat(y))&&Number.isFinite(y*1)&&!Number.isNaN(y*1))});if(g.length==O.length&&u*4+2+g.join(", ").length+o*4<=80){let y="["+g.map(function(x){return typeof x=="string"&&(x='"'+x+'"'),x}).join(", ")+"]";i+="    ".repeat(u)+"- "+h+": "+y+`
`}else i+="    ".repeat(u)+"- "+h+`: []
`,n(g,u+1)}else i+="    ".repeat(u)+"- "+h+`: {}
`,n(g,u+1);else i+="    ".repeat(u)+"- "+h+": ",g===!0?i+=`true
`:g===!1?i+=`false
`:g===null?i+=`null
`:Number.isFinite(g)&&!Number.isNaN(g)?i+=g+`
`:i+=`"${g}"
`;else if(Array.isArray(l))for(var s=0,c=l.length;s<c;s++)if(typeof l[s]=="object"&&l[s]!==null)if(Array.isArray(l[s])){let h=0,g=l[s].filter(function(o){return o===!0||o===!1?!0:o===null?(h++,!0):typeof o=="string"?!0:!!(isFinite(o)&&!isNaN(parseFloat(o))&&Number.isFinite(o*1)&&!Number.isNaN(o*1))});if(l[s].length==g.length&&u*4+2+l[s].join(", ").length+h*4<=80){let o="["+l[s].map(function(O){return typeof O=="string"&&(O='"'+O+'"'),O}).join(", ")+"]";i+="    ".repeat(u)+"- "+o+`
`}else i+="    ".repeat(u)+`- []
`,n(l[s],u+1)}else i+="    ".repeat(u)+`- {}
`,n(l[s],u+1);else l[s]===!0?i+="    ".repeat(u)+`- true
`:l[s]===!1?i+="    ".repeat(u)+`- false
`:l[s]===null?i+="    ".repeat(u)+`- null
`:Number.isFinite(l[s])&&!Number.isNaN(l[s])?i+="    ".repeat(u)+"- "+l[s]+`
`:i+="    ".repeat(u)+`- "${l[s]}"
`}}mapToJSON(e){let r=this;var i="";if(Array.isArray(e))return i+=`[\r
`,n(e),i+="]",JSON.parse(i),i;return typeof e=="object"&&e!==null&&e instanceof Map&&e.constructor===Map?(i+=`{\r
`,n(e),i+="}",JSON.parse(i),i):(typeof e=="string"&&(e='"'+e+'"'),JSON.parse(e),e);function n(l,u=1){if(typeof l=="object"&&l!==null&&!Array.isArray(l)&&l instanceof Map&&l.constructor===Map)for(let[h,g]of l)typeof g=="object"&&g!==null?Array.isArray(g)?g.length>0?(i+="    ".repeat(u)+`"${h}": [\r
`,n(g,u+1),i+="    ".repeat(u)+"]"):i+="    ".repeat(u)+`"${h}": []`:Array.from(g.keys()).length>0?(i+="    ".repeat(u)+`"${h}": {\r
`,n(g,u+1),i+="    ".repeat(u)+"}"):i+="    ".repeat(u)+`"${h}": {}`:g===!0?i+="    ".repeat(u)+`"${h}": true`:g===!1?i+="    ".repeat(u)+`"${h}": false`:g===null?i+="    ".repeat(u)+`"${h}": null`:Number.isFinite(g)&&!Number.isNaN(g)?i+="    ".repeat(u)+`"${h}": `+g:i+="    ".repeat(u)+`"${h}": "${g}"`,h!=Array.from(l.keys())[Array.from(l.keys()).length-1]?i+=`,\r
`:i+=`\r
`;else if(Array.isArray(l))for(var s=0,c=l.length;s<c;s++)typeof l[s]=="object"&&l[s]!==null?Array.isArray(l[s])?l[s].length>0?(i+="    ".repeat(u)+`[\r
`,n(l[s],u+1),i+="    ".repeat(u)+"]"):i+="    ".repeat(u)+"[]":Array.from(l[s].keys()).length>0?(i+="    ".repeat(u)+`{\r
`,n(l[s],u+1),i+="    ".repeat(u)+"}"):i+="    ".repeat(u)+"{}":l[s]===!0?i+="    ".repeat(u)+"true":l[s]===!1?i+="    ".repeat(u)+"false":l[s]===null?i+="    ".repeat(u)+"null":Number.isFinite(l[s])&&!Number.isNaN(l[s])?i+="    ".repeat(u)+l[s]:i+="    ".repeat(u)+`"${l[s]}"`,s!=c-1?i+=`,\r
`:i+=`\r
`}}implicitMapToSExpression(e){let r=this;var i="";if(typeof e=="object"&&e!==null&&e instanceof Map&&e.constructor===Map)return i+=`[\r
`,n(e),i+="]",JSON.parse(i),i;return typeof e=="string"&&(e='"'+e+'"'),JSON.parse(e),e;function n(l,u=1){if(typeof l=="object"&&l!==null&&!Array.isArray(l)&&l instanceof Map&&l.constructor===Map){let h=-1;for(let[g,o]of l){if(h++,typeof o=="object"&&o!==null)if(Array.isArray(o))o.length>0?(i+="    ".repeat(u)+`"${g}", [\r
`,n(o,u+1),i+="    ".repeat(u)+"]"):i+="    ".repeat(u)+`"${g}", []`;else if(Array.from(o.keys()).length>0){if(u==1)if(h==0)i="";else throw new Error("Multiple S-Expression roots");i+="    ".repeat(u)+`["${g}", \r
`,n(o,u+1),u!=1&&(i+="    ".repeat(u)+"]")}else i+="    ".repeat(u)+`"${g}", []`;else{if(o===!0)throw new Error("Booleans require quotes");if(o===!1)throw new Error("Booleans require quotes");o===null?i+="    ".repeat(u)+`"${g}"`:Number.isFinite(o)&&!Number.isNaN(o)?i+="    ".repeat(u)+`"${g}", `+o:i+="    ".repeat(u)+`"${g}", "${o}"`}g!=Array.from(l.keys())[Array.from(l.keys()).length-1]?i+=`,\r
`:i+=`\r
`}}else if(Array.isArray(l))for(var s=0,c=l.length;s<c;s++){if(typeof l[s]=="object"&&l[s]!==null)Array.isArray(l[s])?l[s].length>0?(i+="    ".repeat(u)+`[\r
`,n(l[s],u+1),i+="    ".repeat(u)+"]"):i+="    ".repeat(u)+"[]":Array.from(l[s].keys()).length>0?(i+="    ".repeat(u)+`[\r
`,n(l[s],u+1),i+="    ".repeat(u)+"]"):i+="    ".repeat(u)+"[]";else{if(l[s]===!0)throw new Error("Booleans require quotes");if(l[s]===!1)throw new Error("Booleans require quotes");if(l[s]===null)throw new Error("Array-nulls require quotes");Number.isFinite(l[s])&&!Number.isNaN(l[s])?i+="    ".repeat(u)+l[s]:i+="    ".repeat(u)+`"${l[s]}"`}s!=c-1?i+=`,\r
`:i+=`\r
`}}}}});var K=R((st,_e)=>{_e.exports=class{constructor(e){let r=this;this.parent=e,this.itemHeight=parseFloat(getComputedStyle(this.parent.editor).getPropertyValue("--fontSize"))*parseFloat(getComputedStyle(this.parent.editor).getPropertyValue("--lineHeight")),this.viewportHeight=this.parent.editor.getBoundingClientRect().height,this.viewable=Math.ceil(r.viewportHeight/r.itemHeight),this.maxCounter=this.parent.textarea.value.split(`
`).length,this.buffer=r.viewable*2,this.visibleNodesCount=r.viewable+r.buffer,this.lastScrollTop=void 0,this.lastStart=void 0,this.active=!1}inputHandler(e){let r=this;r.parent.textarea.value.split(`
`).length<=r.visibleNodesCount?(r.parent.gutter.innerHTML="",r.init(0)):(r.parent.gutter.innerHTML="",r.init(r.getStartNode(r.parent.textarea.value.split(`
`).length)))}scrollHandler(){let e=this;e.maxCounter<e.visibleNodesCount?e.lastScrollTop!==e.parent.editor.scrollTop?(e.parent.gutter.innerHTML="",e.parent.editor.style.setProperty("--scrollbarPadding","0px"),e.init(0)):(e.parent.editor.style.setProperty("--scrollbarPadding","0px"),e.parent.gutter.style.transform="translate("+e.parent.editor.scrollLeft+"px, "+0*e.itemHeight+"px)",e.parent.overlay.firstElementChild.style.transform="translate(0px, "+0*e.itemHeight+"px)"):e.lastScrollTop!==e.parent.editor.scrollTop?(e.active=!0,e.parent.editor.style.setProperty("--scrollbarPadding","var(--textareaPadding) * 4"),e.update(e.getStartNode(e.maxCounter))):(e.parent.gutter.style.transform="translate("+e.parent.editor.scrollLeft+"px, "+e.getStartNode(e.maxCounter)*e.itemHeight+"px)",e.parent.overlay.firstElementChild.style.transform="translate(0px, "+e.getStartNode(e.maxCounter)*e.itemHeight+"px)")}init(e){let r=this;r.parent.textarea.style.height=(r.parent.textarea.value.split(`
`).length+1)*r.itemHeight+"px",r.resetProperties(),e>r.maxCounter-r.visibleNodesCount&&(r.maxCounter-r.visibleNodesCount>0?e=r.maxCounter-r.visibleNodesCount:e=0);let i=Math.max(1,Math.min(r.maxCounter-e,r.visibleNodesCount));for(let c=e;c<e+i;c++){let h=document.createElement("div"),g=document.createElement("span"),o=(r.maxCounter+"").length,O=(c+1+"").length,y=o-O;g.textContent=" ".repeat(y)+(c+1),h.appendChild(g),r.parent.gutter.appendChild(h)}r.parent.gutter.style.transform="translate("+r.parent.editor.scrollLeft+"px, "+e*r.itemHeight+"px)",r.parent.overlay.firstElementChild.style.transform="translate(0px, "+e*r.itemHeight+"px)",r.lastStart=e,r.lastScrollTop=r.parent.editor.scrollTop,r.maxCounter>=r.visibleNodesCount&&(r.active=!0),r.setGutterWidth(),r.parent.updateCurrentLine(!0);let n=r.parent.textarea.value.split(`
`);r.parent.textarea.rows=n.length+1,r.parent.textarea.cols=n.map(c=>c.length).reduce(function(c,h){return Math.max(c,h)});let l=r.parent.textarea.value.replaceAll(/&amp;/g,"&").replaceAll(/&lt;/g,"<").replaceAll(/&gt;/g,">"),u=[`<span class="token lf">
</span>`],s=r.parent.lastTextareaValue.split(`
`);l!=""&&(u=r.parent.prism.highlight(l+`
`,r.parent.prism.languages.damon,"damon").replace(/<span>\n<\/span>$/,"").split(`
`).map(c=>c.replace(/^<\/span>/,"")+`
</span>`));for(let c=e,h=e+i;c<h;c++){let g=document.createElement("span"),o=0;g.classList.add("space-line"),g.innerHTML=u[c];for(let O=0,y=g.children.length;O<y&&g.children[O].textContent==" ";O++)o++,o==4&&(o=0,g.children[O-3].classList.add("indent-guide"));(!r.parent.initialized||s[c]==null||s[c]!=n[c]||r.parent.overlay.firstElementChild.children[c-e]!=null&&g.innerHTML!=r.parent.overlay.firstElementChild.children[c-e].innerHTML)&&(s[c]==null||!r.parent.initialized?(r.parent.overlay.firstElementChild.appendChild(g),r.parent.overlay.firstElementChild.children.length>i+1&&r.parent.overlay.firstElementChild.firstElementChild.remove()):r.parent.overlay.firstElementChild.replaceChild(g,r.parent.overlay.firstElementChild.children[c-e]))}if(r.parent.overlay.firstElementChild.children.length>i)for(let c=i,h=r.parent.overlay.firstElementChild.children.length;c<h;c++)r.parent.overlay.firstElementChild.lastElementChild.remove()}getStartNode(e){let r=this,i=Math.floor(r.parent.editor.scrollTop/r.itemHeight)-r.viewable;return i=Math.min(Math.max(0,i),Math.max(0,e-r.buffer)),i}resetProperties(){let e=this;e.viewportHeight=e.parent.editor.getBoundingClientRect().height,e.viewable=Math.ceil(e.viewportHeight/e.itemHeight),e.maxCounter=e.parent.textarea.value.split(`
`).length,e.buffer=e.viewable*2,e.visibleNodesCount=e.viewable+e.buffer,e.active=!1}update(e){let r=this;if(r.resetProperties(),r.parent.gutter.firstElementChild)if(r.lastScrollTop!=r.parent.editor.scrollTop)e>r.maxCounter-r.visibleNodesCount&&(r.maxCounter-r.visibleNodesCount>0?e=r.maxCounter-r.visibleNodesCount:e=0),r.diffItems(e,r.visibleNodesCount),r.parent.gutter.style.transform="translate("+r.parent.editor.scrollLeft+"px, "+e*r.itemHeight+"px)",r.parent.overlay.firstElementChild.style.transform="translate(0px, "+e*r.itemHeight+"px)",r.lastScrollTop=r.parent.editor.scrollTop;else if(/^translate\(.+px, .+px\)$/.test(r.parent.gutter.style.transform))r.parent.gutter.style.transform="translate("+r.parent.editor.scrollLeft+"px, "+r.parent.gutter.style.transform.split(", ")[1];else throw new Error("You need to update this regex.");r.setGutterWidth(),r.parent.updateCurrentLine(!0)}diffItems(e,r){let i=this;if(i.lastStart!=e){if(i.lastStart<e){let n=Math.min(r,Math.abs(e-i.lastStart));for(let h=0,g=n;h<g;h++)i.parent.gutter.firstElementChild.remove();for(let h=e+r-n;h<e+r;h++){let g=document.createElement("div"),o=document.createElement("span"),O=(i.maxCounter+"").length,y=(h+1+"").length,x=O-y;o.textContent=" ".repeat(x)+(h+1),g.appendChild(o),i.parent.gutter.appendChild(g)}let l=i.parent.textarea.value.split(`
`);i.parent.textarea.rows=l.length+1,i.parent.textarea.cols=l.map(h=>h.length).reduce(function(h,g){return Math.max(h,g)});let u=i.parent.textarea.value.replaceAll(/&amp;/g,"&").replaceAll(/&lt;/g,"<").replaceAll(/&gt;/g,">"),s=i.parent.prism.highlight(u+`
`,i.parent.prism.languages.damon,"damon").replace(/<span>\n<\/span>$/,"").split(`
`).map(h=>h.replace(/^<\/span>/,"")+`
</span>`),c=i.parent.lastTextareaValue.split(`
`);for(let h=0,g=n;h<g;h++)i.parent.overlay.firstElementChild.firstElementChild.remove();for(let h=e+r-n;h<e+r;h++){let g=document.createElement("span"),o=0;g.classList.add("space-line"),g.innerHTML=s[h];for(let O=0,y=g.children.length;O<y&&g.children[O].textContent==" ";O++)o++,o==4&&(o=0,g.children[O-3].classList.add("indent-guide"));i.parent.overlay.firstElementChild.appendChild(g)}}else{let n=Math.min(r,Math.abs(i.lastStart-e));for(let o=0,O=n;o<O;o++)i.parent.gutter.lastElementChild.remove();let l=document.createDocumentFragment();for(let o=e;o<e+n;o++){let O=document.createElement("div"),y=document.createElement("span"),x=(i.maxCounter+"").length,d=(o+1+"").length,v=x-d;y.textContent=" ".repeat(v)+(o+1),O.appendChild(y),l.appendChild(O)}i.parent.gutter.insertBefore(l,i.parent.gutter.firstElementChild);let u=i.parent.textarea.value.split(`
`);i.parent.textarea.rows=u.length+1,i.parent.textarea.cols=u.map(o=>o.length).reduce(function(o,O){return Math.max(o,O)});let s=i.parent.textarea.value.replaceAll(/&amp;/g,"&").replaceAll(/&lt;/g,"<").replaceAll(/&gt;/g,">"),c=i.parent.prism.highlight(s+`
`,i.parent.prism.languages.damon,"damon").replace(/<span>\n<\/span>$/,"").split(`
`).map(o=>o.replace(/^<\/span>/,"")+`
</span>`),h=i.parent.lastTextareaValue.split(`
`);for(let o=0,O=n;o<O;o++)i.parent.overlay.firstElementChild.lastElementChild.remove();let g=document.createDocumentFragment();for(let o=e;o<e+n;o++){let O=document.createElement("span"),y=0;O.classList.add("space-line"),O.innerHTML=c[o];for(let x=0,d=O.children.length;x<d&&O.children[x].textContent==" ";x++)y++,y==4&&(y=0,O.children[x-3].classList.add("indent-guide"));g.appendChild(O)}i.parent.overlay.firstElementChild.insertBefore(g,i.parent.overlay.firstElementChild.firstElementChild)}i.lastStart=e}}setGutterWidth(){let e=this,r=e.parent.gutter.children[0].children[0].getBoundingClientRect().width,i=parseFloat(getComputedStyle(e.parent.editor).getPropertyValue("--gutterWidth"));r>i?(e.parent.gutter.style.width=r+"px",e.parent.container.style.left=r+"px"):(e.parent.gutter.style.width="",e.parent.container.style.left="")}}});var Te=R((ft,Ae)=>{var ot=X(K());Ae.exports=function(t){t.update(),t.historyUpdate(),window.addEventListener("load",e),t.editor.addEventListener("focusin",r),t.editor.addEventListener("focusout",i),t.gutter.addEventListener("click",n),document.addEventListener("mousedown",u),document.addEventListener("mousemove",s),document.addEventListener("mouseup",c),document.addEventListener("selectionchange",h),t.textarea.addEventListener("beforeinput",g),t.textarea.addEventListener("keydown",o),t.textarea.addEventListener("cut",O),t.textarea.addEventListener("copy",y),t.textarea.addEventListener("paste",x);function e(S){t.overlay.firstElementChild.innerHTML="",t.gutter.innerHTML="",t.update(),t.updateCurrentLine(),t.initialized=!0}function r(S){t.utils.addDataState(t.editor,"focused")}function i(S){t.editor.contains(S.target)||t.utils.removeDataState(t.editor,"focused")}function n(S){(Array.from(t.gutter.children).indexOf(S.target)>-1||Array.from(t.gutter.children).indexOf(S.target.parentNode)>-1)&&t.setCarretAt(parseInt(S.target.textContent.trim())-1)}var l;function u(S){if(S.target==t.container){l=S.target,S.preventDefault();let m=t.gutter.children,E="0";for(let N=0,L=m.length;N<L;N++)S.clientY>m[N].getBoundingClientRect().y&&(E=m[N].textContent.trim());E-1<0&&(E=1),t.setCarretAt(E-1),t.textarea.focus()}}function s(S){if(l==t.container&&S.buttons==1){let m=t.gutter.children,E="0";for(let N=0,L=m.length;N<L;N++)S.clientY>m[N].getBoundingClientRect().y&&(E=m[N].textContent.trim());t.textarea.focus(),t.textarea.setSelectionRange(t.textarea.value.split(`
`).slice(0,E).join().length,t.textarea.value.length,"backward")}}function c(S){l==t.container&&S.target==t.textarea&&(t.textarea.selectionEnd=t.textarea.value.length,t.textarea.selectionStart=t.textarea.value.length,t.textarea.focus()),l=void 0}function h(S){document.activeElement===t.textarea&&(t.updateCaret(),t.updateCurrentLine(),t.updateHorizontalScroll(),t.lastSelection=t.getTextareaSelection())}function g(S){t.lastTextareaValue=t.textarea.value}function o(S){if(!S.ctrlKey&&!S.shiftKey&&!S.altKey){if(S.key==" "&&t.textarea.selectionStart==t.textarea.selectionEnd&&(!/\n/.test(t.textarea.value.slice(0,t.textarea.selectionStart))&&(/ +$/.test(t.textarea.value.slice(0,t.textarea.selectionStart))||t.textarea.selectionStart===0)||/\n +$/.test(t.textarea.value.slice(0,t.textarea.selectionStart))||t.textarea.selectionStart<t.textarea.value.length&&(/\n +\n$/.test(t.textarea.value.slice(0,t.textarea.selectionStart+1))||/\n$/.test(t.textarea.value.slice(0,t.textarea.selectionStart)))||t.textarea.value.length==t.textarea.selectionStart&&(/\n +$/.test(t.textarea.value)||/\n$/.test(t.textarea.value)))){S.preventDefault();let m=t.textarea.selectionStart+4,E=t.textarea.value.slice(0,t.textarea.selectionStart)+"    "+t.textarea.value.slice(t.textarea.selectionEnd);t.setTextarea(E,m),d()}if(S.key=="Enter"){let m=t.textarea.value,E=m.split(`
`),N=t.getSelectionStartCoordinates(),L=N[0],f=N[1],a=E[L];if(/^    /.test(a)){if(S.preventDefault(),f%4!==0&&f<a.match(/^(    )+/)[0].length){for(let T=f;0<=T;T--)if(T%4==0){t.textarea.selectionStart==t.textarea.selectionEnd&&(t.textarea.selectionEnd=E.slice(0,L).join().length+T),t.textarea.selectionStart=E.slice(0,L).join().length+T,f=T;break}}let w=0;f>0&&(w=a.slice(0,f).match(/^(    )+/)[0].length);let p=t.textarea.selectionStart,C=t.textarea.value.slice(t.textarea.selectionEnd);C.split(`
`)[0].trim()==""&&(C=`
`+C.split(`
`).slice(1).join(`
`));let A=t.textarea.value.slice(0,t.textarea.selectionStart)+`
`+" ".repeat(w)+C;t.setTextarea(A,p+w+1),d()}}}else if(!S.ctrlKey&&S.shiftKey&&!S.altKey)S.key==" "&&t.textarea.selectionStart==t.textarea.selectionEnd;else if(S.ctrlKey&&!S.shiftKey&&!S.altKey){if(S.key=="Backspace"){let m=t.textarea.value.split(`
`),E=t.getSelectionStartCoordinates(),N=m[E[0]],L=N.slice(0,E[1]);if(t.textarea.selectionEnd==t.textarea.selectionStart&&/^ +$/.test(L)){S.preventDefault();let f=0;L.length%4==0?(m[E[0]]=N.slice(4),f=4):(m[E[0]]=N.slice(L.length%4),f=L.length%4),t.setTextarea(m.join(`
`)),d(),t.setCarretAt(E[0],E[1]-f)}}if(S.key==" "){let m=t.textarea.value.slice(0,t.textarea.selectionStart)+"	"+t.textarea.value.slice(t.textarea.selectionEnd);t.setTextarea(t.formatIndentation(m),t.textarea.selectionEnd+1),d()}if(S.key=="]"){S.preventDefault();let m=t.textarea.value.split(`
`),E=t.textarea.value.slice(0,t.textarea.selectionStart).split(`
`).length-1,N=t.textarea.value.slice(0,t.textarea.selectionEnd).split(`
`).length-1,L=t.textarea.selectionStart+4,f=t.textarea.selectionEnd+4*(N-E+1);for(let a=0,w=m.length;a<w;a++)a>=E&&a<=N&&(m[a]="    "+m[a]);t.setTextarea(m.join(`
`),L,f),d()}if(S.key=="["){let m=t.textarea.value,E=t.textarea.value.split(`
`),N=t.textarea.value.slice(0,t.textarea.selectionStart).split(`
`).length-1,L=t.textarea.value.slice(0,t.textarea.selectionEnd).split(`
`).length-1,f=t.textarea.selectionStart,a=t.textarea.selectionEnd;for(let w=0,p=E.length;w<p;w++)w>=N&&w<=L&&E[w].startsWith("    ")&&(w==N&&(f-=4),a-=4,E[w]=E[w].slice(4));t.setTextarea(E.join(`
`),f,a),d()}if(S.key=="Enter"){let m=t.textarea.value.split(`
`),E=t.getCurrentLine();E==m.length-1?t.setTextarea(m.join(`
`)+`
`):t.setTextarea(m.slice(0,E+1).join(`
`)+`

`+m.slice(E+1).join(`
`)),d(),t.setCarretAt(E+1)}S.key=="z"&&(S.preventDefault(),t.historyPosition>1&&(t.historyPosition-=1,t.setTextarea(t.history[t.historyPosition-1][0],t.history[t.historyPosition-1][1]),t.update(),t.virtualScroller.inputHandler(!0),t.textarea.blur(),t.textarea.focus())),S.key=="y"&&(S.preventDefault(),t.historyPosition<t.history.length&&(t.historyPosition+=1,t.setTextarea(t.history[t.historyPosition-1][0],t.history[t.historyPosition-1][1]),t.update(),t.virtualScroller.inputHandler(!0),t.textarea.blur(),t.textarea.focus()))}else if(!S.ctrlKey&&S.shiftKey&&S.altKey)S.key=="f"&&t.setTextarea(t.formatIndentation(t.textarea.value),t.textarea.selectionEnd);else if(!S.ctrlKey&&!S.shiftKey&&S.altKey){if(S.key=="ArrowDown")if(t.getSelectionStartCoordinates()[0]==t.getSelectionEndCoordinates()[0]){let m=t.textarea.value.split(`
`),E=t.getCurrentLine(),N=m[t.getCurrentLine()].slice();if(t.getCurrentLine()!==m.length){let L=m[t.getCurrentLine()+1].slice();m[t.getCurrentLine()]=L,m[t.getCurrentLine()+1]=N,t.setTextarea(m.join(`
`)),d(),t.setCarretAt(E+1)}}else{let m=t.textarea.value.split(`
`),E=t.getSelectionStartCoordinates()[0],N=t.getSelectionEndCoordinates()[0];if(N<E&&(E=t.getSelectionEndCoordinates()[0],N=t.getSelectionStartCoordinates()[0]),N!=m.length){let L=m.slice(E,N+1),f=m[N+1].slice();m[E]=f;for(let a=E,w=a+L.length;a<w;a++)m[a+1]=L[a-E];N<E?t.setTextarea(m.join(`
`),t.textarea.selectionEnd+f.length+1,t.textarea.selectionStart+f.length+1):t.setTextarea(m.join(`
`),t.textarea.selectionStart+f.length+1,t.textarea.selectionEnd+f.length+1),d()}}else if(S.key=="ArrowUp")if(t.getSelectionStartCoordinates()[0]==t.getSelectionEndCoordinates()[0]){let m=t.textarea.value.split(`
`),E=t.getCurrentLine(),N=m[t.getCurrentLine()].slice();if(t.getCurrentLine()!==0){let L=m[t.getCurrentLine()-1].slice();m[t.getCurrentLine()]=L,m[t.getCurrentLine()-1]=N,t.setTextarea(m.join(`
`)),d(),t.setCarretAt(E-1)}}else{let m=t.textarea.value.split(`
`),E=t.getSelectionStartCoordinates()[0],N=t.getSelectionEndCoordinates()[0];if(N<E&&(E=t.getSelectionEndCoordinates()[0],N=t.getSelectionStartCoordinates()[0]),E!=0){let L=m.slice(E,N+1),f=m[E-1].slice();m[N]=f;for(let a=E,w=a+L.length;a<w;a++)m[a-1]=L[a-E];N<E?t.setTextarea(m.join(`
`),t.textarea.selectionEnd-f.length-1,t.textarea.selectionStart-f.length-1):t.setTextarea(m.join(`
`),t.textarea.selectionStart-f.length-1,t.textarea.selectionEnd-f.length-1),d()}}}t.debounceLint()}function O(S){if(t.textarea.selectionStart==t.textarea.selectionEnd){S.preventDefault();let m=t.textarea.value.split(`
`),E=t.getCurrentLine(),N=m.slice(0,E).join(`
`).length,L=N+m[E].length+1;t.textarea.setSelectionRange(N,L),t.lastTextareaValue=t.textarea.value,document.execCommand("cut"),t.updateCaret()}}function y(S){if(t.textarea.selectionStart==t.textarea.selectionEnd){S.preventDefault();let m=t.textarea.value.split(`
`),E=t.getCurrentLine(),N=m.slice(0,E).join(`
`).length,L=N+m[E].length+1;t.textarea.setSelectionRange(N,L),document.execCommand("copy")}}function x(S){S.preventDefault();let m=S.clipboardData.getData("text").replace(new RegExp(/\r/g),""),E=t.textarea.value.slice(0,t.textarea.selectionStart),N=t.textarea.value.slice(t.textarea.selectionEnd),L=E+m+N,f=t.textarea.selectionStart+m.length;try{JSON.parse(L),t.setTextarea(t.damon.jsonToDamon(L)),d(),t.updateCaret(),t.debounceLint();return}catch{}let a=L.split(`
`),w=f,p=0,C=0;for(let _=0,$=a.length;_<$;_++)if(p+a[_].length+_<w)p+=a[_].length;else{p+=_,C=_;break}let A=[C,f-p],T=a[C].slice(0);if(L=t.formatIndentation(L),a=L.split(`
`),t.textarea.value!==L){let _=a.slice(0,C+1).join(`
`).length-T.length+A[1];t.setTextarea(L,_),d()}t.updateCaret(),t.debounceLint()}t.textarea.addEventListener("input",d),t.editor.addEventListener("scroll",v);function d(){document.activeElement==t.textarea&&(t.update(),t.debounceHistoryUpdate(),t.updateCurrentLine(),t.updateHorizontalScroll(),t.updateCaret(),t.debounceLint())}function v(S){t.virtualScroller.scrollHandler()}window.spaceResizeTimeout=null;function b(S){spaceResizeTimeout&&clearTimeout(spaceResizeTimeout),window.spaceResizeTimeout=setTimeout(function(){let m=t.editor.scrollTop;t.gutter.innerHTML="",t.overlay.firstElementChild.innerHTML="",t.initialized=!1,t.virtualScroller.inputHandler(),t.initialized=!0,t.editor.scrollTop=m},100)}}});var Re=R((dt,$e)=>{var Y=Z(),Ze=Ce(),je=K();$e.exports=class{constructor(e,r,i){let n=this;n.dom=e,n.innerHTML="",n.editor={},n.gutter={},n.container={},n.overlay={},n.textarea={},n.caretPadding={},n.caret={},n.statusBar={},n.copyButton={},n.prism=r,n.indentation="    ",n.currentLine=0,n.history=[],n.historyPosition=0,n.historyUpdateTimeoutId,n.lintTimeoutId,n.lastTextareaValue="",n.lastSelection="",n.initialized=!1,n.virtualScroller={},n.damon=new Ze,n.utils=Y}init(){let e=this;e.statusBarHTML=Y.html`
<div>
    Spaces: <a href="https://github.com/adrianturcev/space/blob/master/bindings.md"><kbd>SPACE</kbd></a>
</div>
<a href="https://github.com/adrianturcev/damon/blob/master/language_reference.md">
    DAMON 
    <svg
    viewBox="0 0 24 24"
    xmlns="http://www.w3.org/2000/svg">
        <title>help-circle</title>
        <circle
            style="fill:#FEFEFE;stroke-width:1.04312;fill-opacity:1"
            cx="12"
            cy="12"
            r="9.6854191" />
        <path
            fill="#FEFEFE"
            d="M15.07,11.25L14.17,12.17C13.45,12.89 13,13.5 13,15H11V14.5C11,13.39 11.45,12.39 12.17,11.67L13.41,10.41C13.78,10.05 14,9.55 14,9C14,7.89 13.1,7 12,7A2,2 0 0,0 10,9H8A4,4 0 0,1 12,5A4,4 0 0,1 16,9C16,9.88 15.64,10.67 15.07,11.25M13,19H11V17H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z"
            style="fill:#4169e1;fill-opacity:1" />
    </svg>
</a>
<button class="space-copyButton">
    JSON
    <svg
        viewBox="0 0 24 24"
        xmlns="http://www.w3.org/2000/svg">
        <title>content-copy</title>
        <path
            fill="#FEFEFE"
            d="M 4,21 H 15 V 7 H 4 M 4,5 h 11 a -2,2 0 0 1 2,2 v 14 a -2,2 0 0 1 -2,2 H 4 A -2,2 0 0 1 2,21 V 7 A -2,2 0 0 1 4,5 M 7,1 h 12 a -2,2 0 0 1 2,2 V 17 H 19 V 3 H 7 Z"/>
    </svg>
</button>`,e.innerHTML=Y.html`
<div class="space-editor" data-state="js-off">
    <div class="space-gutter"></div>
    <div class="space-container">
<pre class="space-dummyTextarea"><span class="space-caretPadding"></span><span class="space-caret">&nbsp;</span></pre>
        <pre class="space-overlay" aria-hidden="true" tabindex="-1">
            <code class="language-damon"></code>
        </pre>
        <textarea
            class="space-textarea"
            placeholder="Paste JSON or type DAMON"
            spellcheck="false"
            aria-labelledby=""
            aria-controls="space-statusBar0"
            maxlength="500000">
        </textarea>
        <ul class="space-suggestions"></ul>
    </div>
</div>
<div class="space-statusBar" id="space-statusBar0" role="log" aria-live="polite">${e.statusBarHTML}</div>
        `;let r="";e.dom.innerHTML!==e.innerHTML&&(e.dom.getElementsByTagName("textarea")[0]!==void 0&&(r=e.dom.getElementsByTagName("textarea")[0].innerHTML),e.dom.innerHTML=e.innerHTML),e.editor=e.dom.getElementsByClassName("space-editor")[0],e.gutter=e.dom.getElementsByClassName("space-gutter")[0],e.container=e.dom.getElementsByClassName("space-container")[0],e.overlay=e.dom.getElementsByClassName("space-overlay")[0],e.textarea=e.dom.getElementsByClassName("space-textarea")[0],e.textarea.innerHTML=r,e.caretPadding=e.dom.getElementsByClassName("space-caretPadding")[0],e.caret=e.dom.getElementsByClassName("space-caret")[0],e.statusBar=e.dom.getElementsByClassName("space-statusBar")[0],e.copyButton=e.dom.getElementsByClassName("space-copyButton")[0],e.virtualScroller=new je(this),e.editor.dataset.state="",e.textarea.value=e.formatIndentation(e.textarea.value.replaceAll(/\r/g,"")),e.routes=Te()(this),e.lint()}update(){let e=this;e.initialized&&e.lastTextareaValue==e.textarea.value||(e.gutter.children.length==0?e.virtualScroller.init(0):e.virtualScroller.inputHandler(),e.initialized&&(e.lastTextareaValue=e.textarea.value))}updateHorizontalScroll(){let e=this;if(document.activeElement==e.textarea){let r=e.textarea.value.split(`
`),i=0,n=e.gutter.children[0].children[0].getBoundingClientRect().width;for(let l=0,u=r.length;l<u&&i+r[l].length<e.textarea.selectionEnd;l++)i+=r[l].length+1;(e.textarea.selectionEnd-i)*n-e.gutter.clientWidth<=e.editor.scrollLeft&&(e.editor.scrollLeft=0)}}getCurrentLine(){let e=this,r=e.textarea.value.split(`
`),i=0,n=0,l=0;(e.textarea.selectionDirection=="forward"||e.textarea.selectionStart==e.textarea.selectionEnd)&&(i=e.textarea.selectionEnd),e.textarea.selectionDirection=="backward"&&(i=e.textarea.selectionStart);for(let u=0,s=r.length;u<s;u++)if(n+r[u].length+u<i)n+=r[u].length;else{l=u;break}return l}getSelectionStartCoordinates(){let e=this,r=e.textarea.value.split(`
`),i=e.textarea.selectionStart,n=0,l=0;for(let u=0,s=r.length;u<s;u++)if(n+r[u].length+u<i)n+=r[u].length;else{n+=u,l=u;break}return[l,e.textarea.selectionStart-n]}getSelectionEndCoordinates(){let e=this,r=e.textarea.value.split(`
`),i=e.textarea.selectionEnd,n=0,l=0;for(let u=0,s=r.length;u<s;u++)if(n+r[u].length+u<i)n+=r[u].length;else{n+=u,l=u;break}return[l,e.textarea.selectionEnd-n]}setCarretAt(e,r){let i=this;if(r==null&&(r=i.textarea.value.split(`
`)[e].length),e==0)i.textarea.selectionStart=r;else{let n=Math.min(r,i.textarea.value.split(`
`)[e].length);i.textarea.selectionStart=i.textarea.value.split(`
`).slice(0,e).reduce(function(l,u){return l+u}).length+e+r}i.textarea.selectionEnd=i.textarea.selectionStart,i.textarea.focus()}getTextareaSelection(){let e=this;return e.textarea.selectionStart<e.textarea.selectionEnd?e.textarea.value.slice(e.textarea.selectionStart,e.textarea.selectionEnd):e.textarea.selectionStart<e.textarea.selectionEnd?e.textarea.value.slice(e.textarea.selectionEnd,e.textarea.selectionStart):void 0}updateCurrentLine(e){let r=this,i=r.currentLine;if(r.currentLine=r.getCurrentLine(),i!=r.currentLine||!r.initialized||e||r.lastSelection!=null&&r.getTextareaSelection()==null){for(let l=0,u=r.gutter.children.length;l<u;l++)r.gutter.children[l].classList.remove("currentLine"),r.gutter.children[l].classList.remove("selectionEnd");r.gutter.children[r.currentLine-r.gutter.children[0].textContent.trim()+1]&&(r.textarea.selectionEnd==r.textarea.selectionStart?r.gutter.children[r.currentLine-r.gutter.children[0].textContent.trim()+1].classList.add("currentLine"):r.gutter.children[r.currentLine-r.gutter.children[0].textContent.trim()+1].classList.add("selectionEnd"))}}historyUpdate(){let e=this;if(e.history.length==0||e.textarea.value!=e.history[e.historyPosition-1][0]){let i=function(n,l){return n+l[0]+l[1]};var r=i;if(e.historyPosition!=e.history.length&&(e.history=e.history.slice(0,e.historyPosition)),e.history.push([e.textarea.value,e.textarea.selectionStart]),e.history.reduce(i,"").length*4>1e8){let n=0;for(;e.history.reduce(i,"").length*4>1e8;)n++,e.history.shift();e.historyPosition-=n}e.historyPosition++}}debounceHistoryUpdate(){var e=this,r=arguments;clearTimeout(this.historyUpdateTimeoutId),this.historyUpdateTimeoutId=setTimeout(function(){e.historyUpdateTimeoutId=null,e.historyUpdate.apply(e,r)},200)}formatIndentation(e){let r=this,i=e.split(`
`);for(let n=0,l=i.length;n<l;n++){if(/^ *(\t)+/.test(i[n])){let u=i[n].match(/^ *(\t)+/)[0].length;for(let s=0,c=u;s<c;s++)i[n]=i[n].replace("	","    ")}if(/^( )+/.test(i[n])&&i[n].match(/^( )+/)[0].length%4!==0){for(let u=i[n].match(/^( )+/)[0].length;0<=u;u--)if(u%4==0){i[n].trimStart(),i[n]=" ".repeat(u)+i[n];break}}}return i.join(`
`)}formatHyphens(e){let r=this,i=e.split(`
`);for(let n=0,l=i.length;n<l;n++)if(!/^ *- /.test(i[n])){let u="";/^ /.test(i[n])&&(u=i[n].match(/^( )+/)[0]),i[n]=u+"- "+i[n].slice(u.length)}return i.join(`
`)}updateCaret(){let e=this;e.textarea.selectionDirection=="forward"||e.textarea.selectionStart==e.textarea.selectionEnd?e.caretPadding.textContent=e.textarea.value.slice(0,e.textarea.selectionEnd):e.caretPadding.textContent=e.textarea.value.slice(0,e.textarea.selectionStart)}setTextarea(e,r,i=r){let n=this;n.lastTextareaValue=n.textarea.value,n.textarea.value=e,r!==null&&n.textarea.setSelectionRange(r,i)}lint(){let e=this;try{e.damon.damonToMap(e.textarea.value),e.statusBar.innerHTML=e.statusBarHTML}catch(r){r.language=="JSON"?e.statusBar.innerHTML="<span>( ! ) Error line number "+r.line+": "+r.type+" not JSON-compliant</span>"+e.statusBarHTML:e.statusBar.innerHTML="<span>( ! ) "+r.message+"</span>"+e.statusBarHTML,console.error(r)}e.copyButton=e.dom.getElementsByClassName("space-copyButton")[0],e.copyButton.addEventListener("click",function(r){let i=document.createElement("textarea");i.style.opacity="0";try{i.value=e.damon.damonToJSON(e.textarea.value)}catch{setTimeout(function(){e.copyButton.classList.remove("error")},1100),e.copyButton.classList.add("error");return}document.body.appendChild(i),i.focus(),i.select();try{document.execCommand("copy")&&(setTimeout(function(){e.copyButton.classList.remove("success")},1100),e.copyButton.classList.add("success"))}catch(n){console.error(n.name,n.message)}document.body.removeChild(i)})}debounceLint(){var e=this,r=arguments;clearTimeout(this.lintTimeoutId),this.lintTimeoutId=setTimeout(function(){e.lintTimeoutId=null,e.lint.apply(e,r)},200)}}});(function(){window.Space=Re()})();})();
